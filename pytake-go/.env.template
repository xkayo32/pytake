# PyTake Backend - Environment Configuration Template
# Copy this file to .env and set your values
# All settings use environment variable substitution to avoid hardcoding

# ============================================
# APPLICATION SETTINGS
# ============================================
APP_ENV=${APP_ENV:-development}
APP_VERSION=${APP_VERSION:-1.0.0}
APP_PORT=${APP_PORT:-8080}
APP_HOST=${APP_HOST:-0.0.0.0}

# ============================================
# DATABASE CONFIGURATION
# ============================================
DB_HOST=${DB_HOST:-localhost}
DB_PORT=${DB_PORT:-5432}
DB_NAME=${DB_NAME:-pytake}
DB_USER=${DB_USER:-pytake}
DB_PASSWORD=${DB_PASSWORD:-changeme}
DB_SSL_MODE=${DB_SSL_MODE:-disable}
DB_TIMEZONE=${DB_TIMEZONE:-UTC}
DB_MAX_CONNECTIONS=${DB_MAX_CONNECTIONS:-25}
DB_IDLE_CONNECTIONS=${DB_IDLE_CONNECTIONS:-5}
DB_CONNECTION_LIFETIME=${DB_CONNECTION_LIFETIME:-300}

# Alternative: Use DATABASE_URL if provided
DATABASE_URL=${DATABASE_URL:-postgres://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}?sslmode=${DB_SSL_MODE}}

# ============================================
# REDIS CONFIGURATION
# ============================================
REDIS_HOST=${REDIS_HOST:-localhost}
REDIS_PORT=${REDIS_PORT:-6379}
REDIS_PASSWORD=${REDIS_PASSWORD:-changeme}
REDIS_DB=${REDIS_DB:-0}
REDIS_MAX_RETRIES=${REDIS_MAX_RETRIES:-3}
REDIS_POOL_SIZE=${REDIS_POOL_SIZE:-10}
REDIS_MIN_IDLE_CONNECTIONS=${REDIS_MIN_IDLE_CONNECTIONS:-3}

# Alternative: Use REDIS_URL if provided
REDIS_URL=${REDIS_URL:-redis://default:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}}

# ============================================
# JWT CONFIGURATION
# ============================================
JWT_SECRET=${JWT_SECRET}
JWT_ACCESS_TOKEN_EXPIRY=${JWT_ACCESS_TOKEN_EXPIRY:-24h}
JWT_REFRESH_TOKEN_EXPIRY=${JWT_REFRESH_TOKEN_EXPIRY:-168h}
JWT_ISSUER=${JWT_ISSUER:-pytake}
JWT_AUDIENCE=${JWT_AUDIENCE:-pytake-api}

# ============================================
# STORAGE CONFIGURATION
# ============================================
# MinIO / S3 Compatible Storage
MINIO_ENDPOINT=${MINIO_ENDPOINT:-localhost:9000}
MINIO_ACCESS_KEY=${MINIO_ACCESS_KEY:-pytake}
MINIO_SECRET_KEY=${MINIO_SECRET_KEY:-changeme}
MINIO_BUCKET=${MINIO_BUCKET:-pytake-media}
MINIO_USE_SSL=${MINIO_USE_SSL:-false}
MINIO_PUBLIC_URL=${MINIO_PUBLIC_URL:-http://localhost:9000}

# Alternative: AWS S3
AWS_REGION=${AWS_REGION:-us-east-1}
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
S3_BUCKET=${S3_BUCKET:-pytake-files}
S3_PUBLIC_URL=${S3_PUBLIC_URL}

# ============================================
# WHATSAPP CONFIGURATION
# ============================================
# These will be managed via database settings after initial setup
WHATSAPP_PHONE_NUMBER_ID=${WHATSAPP_PHONE_NUMBER_ID}
WHATSAPP_ACCESS_TOKEN=${WHATSAPP_ACCESS_TOKEN}
WHATSAPP_WEBHOOK_VERIFY_TOKEN=${WHATSAPP_WEBHOOK_VERIFY_TOKEN}
WHATSAPP_WEBHOOK_SECRET=${WHATSAPP_WEBHOOK_SECRET}
WHATSAPP_API_VERSION=${WHATSAPP_API_VERSION:-v18.0}
WHATSAPP_BASE_URL=${WHATSAPP_BASE_URL:-https://graph.facebook.com}

# ============================================
# AI CONFIGURATION
# ============================================
# These will be managed via database settings after initial setup
OPENAI_API_KEY=${OPENAI_API_KEY}
OPENAI_MODEL=${OPENAI_MODEL:-gpt-3.5-turbo}
OPENAI_MAX_TOKENS=${OPENAI_MAX_TOKENS:-4096}
OPENAI_TEMPERATURE=${OPENAI_TEMPERATURE:-0.7}

# ============================================
# EMAIL CONFIGURATION
# ============================================
SMTP_HOST=${SMTP_HOST:-localhost}
SMTP_PORT=${SMTP_PORT:-1025}
SMTP_USERNAME=${SMTP_USERNAME}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_FROM_EMAIL=${SMTP_FROM_EMAIL:-noreply@pytake.com}
SMTP_FROM_NAME=${SMTP_FROM_NAME:-PyTake}
SMTP_USE_TLS=${SMTP_USE_TLS:-false}

# ============================================
# QUEUE CONFIGURATION
# ============================================
QUEUE_REDIS_PREFIX=${QUEUE_REDIS_PREFIX:-pytake:queue}
QUEUE_MAX_RETRIES=${QUEUE_MAX_RETRIES:-3}
QUEUE_DEFAULT_TIMEOUT=${QUEUE_DEFAULT_TIMEOUT:-5m}
QUEUE_WORKER_POOLS=${QUEUE_WORKER_POOLS:-{"default":5,"email":3,"webhook":10,"sync":2,"cleanup":1}}

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_ENABLED=${RATE_LIMIT_ENABLED:-true}
RATE_LIMIT_RPS=${RATE_LIMIT_RPS:-10}
RATE_LIMIT_BURST=${RATE_LIMIT_BURST:-20}
RATE_LIMIT_CLEANUP_INTERVAL=${RATE_LIMIT_CLEANUP_INTERVAL:-60s}

# ============================================
# CORS CONFIGURATION
# ============================================
CORS_ALLOWED_ORIGINS=${CORS_ALLOWED_ORIGINS:-*}
CORS_ALLOWED_METHODS=${CORS_ALLOWED_METHODS:-GET,POST,PUT,DELETE,OPTIONS,PATCH}
CORS_ALLOWED_HEADERS=${CORS_ALLOWED_HEADERS:-Content-Type,Authorization,X-Requested-With}
CORS_ALLOW_CREDENTIALS=${CORS_ALLOW_CREDENTIALS:-true}
CORS_MAX_AGE=${CORS_MAX_AGE:-86400}

# ============================================
# LOGGING CONFIGURATION
# ============================================
LOG_LEVEL=${LOG_LEVEL:-info}
LOG_FORMAT=${LOG_FORMAT:-json}
LOG_OUTPUT=${LOG_OUTPUT:-stdout}
LOG_FILE_PATH=${LOG_FILE_PATH:-./logs/pytake.log}
LOG_MAX_SIZE=${LOG_MAX_SIZE:-100MB}
LOG_MAX_BACKUPS=${LOG_MAX_BACKUPS:-5}
LOG_MAX_AGE=${LOG_MAX_AGE:-30}

# ============================================
# MONITORING CONFIGURATION
# ============================================
METRICS_ENABLED=${METRICS_ENABLED:-true}
METRICS_PORT=${METRICS_PORT:-9090}
METRICS_PATH=${METRICS_PATH:-/metrics}

# Prometheus
PROMETHEUS_ENDPOINT=${PROMETHEUS_ENDPOINT:-http://localhost:9090}

# Grafana
GRAFANA_ENDPOINT=${GRAFANA_ENDPOINT:-http://localhost:3000}
GRAFANA_USER=${GRAFANA_USER:-admin}
GRAFANA_PASSWORD=${GRAFANA_PASSWORD:-admin}

# Jaeger Tracing
TRACING_ENABLED=${TRACING_ENABLED:-false}
JAEGER_AGENT_HOST=${JAEGER_AGENT_HOST:-localhost}
JAEGER_AGENT_PORT=${JAEGER_AGENT_PORT:-6831}

# ============================================
# SECURITY
# ============================================
SECURITY_HEADERS_ENABLED=${SECURITY_HEADERS_ENABLED:-true}
CSRF_ENABLED=${CSRF_ENABLED:-true}
HTTPS_ONLY=${HTTPS_ONLY:-false}
TRUSTED_PROXIES=${TRUSTED_PROXIES}

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
MAX_UPLOAD_SIZE=${MAX_UPLOAD_SIZE:-10MB}
ALLOWED_FILE_TYPES=${ALLOWED_FILE_TYPES:-image/jpeg,image/png,image/gif,application/pdf,audio/mpeg,audio/wav,video/mp4}
UPLOAD_PATH=${UPLOAD_PATH:-./uploads}

# ============================================
# WEBSOCKET CONFIGURATION
# ============================================
WS_ENABLED=${WS_ENABLED:-true}
WS_MAX_CONNECTIONS=${WS_MAX_CONNECTIONS:-1000}
WS_PING_INTERVAL=${WS_PING_INTERVAL:-30s}
WS_PONG_WAIT=${WS_PONG_WAIT:-60s}

# ============================================
# DEVELOPMENT TOOLS
# ============================================
DEBUG_ENABLED=${DEBUG_ENABLED:-false}
PROFILER_ENABLED=${PROFILER_ENABLED:-false}
HOT_RELOAD=${HOT_RELOAD:-false}

# ============================================
# EXTERNAL SERVICES ENDPOINTS
# ============================================
# All external service URLs without hardcoding
ELASTICSEARCH_URL=${ELASTICSEARCH_URL:-http://localhost:9200}
RABBITMQ_URL=${RABBITMQ_URL:-amqp://pytake:pytake123@localhost:5672/pytake}
MAILHOG_SMTP_URL=${MAILHOG_SMTP_URL:-localhost:1025}

# ============================================
# DOCKER SPECIFIC
# ============================================
# When running in Docker, these can override defaults
DOCKER_HOST_IP=${DOCKER_HOST_IP:-host.docker.internal}
USE_DOCKER_LINKS=${USE_DOCKER_LINKS:-false}