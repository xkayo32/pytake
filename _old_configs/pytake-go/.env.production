# PyTake Backend - Production Environment Configuration

# Application
APP_ENV=production
APP_VERSION=1.0.0
APP_PORT=8080
APP_HOST=0.0.0.0

# Database Configuration
DB_HOST=${DB_HOST}
DB_PORT=${DB_PORT:-5432}
DB_NAME=${DB_NAME}
DB_USER=${DB_USER}
DB_PASSWORD=${DB_PASSWORD}
DB_SSL_MODE=${DB_SSL_MODE:-require}
DB_TIMEZONE=UTC
DB_MAX_CONNECTIONS=${DB_MAX_CONNECTIONS:-50}
DB_IDLE_CONNECTIONS=${DB_IDLE_CONNECTIONS:-10}
DB_CONNECTION_LIFETIME=${DB_CONNECTION_LIFETIME:-600}

# Database URL (alternative)
DATABASE_URL=${DATABASE_URL}

# Redis Configuration
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=${REDIS_PORT:-6379}
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=${REDIS_DB:-0}
REDIS_MAX_RETRIES=${REDIS_MAX_RETRIES:-5}
REDIS_POOL_SIZE=${REDIS_POOL_SIZE:-20}
REDIS_MIN_IDLE_CONNECTIONS=${REDIS_MIN_IDLE_CONNECTIONS:-5}

# Redis URL (alternative)
REDIS_URL=${REDIS_URL}

# JWT Configuration
JWT_SECRET=${JWT_SECRET}
JWT_ACCESS_TOKEN_EXPIRY=${JWT_ACCESS_TOKEN_EXPIRY:-24h}
JWT_REFRESH_TOKEN_EXPIRY=${JWT_REFRESH_TOKEN_EXPIRY:-168h}
JWT_ISSUER=${JWT_ISSUER:-pytake}
JWT_AUDIENCE=${JWT_AUDIENCE:-pytake-api}

# WhatsApp Business API Configuration
WHATSAPP_PHONE_NUMBER_ID=${WHATSAPP_PHONE_NUMBER_ID}
WHATSAPP_ACCESS_TOKEN=${WHATSAPP_ACCESS_TOKEN}
WHATSAPP_WEBHOOK_VERIFY_TOKEN=${WHATSAPP_WEBHOOK_VERIFY_TOKEN}
WHATSAPP_WEBHOOK_SECRET=${WHATSAPP_WEBHOOK_SECRET}
WHATSAPP_API_VERSION=${WHATSAPP_API_VERSION:-v18.0}
WHATSAPP_BASE_URL=${WHATSAPP_BASE_URL:-https://graph.facebook.com}

# Evolution API Configuration (for unofficial WhatsApp features)
EVOLUTION_API_URL=${EVOLUTION_API_URL}
EVOLUTION_API_KEY=${EVOLUTION_API_KEY}
EVOLUTION_API_INSTANCE=${EVOLUTION_API_INSTANCE}

# OpenAI Configuration
OPENAI_API_KEY=${OPENAI_API_KEY}
OPENAI_MODEL=${OPENAI_MODEL:-gpt-3.5-turbo}
OPENAI_MAX_TOKENS=${OPENAI_MAX_TOKENS:-4096}
OPENAI_TEMPERATURE=${OPENAI_TEMPERATURE:-0.7}

# Email Configuration (SMTP)
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=${SMTP_PORT:-587}
SMTP_USERNAME=${SMTP_USERNAME}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_FROM_EMAIL=${SMTP_FROM_EMAIL}
SMTP_FROM_NAME=${SMTP_FROM_NAME:-PyTake}

# AWS S3 Configuration (for file storage)
AWS_REGION=${AWS_REGION:-us-east-1}
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
S3_BUCKET=${S3_BUCKET}
S3_PUBLIC_URL=${S3_PUBLIC_URL}

# Queue Configuration
QUEUE_REDIS_PREFIX=${QUEUE_REDIS_PREFIX:-pytake:queue}
QUEUE_MAX_RETRIES=${QUEUE_MAX_RETRIES:-5}
QUEUE_DEFAULT_TIMEOUT=${QUEUE_DEFAULT_TIMEOUT:-10m}
QUEUE_WORKER_POOLS=${QUEUE_WORKER_POOLS:-{"default":10,"email":5,"webhook":20,"sync":3,"cleanup":2}}

# ERP Configuration
ERP_ENCRYPTION_KEY=${ERP_ENCRYPTION_KEY}
ERP_HUBSOFT_TIMEOUT=${ERP_HUBSOFT_TIMEOUT:-60s}
ERP_IXCSOFT_TIMEOUT=${ERP_IXCSOFT_TIMEOUT:-60s}
ERP_MKSOLUTIONS_TIMEOUT=${ERP_MKSOLUTIONS_TIMEOUT:-60s}
ERP_SISGP_TIMEOUT=${ERP_SISGP_TIMEOUT:-60s}

# Rate Limiting
RATE_LIMIT_ENABLED=${RATE_LIMIT_ENABLED:-true}
RATE_LIMIT_RPS=${RATE_LIMIT_RPS:-50}
RATE_LIMIT_BURST=${RATE_LIMIT_BURST:-100}
RATE_LIMIT_CLEANUP_INTERVAL=${RATE_LIMIT_CLEANUP_INTERVAL:-300s}

# CORS Configuration
CORS_ALLOWED_ORIGINS=${CORS_ALLOWED_ORIGINS}
CORS_ALLOWED_METHODS=${CORS_ALLOWED_METHODS:-GET,POST,PUT,DELETE,OPTIONS,PATCH}
CORS_ALLOWED_HEADERS=${CORS_ALLOWED_HEADERS:-Content-Type,Authorization,X-Requested-With}
CORS_ALLOW_CREDENTIALS=${CORS_ALLOW_CREDENTIALS:-true}
CORS_MAX_AGE=${CORS_MAX_AGE:-86400}

# Logging Configuration
LOG_LEVEL=${LOG_LEVEL:-info}
LOG_FORMAT=${LOG_FORMAT:-json}
LOG_OUTPUT=${LOG_OUTPUT:-stdout}
LOG_FILE_PATH=${LOG_FILE_PATH:-./logs/pytake.log}
LOG_MAX_SIZE=${LOG_MAX_SIZE:-500MB}
LOG_MAX_BACKUPS=${LOG_MAX_BACKUPS:-10}
LOG_MAX_AGE=${LOG_MAX_AGE:-90}

# Monitoring Configuration
METRICS_ENABLED=${METRICS_ENABLED:-true}
METRICS_PORT=${METRICS_PORT:-9090}
METRICS_PATH=${METRICS_PATH:-/metrics}

# Security
SECURITY_HEADERS_ENABLED=${SECURITY_HEADERS_ENABLED:-true}
CSRF_ENABLED=${CSRF_ENABLED:-true}
HTTPS_ONLY=${HTTPS_ONLY:-true}

# File Upload Configuration
MAX_UPLOAD_SIZE=${MAX_UPLOAD_SIZE:-50MB}
ALLOWED_FILE_TYPES=${ALLOWED_FILE_TYPES:-image/jpeg,image/png,image/gif,application/pdf,audio/mpeg,audio/wav,video/mp4}

# WebSocket Configuration
WS_ENABLED=${WS_ENABLED:-true}
WS_MAX_CONNECTIONS=${WS_MAX_CONNECTIONS:-5000}
WS_PING_INTERVAL=${WS_PING_INTERVAL:-30s}
WS_PONG_WAIT=${WS_PONG_WAIT:-60s}

# Production Security
DEBUG_ENABLED=false
PROFILER_ENABLED=false
HOT_RELOAD=false

# SSL Configuration
TLS_CERT_FILE=${TLS_CERT_FILE}
TLS_KEY_FILE=${TLS_KEY_FILE}
TLS_ENABLED=${TLS_ENABLED:-true}

# Backup Configuration
BACKUP_ENABLED=${BACKUP_ENABLED:-true}
BACKUP_SCHEDULE=${BACKUP_SCHEDULE:-0 2 * * *}
BACKUP_RETENTION_DAYS=${BACKUP_RETENTION_DAYS:-30}
BACKUP_S3_BUCKET=${BACKUP_S3_BUCKET}

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=${HEALTH_CHECK_TIMEOUT:-10s}
HEALTH_CHECK_INTERVAL=${HEALTH_CHECK_INTERVAL:-30s}

# Performance
GOMAXPROCS=${GOMAXPROCS}
GC_TARGET_PERCENTAGE=${GC_TARGET_PERCENTAGE:-100}

# External Services Timeouts
HTTP_CLIENT_TIMEOUT=${HTTP_CLIENT_TIMEOUT:-30s}
HTTP_CLIENT_IDLE_CONN_TIMEOUT=${HTTP_CLIENT_IDLE_CONN_TIMEOUT:-90s}
HTTP_CLIENT_MAX_IDLE_CONNS=${HTTP_CLIENT_MAX_IDLE_CONNS:-100}