{"openapi":"3.1.0","info":{"title":"PyTake","description":"\n# PyTake - WhatsApp Automation Platform\n\nPlataforma completa de automa√ß√£o de WhatsApp Business com m√∫ltiplas APIs:\n\n## üîå APIs Dispon√≠veis\n\n### REST API (OpenAPI 3.0)\n- **Swagger UI**: `/api/v1/docs`\n- **ReDoc**: `/api/v1/redoc`\n- **OpenAPI JSON**: `/api/v1/openapi.json`\n- **Total de Endpoints**: 217 endpoints REST\n\n### GraphQL API\n- **Endpoint**: `/graphql`\n- **GraphiQL IDE**: `/graphql` (desenvolvimento)\n- **Total de M√≥dulos**: 15 m√≥dulos completos\n- **Documenta√ß√£o**: Ver [GRAPHQL_API.md](/.github/docs/GRAPHQL_API.md)\n\n### WebSocket API (Socket.IO)\n- **Endpoint**: `/socket.io`\n- **Real-time**: Conversas, mensagens, status de agentes\n\n## üìö Recursos Principais\n\n- **Multi-tenancy**: Isolamento completo por organiza√ß√£o\n- **Autentica√ß√£o**: JWT (Bearer token)\n- **Permiss√µes**: Role-based access control (RBAC)\n- **Rate Limiting**: Prote√ß√£o contra abuso\n- **Logs**: MongoDB para auditoria completa\n- **Cache**: Redis para performance\n\n## üèóÔ∏è Arquitetura\n\n- **Backend**: FastAPI + Python 3.11+\n- **Banco de Dados**: PostgreSQL 15 (principal), Redis 7 (cache), MongoDB 7 (logs)\n- **Real-time**: Socket.IO + WebSocket\n- **APIs**: REST (OpenAPI) + GraphQL (Strawberry)\n\n## üîê Autentica√ß√£o\n\nTodas as APIs (exceto endpoints p√∫blicos) requerem autentica√ß√£o via JWT token:\n\n```\nAuthorization: Bearer <your_jwt_token>\n```\n\nObtenha seu token via:\n- **REST**: `POST /api/v1/auth/login`\n- **GraphQL**: `mutation { login(email: \"...\", password: \"...\") { access_token } }`\n\n## üìñ Come√ßando\n\n1. Autentique-se para obter um token JWT\n2. Use o token no header `Authorization` de todas as requisi√ß√µes\n3. Explore os endpoints via Swagger UI ou GraphiQL\n4. Consulte a documenta√ß√£o completa em `/docs`\n\n## üÜò Suporte\n\n- **Documenta√ß√£o**: `/.github/docs/INDEX.md`\n- **GitHub**: https://github.com/pytake/pytake\n- **Email**: support@pytake.com\n    ","contact":{"name":"PyTake Support","url":"https://pytake.com/support","email":"support@pytake.com"},"license":{"name":"Proprietary","url":"https://pytake.com/license"},"version":"1.0.0"},"paths":{"/":{"get":{"summary":"Root","description":"Root endpoint - API health check","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint for monitoring","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ping":{"get":{"summary":"Ping","description":"Simple ping endpoint","operationId":"ping_api_v1_ping_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Simple health check endpoint returning 200 OK.\nUsed by container healthcheck to avoid 400 responses on /docs.","operationId":"health_check_api_v1_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/whatsapp/webhook":{"get":{"tags":["WhatsApp"],"summary":"Verify Webhook","description":"Webhook verification endpoint for Meta Cloud API.\n\nMeta sends a GET request to verify the webhook during setup.\nThis endpoint is PUBLIC and does NOT require authentication.\n\n**Path Parameters:** None\n\n**Query Parameters:**\n- hub.mode (str): Subscription mode (must be 'subscribe')\n- hub.verify_token (str): Token to verify against configuration\n- hub.challenge (str): Random string to echo back\n\n**Returns:** Plain text challenge string (200 OK)\n\n**Example Request:**\n```\nGET /api/v1/whatsapp/webhook?hub.mode=subscribe&hub.verify_token=my_token&hub.challenge=abc123\n```\n\n**Example Response:**\n```\nabc123\n```\n\n**Permissions:**\n- Public endpoint (no authentication required)\n- Verification token configured in Meta Dashboard\n\n**Error Codes:**\n- 400: Bad Request (missing required query parameters)\n- 403: Forbidden (invalid mode or token)\n- 500: Server error (verification failure)\n\n**Security Notes:**\n- Verify token must match Meta Dashboard configuration\n- Only mode 'subscribe' is accepted\n- Token validation happens server-side","operationId":"verify_webhook_api_v1_whatsapp_webhook_get","parameters":[{"name":"hub.mode","in":"query","required":false,"schema":{"type":"string","title":"Hub.Mode"}},{"name":"hub.verify_token","in":"query","required":false,"schema":{"type":"string","title":"Hub.Verify Token"}},{"name":"hub.challenge","in":"query","required":false,"schema":{"type":"string","title":"Hub.Challenge"}}],"responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["WhatsApp"],"summary":"Receive Webhook","description":"Webhook endpoint for receiving WhatsApp messages and events from Meta Cloud API.\n\nThis endpoint receives and processes incoming messages, status updates, and\ncustomer information changes. All events are validated using HMAC signature.\n\n**Path Parameters:** None\n\n**Request Body:**\n- object (str): Always 'whatsapp_business_account'\n- entry (array): Webhook entries containing:\n  - changes (array): Events array with:\n    - value (object): Event data containing:\n      - messaging_product (str): 'whatsapp'\n      - messages (array): Incoming messages with body, from, id\n      - statuses (array): Message status updates (sent, delivered, read, failed)\n      - contacts (array): Customer contact info\n\n**Returns:** HTTP 200 OK (empty response)\n\n**Example Webhook Payload (Message):**\n```json\n{\n    \"object\": \"whatsapp_business_account\",\n    \"entry\": [\n        {\n            \"id\": \"123456789\",\n            \"changes\": [\n                {\n                    \"value\": {\n                        \"messaging_product\": \"whatsapp\",\n                        \"metadata\": {\n                            \"display_phone_number\": \"5585987654321\",\n                            \"phone_number_id\": \"123456789101112\"\n                        },\n                        \"messages\": [\n                            {\n                                \"from\": \"5585987654322\",\n                                \"id\": \"wamid.123\",\n                                \"timestamp\": \"1671234567\",\n                                \"type\": \"text\",\n                                \"text\": {\"body\": \"Ol√°!\"}\n                            }\n                        ],\n                        \"contacts\": [\n                            {\n                                \"profile\": {\"name\": \"Jo√£o Silva\"},\n                                \"wa_id\": \"5585987654322\"\n                            }\n                        ]\n                    }\n                }\n            ]\n        }\n    ]\n}\n```\n\n**Example Webhook Payload (Status Update):**\n```json\n{\n    \"object\": \"whatsapp_business_account\",\n    \"entry\": [\n        {\n            \"changes\": [\n                {\n                    \"value\": {\n                        \"messaging_product\": \"whatsapp\",\n                        \"metadata\": {\n                            \"phone_number_id\": \"123456789101112\"\n                        },\n                        \"statuses\": [\n                            {\n                                \"id\": \"wamid.123\",\n                                \"status\": \"delivered\",\n                                \"timestamp\": \"1671234567\",\n                                \"recipient_id\": \"5585987654322\"\n                            }\n                        ]\n                    }\n                }\n            ]\n        }\n    ]\n}\n```\n\n**Permissions:**\n- Public endpoint (no authentication required)\n- HMAC signature validation required via X-Hub-Signature header\n\n**Error Codes:**\n- 200: OK (success, always return 200 to avoid retry)\n- 400: Bad Request (invalid payload format)\n- 401: Unauthorized (invalid HMAC signature)\n- 422: Unprocessable Entity (validation error)\n- 500: Server error (processing failure)\n\n**Processing:**\n- Messages are stored in conversation threads\n- Status updates modify message delivery status\n- Customer profiles are created/updated\n- Async background tasks handle message processing\n- Always return 200 OK to prevent Meta from retrying","operationId":"receive_webhook_api_v1_whatsapp_webhook_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/auth/register":{"post":{"tags":["Authentication"],"summary":"Register","description":"Register a new user and organization\n\n**Description:** Creates a new user account with an associated organization. The user will be assigned the 'org_admin' role.\n\n**Request Body:**\n- `email` (string, required): Valid email address (must be unique)\n- `password` (string, required): Strong password (min 8 chars, uppercase, lowercase, digit, special)\n- `full_name` (string, required): User's full name\n- `organization_name` (string, required): Name of the organization to create\n\n**Returns:** User profile and authentication tokens\n\n**Rate Limit:** 3 registrations per hour per IP\n\n**Possible Errors:**\n- `400`: Invalid data (weak password, invalid email format)\n- `409`: Email already registered\n- `429`: Rate limit exceeded (too many registration attempts)\n- `500`: Internal server error","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRegister"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Register Api V1 Auth Register Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["Authentication"],"summary":"Dev Login","description":"Development login endpoint","operationId":"dev_login_api_v1_auth_login_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/auth/refresh":{"post":{"tags":["Authentication"],"summary":"Refresh Token","description":"Refresh access token\n\n**Description:** Uses refresh token to get a new access token when the current one expires.\n\n**Request Body:**\n- `refresh_token` (string, required): Valid refresh token from login response\n\n**Returns:** New access token and refresh token\n\n**Rate Limit:** 10 refresh requests per minute per IP\n\n**Possible Errors:**\n- `400`: Missing refresh token\n- `401`: Invalid or expired refresh token\n- `429`: Rate limit exceeded\n- `500`: Internal server error","operationId":"refresh_token_api_v1_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/logout":{"post":{"tags":["Authentication"],"summary":"Logout","description":"Logout user\n\n**Description:** Revokes the refresh token to prevent future token refreshes. User must re-login to continue.\n\n**Request Body:**\n- `refresh_token` (string, required): Refresh token to revoke (from login response)\n\n**Returns:** Success confirmation\n\n**Permissions Required:** Authenticated user\n\n**Possible Errors:**\n- `400`: Missing refresh token\n- `401`: User not authenticated\n- `500`: Internal server error","operationId":"logout_api_v1_auth_logout_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/me":{"get":{"tags":["Authentication"],"summary":"Get Current User Profile","description":"Get current user profile\n\nReturns the authenticated user's profile information.","operationId":"get_current_user_profile_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfile"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/verify-token":{"get":{"tags":["Authentication"],"summary":"Verify Token","description":"Verify if access token is valid\n\nReturns basic user info if token is valid.","operationId":"verify_token_api_v1_auth_verify_token_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Verify Token Api V1 Auth Verify Token Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/organizations/me":{"get":{"tags":["Organizations"],"summary":"Get My Organization","description":"Get current user's organization\n\n**Description:** Retrieves the organization details for the currently authenticated user.\n\n**Returns:** Organization object with all configuration\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Organization not found\n- `500`: Database error","operationId":"get_my_organization_api_v1_organizations_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Organization"}}}}},"security":[{"HTTPBearer":[]}]},"put":{"tags":["Organizations"],"summary":"Update My Organization","description":"Update current user's organization\n\n**Description:** Updates organization name, settings, billing info, and other configurations.\n\n**Request Body (all optional):**\n- `name` (string): New organization name\n- `domain` (string): Custom domain\n- `settings` (object): Organization settings\n\n**Returns:** Updated Organization object\n\n**Permissions Required:** org_admin or super_admin role\n\n**Possible Errors:**\n- `400`: Invalid update data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Organization not found\n- `409`: Domain already in use\n- `500`: Database error","operationId":"update_my_organization_api_v1_organizations_me_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Organization"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/organizations/":{"get":{"tags":["Organizations"],"summary":"List Organizations","description":"List all organizations (Super Admin only)","operationId":"list_organizations_api_v1_organizations__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"active_only","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Active Only"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Organization"},"title":"Response List Organizations Api V1 Organizations  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/organizations/{org_id}":{"get":{"tags":["Organizations"],"summary":"Get Organization","description":"Get organization by ID (Super Admin only)","operationId":"get_organization_api_v1_organizations__org_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Org Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Organization"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Organizations"],"summary":"Update Organization","description":"Update organization (Super Admin only)","operationId":"update_organization_api_v1_organizations__org_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Org Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Organization"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Organizations"],"summary":"Delete Organization","description":"Delete organization (Super Admin only)\nSoft delete - organization is marked as deleted but data is preserved","operationId":"delete_organization_api_v1_organizations__org_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Org Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/organizations/{org_id}/stats":{"get":{"tags":["Organizations"],"summary":"Get Organization Stats","description":"Get organization statistics (Super Admin only)","operationId":"get_organization_stats_api_v1_organizations__org_id__stats_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Org Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Organization Stats Api V1 Organizations  Org Id  Stats Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/organizations/me/settings":{"put":{"tags":["Organizations"],"summary":"Update My Organization Settings","description":"Update current user's organization settings\n\n**Description:** Updates organization-wide settings like timezone, language, features, and notifications.\n\n**Request Body (all optional):**\n- `timezone` (string): Timezone for organization (e.g., \"America/Sao_Paulo\")\n- `language` (string): Default language (e.g., \"pt-BR\", \"en-US\")\n- `features` (object): Feature toggles and configuration\n- `notifications` (object): Notification settings\n\n**Returns:** Updated Organization object\n\n**Permissions Required:** org_admin or super_admin role\n\n**Possible Errors:**\n- `400`: Invalid settings data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Organization not found\n- `500`: Database error","operationId":"update_my_organization_settings_api_v1_organizations_me_settings_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationSettingsUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Organization"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/organizations/{org_id}/plan":{"put":{"tags":["Organizations"],"summary":"Update Organization Plan","description":"Update organization plan (Super Admin only)","operationId":"update_organization_plan_api_v1_organizations__org_id__plan_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Org Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganizationPlanUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Organization"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/organizations/{org_id}/activate":{"post":{"tags":["Organizations"],"summary":"Activate Organization","description":"Activate organization\n\n**Description:** Enables a previously deactivated organization and restores access for all users.\n\n**Path Parameters:**\n- `org_id` (UUID, required): Unique organization identifier\n\n**Returns:** Activated Organization object\n\n**Permissions Required:** super_admin role only\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `403`: Insufficient permissions (must be super_admin)\n- `404`: Organization not found\n- `409`: Organization already active\n- `500`: Database error","operationId":"activate_organization_api_v1_organizations__org_id__activate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Org Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Organization"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/organizations/{org_id}/deactivate":{"post":{"tags":["Organizations"],"summary":"Deactivate Organization","description":"Deactivate organization\n\n**Description:** Disables an organization, restricting access for all users while preserving data.\n\n**Path Parameters:**\n- `org_id` (UUID, required): Unique organization identifier\n\n**Returns:** Deactivated Organization object\n\n**Permissions Required:** super_admin role only\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `403`: Insufficient permissions (must be super_admin)\n- `404`: Organization not found\n- `409`: Organization already inactive\n- `500`: Database error","operationId":"deactivate_organization_api_v1_organizations__org_id__deactivate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Org Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Organization"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/":{"get":{"tags":["Users"],"summary":"List Users","description":"List users in organization\n\n**Description:** Retrieves a paginated list of users with optional filtering by role or active status.\n\n**Query Parameters:**\n- `skip` (int, default: 0): Offset for pagination\n- `limit` (int, default: 100, max: 100): Records per page\n- `role` (string, optional): Filter by role (org_admin, agent, viewer)\n- `is_active` (boolean, optional): Filter by active status\n\n**Returns:** Array of User objects\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `500`: Database error","operationId":"list_users_api_v1_users__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":100,"title":"Limit"}},{"name":"role","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(org_admin|agent|viewer)$"},{"type":"null"}],"title":"Role"}},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"},"title":"Response List Users Api V1 Users  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Users"],"summary":"Create User","description":"Create new user in organization\n\n**Description:** Creates a new user account with specified role and permissions. Sends invitation email to activate account.\n\n**Request Body:**\n- `email` (string, required): User email address\n- `full_name` (string, required): User full name\n- `role` (string, required): User role (org_admin, agent, viewer)\n- `is_active` (boolean, default: true): Active status\n\n**Returns:** Created User object\n\n**Permissions Required:** org_admin or super_admin role\n\n**Possible Errors:**\n- `400`: Invalid user data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `409`: Email already exists\n- `500`: Database or email error","operationId":"create_user_api_v1_users__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/me":{"get":{"tags":["Users"],"summary":"Get Current User Profile","description":"Get current user profile\n\n**Description:** Retrieves the authenticated user's profile information.\n\n**Returns:** Current User object with all profile details\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated","operationId":"get_current_user_profile_api_v1_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"HTTPBearer":[]}]},"put":{"tags":["Users"],"summary":"Update My Profile","description":"Update current user profile\nNote: Cannot change own role","operationId":"update_my_profile_api_v1_users_me_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/users/me/stats":{"get":{"tags":["Users"],"summary":"Get My Stats","description":"Get current user statistics","operationId":"get_my_stats_api_v1_users_me_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get My Stats Api V1 Users Me Stats Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/users/{user_id}":{"get":{"tags":["Users"],"summary":"Get User","description":"Get user by ID\n\n**Description:** Retrieves a user's profile information and details.\n\n**Path Parameters:**\n- `user_id` (UUID, required): Unique user identifier\n\n**Returns:** User object\n\n**Permissions Required:** Any authenticated user (can only view own organization users)\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: User not found\n- `500`: Database error","operationId":"get_user_api_v1_users__user_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Users"],"summary":"Update User","description":"Update user\n\n**Description:** Updates user information including name, email, and role assignment.\n\n**Path Parameters:**\n- `user_id` (UUID, required): Unique user identifier\n\n**Request Body (all optional):**\n- `full_name` (string): New full name\n- `email` (string): New email address\n- `role` (string): New role assignment (org_admin, agent, viewer)\n- `is_active` (boolean): Active status\n\n**Returns:** Updated User object\n\n**Permissions Required:** org_admin or super_admin role\n\n**Possible Errors:**\n- `400`: Invalid update data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: User not found\n- `409`: Email already in use\n- `500`: Database error","operationId":"update_user_api_v1_users__user_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Users"],"summary":"Delete User","description":"Delete user (soft delete)\n\n**Description:** Marks a user account as deleted. Data is retained for audit and compliance purposes.\n\n**Path Parameters:**\n- `user_id` (UUID, required): Unique user identifier\n\n**Returns:** 204 No Content on success\n\n**Permissions Required:** org_admin or super_admin role\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: User not found\n- `409`: Cannot delete own account or last admin\n- `500`: Database error","operationId":"delete_user_api_v1_users__user_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}/stats":{"get":{"tags":["Users"],"summary":"Get User Stats","description":"Get user statistics","operationId":"get_user_stats_api_v1_users__user_id__stats_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get User Stats Api V1 Users  User Id  Stats Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}/activate":{"post":{"tags":["Users"],"summary":"Activate User","description":"Activate user\nRequires: org_admin or super_admin role","operationId":"activate_user_api_v1_users__user_id__activate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}/deactivate":{"post":{"tags":["Users"],"summary":"Deactivate User","description":"Deactivate user\nRequires: org_admin or super_admin role","operationId":"deactivate_user_api_v1_users__user_id__deactivate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/contacts/stats":{"get":{"tags":["Contacts"],"summary":"Get Organization Stats","description":"Get organization-wide contact statistics\n\n**Description:** Returns aggregated contact metrics for the entire organization\nincluding total contacts, active contacts, blocked contacts, and VIP count.\n\n**Returns:** Dictionary with organization contact statistics\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `500`: Database error","operationId":"get_organization_stats_api_v1_contacts_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Organization Stats Api V1 Contacts Stats Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/contacts/":{"get":{"tags":["Contacts"],"summary":"List Contacts","description":"List all contacts in organization with filtering and pagination\n\n**Description:** Retrieves a paginated list of contacts with optional filtering by search query, assigned agent, or blocked status.\n\n**Query Parameters:**\n- `skip` (int, default: 0): Offset for pagination\n- `limit` (int, default: 100, max: 100): Records per page\n- `query` (string, optional): Search contacts by name, email, phone, or company\n- `assigned_agent_id` (UUID, optional): Filter by assigned agent\n- `is_blocked` (boolean, optional): Filter by blocked status\n\n**Returns:** Array of Contact objects with pagination headers\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `500`: Database error","operationId":"list_contacts_api_v1_contacts__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":100,"title":"Limit"}},{"name":"query","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search query (name, email, phone, company)","title":"Query"},"description":"Search query (name, email, phone, company)"},{"name":"assigned_agent_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Assigned Agent Id"}},{"name":"is_blocked","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Blocked"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Contact"},"title":"Response List Contacts Api V1 Contacts  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Contacts"],"summary":"Create Contact","description":"Create a new contact in the organization\n\n**Description:** Creates a new contact with basic information.\n\n**Request Body:**\n- `phone_number` (string, required): Contact phone number\n- `name` (string, optional): Contact full name\n- `email` (string, optional): Contact email address\n- `company` (string, optional): Contact company name\n- `custom_fields` (object, optional): Additional custom data\n\n**Returns:** Created Contact object with generated ID\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `400`: Invalid contact data\n- `401`: User not authenticated\n- `409`: Contact already exists (duplicate phone/email)\n- `500`: Database error","operationId":"create_contact_api_v1_contacts__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/contacts/{contact_id}":{"get":{"tags":["Contacts"],"summary":"Get Contact","description":"Get contact details by ID\n\n**Description:** Retrieves a single contact with all its information including tags and custom fields.\n\n**Path Parameters:**\n- `contact_id` (UUID, required): Unique contact identifier\n\n**Returns:** Contact object\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Contact not found\n- `500`: Database error","operationId":"get_contact_api_v1_contacts__contact_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Contacts"],"summary":"Update Contact","description":"Update contact information\n\n**Description:** Updates contact name, email, company, custom fields, or other properties.\n\n**Path Parameters:**\n- `contact_id` (UUID, required): Unique contact identifier\n\n**Request Body (all optional):**\n- `phone_number` (string): Updated phone\n- `name` (string): Updated name\n- `email` (string): Updated email\n- `company` (string): Updated company\n- `custom_fields` (object): Updated custom data\n\n**Returns:** Updated Contact object\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `400`: Invalid update data\n- `401`: User not authenticated\n- `404`: Contact not found\n- `500`: Database error","operationId":"update_contact_api_v1_contacts__contact_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Contact Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Contacts"],"summary":"Delete Contact","description":"Delete contact (soft delete - data is archived not removed)\n\n**Description:** Marks a contact as deleted. The data is retained in archive for compliance and audit purposes.\nData is not physically removed from the database.\n\n**Path Parameters:**\n- `contact_id` (UUID, required): Unique contact identifier\n\n**Returns:** 204 No Content on success\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Contact not found\n- `500`: Database error","operationId":"delete_contact_api_v1_contacts__contact_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Contact Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/contacts/{contact_id}/stats":{"get":{"tags":["Contacts"],"summary":"Get Contact Stats","description":"Get contact statistics and interaction metrics\n\n**Description:** Returns detailed statistics for a specific contact including total conversations, \nmessages sent/received, last interaction, and interaction history.\n\n**Path Parameters:**\n- `contact_id` (UUID, required): Unique contact identifier\n\n**Returns:** Dictionary with contact metrics\n\n**Response Example:**\n```json\n{\n  \"total_conversations\": 5,\n  \"total_messages_sent\": 23,\n  \"total_messages_received\": 18,\n  \"last_interaction\": \"2024-11-20T15:30:00Z\",\n  \"average_response_time\": \"2 minutes\"\n}\n```\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Contact not found\n- `500`: Database error","operationId":"get_contact_stats_api_v1_contacts__contact_id__stats_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Contact Stats Api V1 Contacts  Contact Id  Stats Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/contacts/{contact_id}/block":{"post":{"tags":["Contacts"],"summary":"Block Contact","description":"Block a contact from sending/receiving messages\n\n**Description:** Marks a contact as blocked. Blocked contacts cannot initiate conversations \nor receive messages.\n\n**Path Parameters:**\n- `contact_id` (UUID, required): Unique contact identifier\n\n**Query Parameters:**\n- `reason` (string, optional): Reason for blocking (e.g., \"Spam\", \"Abusive behavior\", \"Account closed\")\n\n**Returns:** Updated Contact object with is_blocked=true\n\n**Response Example:**\n```json\n{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"phone_number\": \"+5511999999999\",\n  \"name\": \"Jo√£o Silva\",\n  \"is_blocked\": true,\n  \"blocked_reason\": \"Spam\"\n}\n```\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Contact not found\n- `500`: Database error","operationId":"block_contact_api_v1_contacts__contact_id__block_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Contact Id"}},{"name":"reason","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional reason for blocking this contact","title":"Reason"},"description":"Optional reason for blocking this contact"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/contacts/{contact_id}/unblock":{"post":{"tags":["Contacts"],"summary":"Unblock Contact","description":"Unblock a contact\n\n**Description:** Removes block status from a contact. A blocked contact can now send messages and \nreceive communications again.\n\n**Path Parameters:**\n- `contact_id` (UUID, required): Unique contact identifier\n\n**Returns:** Updated Contact object with is_blocked=false\n\n**Response Example:**\n```json\n{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"phone_number\": \"+5511999999999\",\n  \"name\": \"Jo√£o Silva\",\n  \"is_blocked\": false,\n  \"blocked_reason\": null\n}\n```\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Contact not found\n- `500`: Database error","operationId":"unblock_contact_api_v1_contacts__contact_id__unblock_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/contacts/{contact_id}/vip":{"post":{"tags":["Contacts"],"summary":"Mark As Vip","description":"Mark a contact as VIP (priority customer)\n\n**Description:** Sets VIP flag for a contact. VIP contacts receive priority support and are \nrouted to senior agents for handling.\n\n**Path Parameters:**\n- `contact_id` (UUID, required): Unique contact identifier\n\n**Returns:** Updated Contact object with is_vip=true\n\n**Response Example:**\n```json\n{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"phone_number\": \"+5511999999999\",\n  \"name\": \"Jo√£o Silva\",\n  \"is_vip\": true,\n  \"vip_level\": \"premium\"\n}\n```\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Contact not found\n- `500`: Database error","operationId":"mark_as_vip_api_v1_contacts__contact_id__vip_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Contacts"],"summary":"Unmark As Vip","description":"Remove VIP status from a contact\n\n**Description:** Removes VIP flag from a contact. Contact returns to normal priority routing \nand support queue.\n\n**Path Parameters:**\n- `contact_id` (UUID, required): Unique contact identifier\n\n**Returns:** Updated Contact object with is_vip=false\n\n**Response Example:**\n```json\n{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"phone_number\": \"+5511999999999\",\n  \"name\": \"Jo√£o Silva\",\n  \"is_vip\": false,\n  \"vip_level\": null\n}\n```\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Contact not found\n- `500`: Database error","operationId":"unmark_as_vip_api_v1_contacts__contact_id__vip_delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Contact Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/contacts/{contact_id}/tags":{"put":{"tags":["Contacts"],"summary":"Update Contact Tags","description":"Update contact tags (replaces all tags with the provided list)\nAccepts tag names as strings - creates tags if they don't exist","operationId":"update_contact_tags_api_v1_contacts__contact_id__tags_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Contact Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"type":"string"},"title":"Tag Names"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Contacts"],"summary":"Add Contact Tags","description":"Add tags to contact (by UUID)","operationId":"add_contact_tags_api_v1_contacts__contact_id__tags_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Contact Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"type":"string","format":"uuid"},"title":"Tag Ids"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Contacts"],"summary":"Remove Contact Tags","description":"Remove tags from contact","operationId":"remove_contact_tags_api_v1_contacts__contact_id__tags_delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"contact_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Contact Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"type":"string","format":"uuid"},"title":"Tag Ids"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/contacts/tags/":{"get":{"tags":["Contacts"],"summary":"List Tags","description":"List all tags","operationId":"list_tags_api_v1_contacts_tags__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Tag"},"type":"array","title":"Response List Tags Api V1 Contacts Tags  Get"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Contacts"],"summary":"Create Tag","description":"Create new tag","operationId":"create_tag_api_v1_contacts_tags__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TagCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tag"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/contacts/tags/{tag_id}":{"get":{"tags":["Contacts"],"summary":"Get Tag","description":"Get tag by ID","operationId":"get_tag_api_v1_contacts_tags__tag_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tag_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Tag Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tag"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Contacts"],"summary":"Update Tag","description":"Update tag","operationId":"update_tag_api_v1_contacts_tags__tag_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tag_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Tag Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TagUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tag"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Contacts"],"summary":"Delete Tag","description":"Delete tag","operationId":"delete_tag_api_v1_contacts_tags__tag_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tag_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Tag Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/":{"get":{"tags":["Conversations"],"summary":"List Conversations","description":"List all conversations with filtering and pagination\n\n**Query Parameters:**\n- `active_chatbot_id` (UUID, opcional): Filtrar por chatbot ativo\n- `skip` (int, default: 0): Offset para pagina√ß√£o\n- `limit` (int, default: 100, max: 100): N√∫mero de registros por p√°gina\n- `status` (string, opcional): Filtrar por status (open|pending|resolved|closed)\n- `assigned_to_me` (boolean, default: false): Mostrar apenas minhas conversas\n- `department_id` (UUID, opcional): Filtrar por departamento\n- `queue_id` (UUID, opcional): Filtrar por fila\n\n**Returns:** Array de conversas com pagina√ß√£o\n\n**Example Response:**\n```json\n[\n  {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"contact_id\": \"650e8400-e29b-41d4-a716-446655440001\",\n    \"status\": \"open\",\n    \"assigned_agent_id\": \"750e8400-e29b-41d4-a716-446655440002\",\n    \"created_at\": \"2025-12-08T10:00:00Z\",\n    \"updated_at\": \"2025-12-08T21:00:00Z\"\n  }\n]\n```\n\n**Headers:**\n- `X-Total-Count`: Total de registros\n- `X-Page`: P√°gina atual\n- `X-Per-Page`: Registros por p√°gina","operationId":"list_conversations_api_v1_conversations__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"active_chatbot_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filtrar por ID do chatbot ativo","title":"Active Chatbot Id"},"description":"Filtrar por ID do chatbot ativo"},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"N√∫mero de registros para pular (pagina√ß√£o)","default":0,"title":"Skip"},"description":"N√∫mero de registros para pular (pagina√ß√£o)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Quantidade m√°xima de registros retornados","default":100,"title":"Limit"},"description":"Quantidade m√°xima de registros retornados"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(open|pending|resolved|closed)$"},{"type":"null"}],"description":"Filtrar por status: 'open', 'pending', 'resolved' ou 'closed'","title":"Status"},"description":"Filtrar por status: 'open', 'pending', 'resolved' ou 'closed'"},{"name":"assigned_to_me","in":"query","required":false,"schema":{"type":"boolean","description":"Se true, retorna apenas conversas atribu√≠das ao usu√°rio atual","default":false,"title":"Assigned To Me"},"description":"Se true, retorna apenas conversas atribu√≠das ao usu√°rio atual"},{"name":"department_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filtrar por ID do departamento","title":"Department Id"},"description":"Filtrar por ID do departamento"},{"name":"queue_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filtrar por ID da fila","title":"Queue Id"},"description":"Filtrar por ID da fila"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Conversation"},"title":"Response List Conversations Api V1 Conversations  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Conversations"],"summary":"Create Conversation","description":"Create new conversation\n\n**Description:** Initiates a new conversation with a contact. Can be created from incoming WhatsApp messages or manually for outbound communication.\n\n**Request Body:**\n- `contact_id` (UUID, required): Target contact identifier\n- `initial_message` (string, optional): First message to send\n- `department_id` (UUID, optional): Assign to specific department\n- `queue_id` (UUID, optional): Assign to specific queue\n\n**Returns:** Created Conversation object with status 'open'\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `400`: Invalid conversation data\n- `401`: User not authenticated\n- `404`: Contact not found\n- `500`: Database error","operationId":"create_conversation_api_v1_conversations__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/available-agents":{"get":{"tags":["Conversations"],"summary":"List Available Agents","description":"List available agents in a department with remaining capacity\n\n**Query Parameters:**\n- `department_id` (UUID, required): ID do departamento\n\n**Returns:** Array of available agents with capacity information\n\n**Example Response:**\n```json\n[\n  {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"full_name\": \"Jo√£o Agent\",\n    \"email\": \"joao@example.com\",\n    \"department_id\": \"650e8400-e29b-41d4-a716-446655440001\",\n    \"agent_status\": \"available\",\n    \"active_conversations_count\": 5,\n    \"capacity_remaining\": 5\n  }\n]\n```\n\n**Responses:**\n- `200`: Lista de agentes dispon√≠veis\n- `403`: Sem permiss√£o para visualizar agentes\n- `404`: Departamento n√£o encontrado","operationId":"list_available_agents_api_v1_conversations_available_agents_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"department_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","description":"Department ID to list agents from","title":"Department Id"},"description":"Department ID to list agents from"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AgentAvailable"},"title":"Response List Available Agents Api V1 Conversations Available Agents Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/metrics":{"get":{"tags":["Conversations"],"summary":"Get Conversations Metrics","description":"Return aggregated conversation metrics for admin dashboards (tolerant parser)","operationId":"get_conversations_metrics_api_v1_conversations_metrics_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"department_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by department","title":"Department Id"},"description":"Filter by department"},{"name":"queue_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by queue","title":"Queue Id"},"description":"Filter by queue"},{"name":"since","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"ISO datetime to filter recent conversations","title":"Since"},"description":"ISO datetime to filter recent conversations"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}":{"get":{"tags":["Conversations"],"summary":"Get Conversation","description":"Get conversation by ID\n\n**Description:** Retrieves complete conversation details including messages, history, and current status.\n\n**Path Parameters:**\n- `conversation_id` (UUID, required): Unique conversation identifier\n\n**Returns:** Conversation object with full details\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Conversation not found\n- `500`: Database error","operationId":"get_conversation_api_v1_conversations__conversation_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Conversations"],"summary":"Update Conversation","description":"Update conversation\n\n**Description:** Updates conversation metadata and notes without changing status or assignment.\n\n**Path Parameters:**\n- `conversation_id` (UUID, required): Unique conversation identifier\n\n**Request Body (all optional):**\n- `notes` (string): Internal notes about conversation\n- `tags` (array): Tags for organizing conversations\n\n**Returns:** Updated Conversation object\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `400`: Invalid update data\n- `401`: User not authenticated\n- `404`: Conversation not found\n- `500`: Database error","operationId":"update_conversation_api_v1_conversations__conversation_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/messages":{"get":{"tags":["Conversations"],"summary":"Get Conversation Messages","description":"Get messages for a conversation","operationId":"get_conversation_messages_api_v1_conversations__conversation_id__messages_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MessageResponse"},"title":"Response Get Conversation Messages Api V1 Conversations  Conversation Id  Messages Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Conversations"],"summary":"Send Message","description":"Send a message via WhatsApp\n\nValidates 24-hour window and sends via Meta Cloud API","operationId":"send_message_api_v1_conversations__conversation_id__messages_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageSendRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/read":{"post":{"tags":["Conversations"],"summary":"Mark Conversation As Read","description":"Mark conversation as read","operationId":"mark_conversation_as_read_api_v1_conversations__conversation_id__read_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/assign":{"post":{"tags":["Conversations"],"summary":"Assign Conversation","description":"Assign conversation to a specific agent\n\n**Description:** Assigns an unassigned conversation to an agent and changes status to 'active'. If conversation was queued, removes from queue.\n\n**Path Parameters:**\n- `conversation_id` (UUID, required): Unique conversation identifier\n\n**Request Body:**\n- `agent_id` (UUID, required): Target agent identifier\n\n**Returns:** Updated Conversation with new assignment\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `400`: Invalid agent ID\n- `401`: User not authenticated\n- `404`: Conversation or agent not found\n- `409`: Conversation already assigned\n- `500`: Database error","operationId":"assign_conversation_api_v1_conversations__conversation_id__assign_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationAssign"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/transfer":{"post":{"tags":["Conversations"],"summary":"Transfer Conversation","description":"Transfer conversation to a department\n\nUnassigns current agent, changes status to 'queued',\nand sets the new department. Stores transfer history.","operationId":"transfer_conversation_api_v1_conversations__conversation_id__transfer_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationTransfer"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/transfer-to-agent":{"post":{"tags":["Conversations"],"summary":"Transfer To Agent","description":"Transfer conversation directly to a specific agent\n\nValidates agent is active, belongs to conversation's department,\nand hasn't reached maximum capacity. Stores transfer history.\n\n**Validations:**\n- Agent must be active\n- Agent must be in 'available' status or None\n- Agent must belong to conversation's department\n- Agent capacity must not be exceeded\n\n**Returns:** Updated conversation with new agent assignment","operationId":"transfer_to_agent_api_v1_conversations__conversation_id__transfer_to_agent_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationTransferToAgent"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/close":{"post":{"tags":["Conversations"],"summary":"Close Conversation","description":"Close a conversation\n\n**Description:** Closes an active conversation, records close timestamp and reason. Can optionally mark as resolved.\n\n**Path Parameters:**\n- `conversation_id` (UUID, required): Unique conversation identifier\n\n**Request Body:**\n- `reason` (string, optional): Reason for closing (e.g., \"Resolved\", \"Not interested\", \"Spam\")\n- `resolved` (boolean, default: true): Whether issue was resolved\n\n**Returns:** Closed Conversation with status='closed'\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `400`: Invalid close data\n- `401`: User not authenticated\n- `404`: Conversation not found\n- `409`: Conversation already closed\n- `500`: Database error","operationId":"close_conversation_api_v1_conversations__conversation_id__close_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationClose"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/sla-alerts":{"get":{"tags":["Conversations"],"summary":"Get Sla Alerts","description":"List conversations that are nearing or exceeding SLA.\n\n- severity 'critical': progress >= 1.0 (over SLA)\n- severity 'warning': progress >= nearing_threshold","operationId":"get_sla_alerts_api_v1_conversations_sla_alerts_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":100,"title":"Limit"}},{"name":"department_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filter by department","title":"Department Id"},"description":"Filter by department"},{"name":"queue_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filter by queue","title":"Queue Id"},"description":"Filter by queue"},{"name":"nearing_threshold","in":"query","required":false,"schema":{"type":"number","maximum":1.0,"minimum":0.1,"description":"Threshold for 'warning' progress","default":0.8,"title":"Nearing Threshold"},"description":"Threshold for 'warning' progress"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SlaAlert"},"title":"Response Get Sla Alerts Api V1 Conversations Sla Alerts Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/window-status":{"get":{"tags":["Conversations"],"summary":"Get Window Status","description":"Get 24-hour conversation window status for Meta WhatsApp API.\n\nReturns detailed information about the conversation's message window:\n- Whether the 24-hour window is currently open\n- When the window expires\n- Time remaining in the window\n- Last message timestamps\n\n**Meta WhatsApp Policy:**\n- Free messages can only be sent within 24 hours of last customer message\n- Outside the 24-hour window, must use template messages\n- Template messages reset the window\n\n**Permissions Required:** User must have access to the organization\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Conversation not found\n- `500`: Database error","operationId":"get_window_status_api_v1_conversations__conversation_id__window_status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/queue/":{"get":{"tags":["Queue"],"summary":"Get Queue","description":"Get conversations in queue\n\nReturns list of conversations waiting to be assigned to an agent,\nordered by priority (high to low) and time in queue (oldest first).\n\n**Filters:**\n- department_id: Filter by department\n- queue_id: Filter by specific queue","operationId":"get_queue_api_v1_queue__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":100,"title":"Limit"}},{"name":"department_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filter by department","title":"Department Id"},"description":"Filter by department"},{"name":"queue_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filter by queue","title":"Queue Id"},"description":"Filter by queue"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Conversation"},"title":"Response Get Queue Api V1 Queue  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/queue/pull":{"post":{"tags":["Queue"],"summary":"Pull From Queue","description":"Pull next conversation from queue\n\nRetrieves the next conversation from the queue based on priority\nand time waiting, then assigns it to the current agent.\n\n**Filters:**\n- department_id: Pull from specific department\n- queue_id: Pull from specific queue\n\nReturns the assigned conversation or 404 if queue is empty.","operationId":"pull_from_queue_api_v1_queue_pull_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"department_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filter by department","title":"Department Id"},"description":"Filter by department"},{"name":"queue_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filter by queue","title":"Queue Id"},"description":"Filter by queue"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/queues/":{"post":{"tags":["Queues"],"summary":"Create Queue","description":"Create a new queue\n\n**Description:** Creates a new conversation queue for organizing conversations by department or priority.\n\n**Request Body:**\n- `name` (string, required): Queue name (e.g., \"Support Tier 1\", \"High Priority\")\n- `slug` (string, required): Unique URL-friendly identifier\n- `description` (string, optional): Queue description\n- `department_id` (UUID, optional): Associated department\n- `priority` (integer, optional): Queue priority for routing\n\n**Returns:** Created Queue object\n\n**Permissions Required:** org_admin role\n\n**Possible Errors:**\n- `400`: Invalid queue data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `409`: Queue slug already exists\n- `500`: Database error","operationId":"create_queue_api_v1_queues__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueueCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Queue"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Queues"],"summary":"List Queues","description":"List queues\n\n**Description:** Retrieves a paginated list of queues with optional filtering by department, active status, or search term.\n\n**Query Parameters:**\n- `department_id` (UUID, optional): Filter by department\n- `is_active` (boolean, optional): Filter by active status\n- `search` (string, optional): Search in name, slug, or description\n- `skip` (int, default: 0): Offset for pagination\n- `limit` (int, default: 100, max: 100): Records per page\n\n**Returns:** Array of Queue objects\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `500`: Database error","operationId":"list_queues_api_v1_queues__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"department_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filter by department","title":"Department Id"},"description":"Filter by department"},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by active status","title":"Is Active"},"description":"Filter by active status"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search in name/slug/description","title":"Search"},"description":"Search in name/slug/description"},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Queue"},"title":"Response List Queues Api V1 Queues  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/queues/{queue_id}":{"get":{"tags":["Queues"],"summary":"Get Queue","description":"Get queue by ID\n\n**Description:** Retrieves full queue details including department association, metrics, and configuration.\n\n**Path Parameters:**\n- `queue_id` (UUID, required): Unique queue identifier\n\n**Returns:** Queue object\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Queue not found\n- `500`: Database error","operationId":"get_queue_api_v1_queues__queue_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"queue_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Queue Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Queue"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Queues"],"summary":"Update Queue","description":"Update queue\n\n**Description:** Updates queue configuration including name, description, department, and active status.\n\n**Path Parameters:**\n- `queue_id` (UUID, required): Unique queue identifier\n\n**Request Body (all optional):**\n- `name` (string): New queue name\n- `slug` (string): Updated slug\n- `description` (string): Updated description\n- `department_id` (UUID): New department association\n- `is_active` (boolean): Active status\n\n**Returns:** Updated Queue object\n\n**Permissions Required:** org_admin role\n\n**Possible Errors:**\n- `400`: Invalid update data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Queue not found\n- `409`: Slug already in use\n- `500`: Database error","operationId":"update_queue_api_v1_queues__queue_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"queue_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Queue Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueueUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Queue"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Queues"],"summary":"Delete Queue","description":"Delete queue (soft delete)\n\n**Description:** Marks queue as deleted. Data is retained for audit purposes.\n\n**Path Parameters:**\n- `queue_id` (UUID, required): Unique queue identifier\n\n**Returns:** 204 No Content on success\n\n**Permissions Required:** org_admin role\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Queue not found\n- `409`: Cannot delete queue with active conversations\n- `500`: Database error","operationId":"delete_queue_api_v1_queues__queue_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"queue_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Queue Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/queues/bulk-delete":{"post":{"tags":["Queues"],"summary":"Bulk Delete Queues","description":"Bulk delete queues\n\n**Permissions:** org_admin only","operationId":"bulk_delete_queues_api_v1_queues_bulk_delete_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueueBulkDelete"}}},"required":true},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/queues/by-slug/{slug}":{"get":{"tags":["Queues"],"summary":"Get Queue By Slug","description":"Get queue by slug","operationId":"get_queue_by_slug_api_v1_queues_by_slug__slug__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"slug","in":"path","required":true,"schema":{"type":"string","title":"Slug"}},{"name":"department_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filter by department","title":"Department Id"},"description":"Filter by department"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Queue"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/queues/{queue_id}/metrics":{"get":{"tags":["Queues"],"summary":"Get Queue Metrics","description":"Get detailed metrics for a queue\n\n**Metrics included:**\n- Volume metrics (total, today, last 7/30 days)\n- Current status (queued, active)\n- Time metrics (wait, response, resolution times)\n- SLA compliance and violations\n- Resolution rate\n- Volume distribution by hour (last 24h)\n\n**Parameters:**\n- days: Number of days to calculate metrics (default: 30, max: 90)","operationId":"get_queue_metrics_api_v1_queues__queue_id__metrics_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"queue_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Queue Id"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":1,"description":"Number of days for metrics","default":30,"title":"Days"},"description":"Number of days for metrics"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/departments/":{"get":{"tags":["Departments"],"summary":"List Departments","description":"List all departments for the organization\n\n**Description:** Retrieves a paginated list of departments with optional filtering by active status.\n\n**Query Parameters:**\n- `is_active` (boolean, optional): Filter by active/inactive status\n- `skip` (int, default: 0): Offset for pagination\n- `limit` (int, default: 100, max: 100): Records per page\n\n**Returns:** Array of Department objects\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `500`: Database error","operationId":"list_departments_api_v1_departments__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by active status","title":"Is Active"},"description":"Filter by active status"},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Department"},"title":"Response List Departments Api V1 Departments  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Departments"],"summary":"Create Department","description":"Create a new department\n\n**Description:** Creates a new department in the organization for organizing agents and conversations.\n\n**Request Body:**\n- `name` (string, required): Department name (e.g., \"Support\", \"Sales\", \"Billing\")\n- `description` (string, optional): Department description\n- `is_active` (boolean, default: true): Whether department is active\n\n**Returns:** Created Department object with generated ID\n\n**Permissions Required:** org_admin role\n\n**Possible Errors:**\n- `400`: Invalid department data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `409`: Department name already exists\n- `500`: Database error","operationId":"create_department_api_v1_departments__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepartmentCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Department"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/departments/active":{"get":{"tags":["Departments"],"summary":"List Active Departments","description":"Get only active departments (shortcut endpoint)","operationId":"list_active_departments_api_v1_departments_active_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Department"},"type":"array","title":"Response List Active Departments Api V1 Departments Active Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/departments/stats":{"get":{"tags":["Departments"],"summary":"Get Organization Stats","description":"Get organization-wide department statistics","operationId":"get_organization_stats_api_v1_departments_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Organization Stats Api V1 Departments Stats Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/departments/{department_id}":{"get":{"tags":["Departments"],"summary":"Get Department","description":"Get department by ID\n\n**Description:** Retrieves full department details including agents and statistics.\n\n**Path Parameters:**\n- `department_id` (UUID, required): Unique department identifier\n\n**Returns:** Department object\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Department not found\n- `500`: Database error","operationId":"get_department_api_v1_departments__department_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"department_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Department Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Department"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Departments"],"summary":"Update Department","description":"Update department\n\n**Description:** Updates department configuration like name, description, and active status.\n\n**Path Parameters:**\n- `department_id` (UUID, required): Unique department identifier\n\n**Request Body (all optional):**\n- `name` (string): New department name\n- `description` (string): Updated description\n- `is_active` (boolean): Active status\n\n**Returns:** Updated Department object\n\n**Permissions Required:** org_admin role\n\n**Possible Errors:**\n- `400`: Invalid update data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Department not found\n- `409`: Duplicate department name\n- `500`: Database error","operationId":"update_department_api_v1_departments__department_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"department_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Department Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepartmentUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Department"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Departments"],"summary":"Delete Department","description":"Delete department (soft delete)\n\n**Description:** Marks department as deleted. Data is retained for audit purposes.\n\n**Path Parameters:**\n- `department_id` (UUID, required): Unique department identifier\n\n**Returns:** 204 No Content on success\n\n**Permissions Required:** org_admin role\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Department not found\n- `409`: Cannot delete department with active agents\n- `500`: Database error","operationId":"delete_department_api_v1_departments__department_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"department_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Department Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/departments/{department_id}/agents/{agent_id}":{"post":{"tags":["Departments"],"summary":"Add Agent To Department","description":"Add agent to department\n\n**Description:** Assigns an agent to a department. Agent can be part of multiple departments.\n\n**Path Parameters:**\n- `department_id` (UUID, required): Unique department identifier\n- `agent_id` (UUID, required): Unique agent identifier\n\n**Returns:** Updated Department object with agents list\n\n**Permissions Required:** org_admin role\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Department or agent not found\n- `409`: Agent already in department\n- `500`: Database error","operationId":"add_agent_to_department_api_v1_departments__department_id__agents__agent_id__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"department_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Department Id"}},{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Department"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Departments"],"summary":"Remove Agent From Department","description":"Remove agent from department\n\nOnly admins can manage department agents.","operationId":"remove_agent_from_department_api_v1_departments__department_id__agents__agent_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"department_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Department Id"}},{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Department"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/departments/{department_id}/agents":{"get":{"tags":["Departments"],"summary":"List Department Agents","description":"List agents in a department with capacity information\n\n**Path Parameters:**\n- `department_id` (UUID): Department ID\n\n**Query Parameters:**\n- `status` (string, optional): Filter by status (available|busy|away|offline)\n- `include_inactive` (boolean, default: false): Include inactive agents\n\n**Returns:** Array of AgentAvailable with capacity metrics\n\n**Example Response:**\n```json\n[\n  {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"full_name\": \"Jo√£o Agent\",\n    \"email\": \"joao@example.com\",\n    \"department_id\": \"650e8400-e29b-41d4-a716-446655440001\",\n    \"agent_status\": \"available\",\n    \"active_conversations_count\": 5,\n    \"capacity_remaining\": 5\n  }\n]\n```\n\n**Responses:**\n- `200`: Lista de agentes do departamento\n- `404`: Departamento n√£o encontrado\n- `403`: Sem permiss√£o para visualizar departamento","operationId":"list_department_agents_api_v1_departments__department_id__agents_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"department_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Department Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(available|busy|away|offline)$"},{"type":"null"}],"description":"Filter by agent status","title":"Status"},"description":"Filter by agent status"},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","description":"Include inactive agents","default":false,"title":"Include Inactive"},"description":"Include inactive agents"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AgentAvailable"},"title":"Response List Department Agents Api V1 Departments  Department Id  Agents Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/":{"get":{"tags":["WhatsApp"],"summary":"List Whatsapp Numbers","description":"List all WhatsApp numbers registered for the organization.\n\nReturns all WhatsApp Business Account numbers with connection status,\nconfiguration details, and webhook URLs.\n\n**Path Parameters:** None\n\n**Query Parameters:** None\n\n**Returns:** Array of WhatsApp numbers:\n- id (str): Number UUID\n- phone_number (str): Phone number with country code (e.g., '5585987654321')\n- display_name (str): User-friendly name\n- connection_type (str): 'official' (Meta Cloud API) or 'qrcode' (Evolution API)\n- status (str): 'connected', 'disconnected', 'pending'\n- verified (bool): Number verified with Meta\n- webhook_url (str): Webhook URL for receiving messages\n- created_at (datetime): Registration date\n- last_connected (datetime, optional): Last connection timestamp\n\n**Example Request:**\n```\nGET /api/v1/whatsapp/\nAuthorization: Bearer eyJhbGc...\n```\n\n**Example Response:**\n```json\n[\n    {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"phone_number\": \"5585987654321\",\n        \"display_name\": \"Meu WhatsApp Business\",\n        \"connection_type\": \"official\",\n        \"status\": \"connected\",\n        \"verified\": true,\n        \"webhook_url\": \"https://seu-dominio.com/whatsapp/webhook\",\n        \"created_at\": \"2025-01-01T10:00:00Z\",\n        \"last_connected\": \"2025-01-15T14:32:00Z\"\n    }\n]\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Scoped to: Organization (organization_id from current user)\n- Note: All organization members can list numbers\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 500: Server error (number list retrieval failure)","operationId":"list_whatsapp_numbers_api_v1_whatsapp__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/WhatsAppNumber"},"type":"array","title":"Response List Whatsapp Numbers Api V1 Whatsapp  Get"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["WhatsApp"],"summary":"Create Whatsapp Number","description":"Register a new WhatsApp number for the organization.\n\nCreate a new WhatsApp Business Account connection using either Meta Cloud API\n(Official) or Evolution API (QR Code). Each number can handle multiple\nconversations and flows.\n\n**Path Parameters:** None\n\n**Request Body:**\n- phone_number (str, required): E.164 format (e.g., '5585987654321' = Brazil +55 85 98765-4321)\n- display_name (str, optional): User-friendly name (max 255 chars)\n- connection_type (str, optional): 'official' (Meta Cloud API) or 'qrcode' (Evolution API, default: 'official')\n- webhook_url (str, optional): URL to receive webhooks\n\n**For Meta Cloud API (connection_type='official'):**\n- phone_number_id (str, required): Meta Phone Number ID\n- whatsapp_business_account_id (str, required): Meta WhatsApp Business Account ID\n- access_token (str, required): Meta API Token (permissions: whatsapp_business_messaging)\n- app_secret (str, optional): Meta App Secret for webhook validation\n\n**For Evolution API (connection_type='qrcode'):**\n- evolution_instance_name (str, required): Unique Evolution instance identifier\n- evolution_api_url (str, required): Evolution API base URL\n- evolution_api_key (str, required): Evolution Global API Key\n\n**Returns:** WhatsAppNumber object with generated ID and status\n\n**Example Request (Meta Cloud API):**\n```json\n{\n    \"phone_number\": \"5585987654321\",\n    \"display_name\": \"Atendimento Suporte\",\n    \"connection_type\": \"official\",\n    \"phone_number_id\": \"123456789101112\",\n    \"whatsapp_business_account_id\": \"111222333444555\",\n    \"access_token\": \"EAABs1234567890...\",\n    \"app_secret\": \"abc123def456...\",\n    \"webhook_url\": \"https://seu-dominio.com/api/v1/whatsapp/webhook\"\n}\n```\n\n**Example Request (Evolution API):**\n```json\n{\n    \"phone_number\": \"5585987654321\",\n    \"display_name\": \"Atendimento Bot\",\n    \"connection_type\": \"qrcode\",\n    \"evolution_instance_name\": \"pytake-instance-001\",\n    \"evolution_api_url\": \"https://api.evolution.example.com\",\n    \"evolution_api_key\": \"sk-evolution-key-xxx...\"\n}\n```\n\n**Example Response:**\n```json\n{\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"phone_number\": \"5585987654321\",\n    \"display_name\": \"Atendimento Suporte\",\n    \"connection_type\": \"official\",\n    \"status\": \"pending\",\n    \"verified\": false,\n    \"webhook_url\": \"https://seu-dominio.com/api/v1/whatsapp/webhook\",\n    \"created_at\": \"2025-01-15T14:32:00Z\"\n}\n```\n\n**Permissions:**\n- Requires: org_admin or super_admin role\n- Scoped to: Organization (organization_id from current user)\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 403: Forbidden (insufficient permissions - not org_admin)\n- 409: Conflict (phone_number already registered in organization)\n- 422: Unprocessable Entity (invalid phone format, missing required fields)\n- 500: Server error (number creation failure)","operationId":"create_whatsapp_number_api_v1_whatsapp__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WhatsAppNumberCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WhatsAppNumber"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/whatsapp/{number_id}":{"get":{"tags":["WhatsApp"],"summary":"Get Whatsapp Number","description":"Get WhatsApp number details by ID.\n\nRetrieve full configuration, status, and connection details for a registered number.\n\n**Path Parameters:**\n- number_id (str, UUID): WhatsApp number UUID\n\n**Query Parameters:** None\n\n**Returns:** WhatsAppNumber object with all configuration\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Scoped to: Organization (number must belong to user's organization)\n\n**Error Codes:**\n- 401: Unauthorized\n- 404: Not Found (number doesn't exist or not in organization)\n- 500: Server error","operationId":"get_whatsapp_number_api_v1_whatsapp__number_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WhatsAppNumber"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["WhatsApp"],"summary":"Update Whatsapp Number","description":"Update WhatsApp number configuration.\n\nModify display name, webhook URL, and other settings for existing number.\n\n**Path Parameters:**\n- number_id (str, UUID): WhatsApp number UUID\n\n**Request Body:**\n- display_name (str, optional): Updated display name\n- webhook_url (str, optional): Updated webhook URL\n- is_active (bool, optional): Enable/disable number\n\n**Returns:** Updated WhatsAppNumber object\n\n**Permissions:**\n- Requires: org_admin or super_admin role\n- Scoped to: Organization\n\n**Error Codes:**\n- 401: Unauthorized\n- 403: Forbidden (not org_admin)\n- 404: Not Found\n- 422: Unprocessable Entity\n- 500: Server error","operationId":"update_whatsapp_number_api_v1_whatsapp__number_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WhatsAppNumberUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WhatsAppNumber"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["WhatsApp"],"summary":"Delete Whatsapp Number","description":"Delete WhatsApp number (soft delete).\n\nRemove a number from the system. Conversations are preserved for historical records.\n\n**Path Parameters:**\n- number_id (str, UUID): WhatsApp number UUID\n\n**Request Body:** None\n\n**Returns:** HTTP 204 No Content\n\n**Permissions:**\n- Requires: org_admin or super_admin role\n- Scoped to: Organization\n\n**Error Codes:**\n- 401: Unauthorized\n- 403: Forbidden (not org_admin)\n- 404: Not Found\n- 500: Server error","operationId":"delete_whatsapp_number_api_v1_whatsapp__number_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/{number_id}/compatible-chatbots":{"get":{"tags":["WhatsApp"],"summary":"Get Compatible Chatbots","description":"Get list of chatbots compatible with this WhatsApp number.\n\nReturns all chatbots in the organization that can be linked to this WhatsApp number,\nalong with their current node type compatibility information.\n\n**Path Parameters:**\n- number_id (str, UUID): WhatsApp number UUID\n\n**Query Parameters:** None\n\n**Returns:** Object with list of compatible chatbots:\n```json\n{\n  \"total\": 2,\n  \"items\": [\n    {\n      \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n      \"name\": \"Support Bot\",\n      \"description\": \"Customer support chatbot\",\n      \"is_active\": true,\n      \"whatsapp_number_id\": \"2f8ab23a-5d7f-4507-8767-90b2e438e394\",\n      \"available_node_types\": [\"start\", \"message\", \"question\", \"condition\"],\n      \"compatible\": true\n    },\n    {\n      \"id\": \"660e8400-e29b-41d4-a716-446655440001\",\n      \"name\": \"Sales Bot\",\n      \"description\": \"Sales and lead generation\",\n      \"is_active\": false,\n      \"whatsapp_number_id\": null,\n      \"available_node_types\": null,\n      \"compatible\": true\n    }\n  ]\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Scoped to: Organization\n\n**Error Codes:**\n- 401: Unauthorized\n- 404: WhatsApp number not found\n- 500: Server error","operationId":"get_compatible_chatbots_api_v1_whatsapp__number_id__compatible_chatbots_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/{number_id}/test":{"post":{"tags":["WhatsApp"],"summary":"Test Whatsapp Connection","description":"Test WhatsApp number connection.\n\nValidates credentials and connectivity to Meta API or Evolution API.\n\n**Path Parameters:**\n- number_id (str, UUID): WhatsApp number UUID\n\n**Request Body:** None\n\n**Returns:**\n- success (bool): Connection successful\n- status (str): Connection status\n- message (str): Status message\n- api_response (object): Raw API response\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization\n\n**Error Codes:**\n- 401: Unauthorized\n- 404: Not Found\n- 503: Service Unavailable (API unreachable)\n- 500: Server error","operationId":"test_whatsapp_connection_api_v1_whatsapp__number_id__test_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/{number_id}/qrcode":{"post":{"tags":["WhatsApp"],"summary":"Generate Qrcode","description":"Generate new QR Code for Evolution API connection.\n\nInitiate QR code generation for number registration with Evolution API.\nScan with WhatsApp mobile app to authenticate.\n\n**Path Parameters:**\n- number_id (str, UUID): WhatsApp number UUID\n\n**Request Body:** None\n\n**Returns:**\n- qr_code (str, optional): QR Code image data (base64 or URL)\n- status (str): 'pending', 'connected', 'disconnected'\n- message (str): Status message\n\n**Permissions:**\n- Requires: org_admin or super_admin role\n\n**Error Codes:**\n- 401: Unauthorized\n- 403: Forbidden (not org_admin)\n- 404: Not Found\n- 500: Server error (QR code generation failed)","operationId":"generate_qrcode_api_v1_whatsapp__number_id__qrcode_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QRCodeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/{number_id}/qrcode/status":{"get":{"tags":["WhatsApp"],"summary":"Get Qrcode Status","description":"Get QR Code status for Evolution API connection.\n\nCheck current QR code generation and connection status.\n\n**Path Parameters:**\n- number_id (str, UUID): WhatsApp number UUID\n\n**Query Parameters:** None\n\n**Returns:**\n- qr_code (str, optional): Current QR Code image\n- status (str): 'pending', 'connected', 'disconnected', 'expired'\n- message (str): Status description\n\n**Permissions:**\n- Requires: Authenticated user\n\n**Error Codes:**\n- 401: Unauthorized\n- 404: Not Found\n- 500: Server error","operationId":"get_qrcode_status_api_v1_whatsapp__number_id__qrcode_status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QRCodeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/{number_id}/disconnect":{"post":{"tags":["WhatsApp"],"summary":"Disconnect Number","description":"Disconnect WhatsApp number.\n- For Evolution API: Logout from instance\n- For Official API: Deactivate number","operationId":"disconnect_number_api_v1_whatsapp__number_id__disconnect_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/{number_id}/templates":{"get":{"tags":["WhatsApp"],"summary":"List Templates","description":"List message templates from Meta Cloud API for a WhatsApp number.\n\nFetches templates directly from Meta's servers (not local database).\nOnly works for Official API connections (connection_type='official').\n\n**Path Parameters:**\n- number_id (UUID): WhatsApp number ID\n\n**Query Parameters:**\n- status (str, optional): Filter by status (default: APPROVED)\n  - APPROVED: Templates ready to use\n  - PENDING: Awaiting Meta review\n  - REJECTED: Rejected by Meta\n  - DISABLED: Disabled by Meta\n  - PAUSED: Paused due to quality issues\n\n**Returns:** List of templates with complete metadata from Meta API\n\n**Example Response:**\n```json\n[\n  {\n    \"id\": \"1234567890\",\n    \"name\": \"welcome_message\",\n    \"language\": \"pt_BR\",\n    \"status\": \"APPROVED\",\n    \"category\": \"UTILITY\",\n    \"components\": [\n      {\n        \"type\": \"BODY\",\n        \"text\": \"Ol√° {{1}}, bem-vindo!\"\n      }\n    ]\n  }\n]\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Scoped to: Organization\n\n**Error Codes:**\n- 400: Templates not available for QR Code connections\n- 400: WhatsApp Business Account ID not configured\n- 404: WhatsApp number not found\n- 500: Meta API error","operationId":"list_templates_api_v1_whatsapp__number_id__templates_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"APPROVED","title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response List Templates Api V1 Whatsapp  Number Id  Templates Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["WhatsApp"],"summary":"Create Template","description":"Create a new WhatsApp template.\n\nCreates a message template for sending notifications outside the 24-hour\ncustomer service window. Templates must be approved by Meta before use.\n\n**Path Parameters:**\n- number_id (UUID): WhatsApp number ID\n\n**Query Parameters:**\n- submit (bool): Submit to Meta immediately (default: true)\n  - true: Template created and submitted (status: PENDING)\n  - false: Template created as draft (status: DRAFT)\n\n**Request Body:**\n- name (str): Template name (lowercase with underscores, e.g., \"order_confirmation\")\n- language (str): Language code (e.g., \"pt_BR\", \"en_US\")\n- category (str): Template category (MARKETING, UTILITY, AUTHENTICATION)\n- components (list): Template components (header, body, footer, buttons)\n\n**Returns:**\n- Created template with status DRAFT or PENDING\n- Fields include: parameter_format, named_variables\n\n---\n\n## Variable Formats (IMPORTANT)\n\nMeta WhatsApp API supports **TWO formats** for template variables:\n\n### 1. POSITIONAL Format (Traditional)\nVariables use numbers: {{1}}, {{2}}, {{3}}, etc.\n\n**Characteristics:**\n- Order matters: {{1}} = first parameter, {{2}} = second, etc.\n- Less readable in code\n- Legacy format\n\n**Example:**\n```json\n{\n  \"type\": \"BODY\",\n  \"text\": \"Ol√° {{1}}, seu c√≥digo √© {{2}}. V√°lido por {{3}} minutos.\"\n}\n```\n\n### 2. NAMED Format (Recommended - More Readable)\nVariables use descriptive names: {{nome}}, {{codigo}}, {{email}}, etc.\n\n**Characteristics:**\n- Self-documenting: Clear what each variable represents\n- Easier to maintain\n- Recommended by Meta for new templates\n\n**Rules:**\n- Must start with letter or underscore: `{{nome}}` ‚úÖ `{{1nome}}` ‚ùå\n- Can contain letters, numbers, underscores: `{{numero_pedido}}` ‚úÖ\n- Cannot contain spaces or special chars: `{{n√∫mero-pedido}}` ‚ùå\n- Case-sensitive: `{{Nome}}` ‚â† `{{nome}}`\n\n**Example:**\n```json\n{\n  \"type\": \"BODY\",\n  \"text\": \"Ol√° {{nome}}, seu c√≥digo √© {{codigo}}. V√°lido por {{validade}} minutos.\"\n}\n```\n\n### Important Constraints:\n- **Cannot mix formats** in same template (all positional OR all named)\n- Variable names must match **EXACTLY** when sending messages\n- System auto-detects format and stores in `parameter_format` field\n- Named variables stored in `named_variables` array field\n\n---\n\n## Example Request (Named Variables - Recommended):\n```json\n{\n  \"name\": \"order_confirmation\",\n  \"language\": \"pt_BR\",\n  \"category\": \"UTILITY\",\n  \"components\": [\n    {\n      \"type\": \"HEADER\",\n      \"format\": \"TEXT\",\n      \"text\": \"Pedido {{numero_pedido}}\"\n    },\n    {\n      \"type\": \"BODY\",\n      \"text\": \"Ol√° {{cliente}}, seu pedido no valor de {{total}} foi confirmado com sucesso!\"\n    },\n    {\n      \"type\": \"FOOTER\",\n      \"text\": \"Obrigado pela prefer√™ncia\"\n    },\n    {\n      \"type\": \"BUTTONS\",\n      \"buttons\": [\n        {\n          \"type\": \"QUICK_REPLY\",\n          \"text\": \"Ver detalhes\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n## Example Request (Positional Variables):\n```json\n{\n  \"name\": \"order_update\",\n  \"language\": \"en_US\",\n  \"category\": \"UTILITY\",\n  \"components\": [\n    {\n      \"type\": \"BODY\",\n      \"text\": \"Hello {{1}}, your order {{2}} totaling {{3}} has been confirmed!\"\n    }\n  ]\n}\n```\n\n**Response Fields (NEW):**\n- `parameter_format`: \"NAMED\" or \"POSITIONAL\"\n- `named_variables`: Array of variable names (for NAMED format)\n  Example: [\"cliente\", \"numero_pedido\", \"total\"]\n\n**Permissions:**\n- Requires: org_admin or super_admin role\n- Scoped to: Organization\n\n**Error Codes:**\n- 400: Templates not available for QR Code connections\n- 400: WhatsApp Business Account ID not configured\n- 400: Invalid parameter (check Meta API error message)\n- 404: WhatsApp number not found\n- 409: Template with same name already exists\n- 500: Meta API error\n\n**Notes:**\n- Template names must be lowercase with underscores only\n- If submit=True, template sent to Meta for approval (24-48h review)\n- If submit=False, template saved as DRAFT (can edit/submit later)\n- Meta validates template content and may reject non-compliant templates","operationId":"create_template_api_v1_whatsapp__number_id__templates_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}},{"name":"submit","in":"query","required":false,"schema":{"type":"boolean","description":"Submit to Meta immediately","default":true,"title":"Submit"},"description":"Submit to Meta immediately"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/{number_id}/templates/local":{"get":{"tags":["WhatsApp"],"summary":"List Local Templates","description":"List templates from local database (not Meta API).\n\nReturns templates stored in PyTake's database, including drafts and\ntemplates synced from Meta. Much faster than fetching from Meta API.\n\n**Differences from GET /templates:**\n- Source: Local database (not Meta API)\n- Includes: DRAFT templates (not submitted to Meta yet)\n- Performance: Much faster (no external API call)\n- Offline: Works even if Meta API is down\n- Extra fields: parameter_format, named_variables\n\n**Path Parameters:**\n- number_id (UUID): WhatsApp number ID\n\n**Query Parameters:**\n- status (str, optional): Filter by status\n  - DRAFT: Created locally, not submitted to Meta\n  - PENDING: Submitted to Meta, awaiting review\n  - APPROVED: Approved by Meta, ready to use\n  - REJECTED: Rejected by Meta\n  - DISABLED: Disabled by Meta due to quality issues\n- skip (int): Number of records to skip (default: 0)\n- limit (int): Max records to return (default: 100, max: 100)\n\n**Returns:** List of templates with parameter format info\n\n**Example Response:**\n```json\n[\n  {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"name\": \"welcome_message\",\n    \"language\": \"pt_BR\",\n    \"status\": \"APPROVED\",\n    \"category\": \"UTILITY\",\n    \"parameter_format\": \"NAMED\",\n    \"named_variables\": [\"nome\", \"codigo\"],\n    \"body_text\": \"Ol√° {{nome}}, seu c√≥digo √© {{codigo}}\",\n    \"header_text\": null,\n    \"footer_text\": \"PyTake - Automa√ß√£o WhatsApp\",\n    \"buttons\": [],\n    \"quality_score\": \"GREEN\",\n    \"sent_count\": 150,\n    \"delivered_count\": 148,\n    \"created_at\": \"2025-01-15T14:32:00Z\",\n    \"approved_at\": \"2025-01-16T10:00:00Z\"\n  }\n]\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Scoped to: Organization\n\n**Error Codes:**\n- 404: WhatsApp number not found","operationId":"list_local_templates_api_v1_whatsapp__number_id__templates_local_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TemplateResponse"},"title":"Response List Local Templates Api V1 Whatsapp  Number Id  Templates Local Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/{number_id}/templates/{template_id}":{"get":{"tags":["WhatsApp"],"summary":"Get Template","description":"Get a single template by ID from local database.\n\nReturns complete template details including components, variables,\nusage statistics, and quality metrics.\n\n**Path Parameters:**\n- number_id (UUID): WhatsApp number ID\n- template_id (UUID): Template ID\n\n**Returns:** Complete template object with all fields\n\n**Example Response:**\n```json\n{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"name\": \"order_confirmation\",\n  \"language\": \"pt_BR\",\n  \"status\": \"APPROVED\",\n  \"category\": \"UTILITY\",\n  \"parameter_format\": \"NAMED\",\n  \"named_variables\": [\"cliente\", \"numero_pedido\", \"total\"],\n  \"header_type\": \"TEXT\",\n  \"header_text\": \"Pedido Confirmado\",\n  \"header_variables_count\": 0,\n  \"body_text\": \"Ol√° {{cliente}}! Seu pedido {{numero_pedido}} no valor de {{total}} foi confirmado.\",\n  \"body_variables_count\": 3,\n  \"footer_text\": \"Obrigado pela prefer√™ncia\",\n  \"buttons\": [],\n  \"quality_score\": \"GREEN\",\n  \"paused_at\": null,\n  \"disabled_at\": null,\n  \"disabled_reason\": null,\n  \"sent_count\": 1250,\n  \"delivered_count\": 1230,\n  \"read_count\": 1100,\n  \"failed_count\": 5,\n  \"is_system_template\": false,\n  \"is_enabled\": true,\n  \"approved_at\": \"2025-01-10T10:00:00Z\",\n  \"rejected_at\": null,\n  \"created_at\": \"2025-01-09T15:30:00Z\",\n  \"updated_at\": \"2025-01-10T10:00:00Z\"\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Scoped to: Organization + WhatsApp number\n\n**Error Codes:**\n- 404: Template not found or doesn't belong to organization","operationId":"get_template_api_v1_whatsapp__number_id__templates__template_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}},{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Template Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["WhatsApp"],"summary":"Update Template","description":"Update template (only local fields)\n\nNote: Template content cannot be edited after submission.\nTo modify a template, create a new one.","operationId":"update_template_api_v1_whatsapp__number_id__templates__template_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}},{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Template Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["WhatsApp"],"summary":"Delete Template","description":"Delete a template (soft delete in database).\n\nRemoves template from local database. Optionally can also delete from\nMeta API (irreversible).\n\n**IMPORTANT:**\n- Local delete: Template marked as deleted (can be restored)\n- Meta delete: Permanently removes from WhatsApp (cannot be undone)\n- System templates cannot be deleted\n\n**Path Parameters:**\n- number_id (UUID): WhatsApp number ID\n- template_id (UUID): Template ID to delete\n\n**Query Parameters:**\n- delete_from_meta (bool): Also delete from Meta API (default: false)\n  ‚ö†Ô∏è WARNING: Meta deletion is permanent and irreversible!\n\n**Returns:** HTTP 204 No Content on success\n\n**Example Usage:**\n```bash\n# Delete locally only (can be restored)\nDELETE /api/v1/whatsapp/{number_id}/templates/{template_id}\n\n# Delete from Meta too (PERMANENT - Cannot be undone!)\nDELETE /api/v1/whatsapp/{number_id}/templates/{template_id}?delete_from_meta=true\n```\n\n**Permissions:**\n- Requires: org_admin or super_admin role\n- Scoped to: Organization\n\n**Error Codes:**\n- 403: Forbidden (not admin)\n- 404: Template not found\n- 400: Cannot delete system template\n- 500: Failed to delete from Meta (local deletion still succeeds)","operationId":"delete_template_api_v1_whatsapp__number_id__templates__template_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}},{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Template Id"}},{"name":"delete_from_meta","in":"query","required":false,"schema":{"type":"boolean","description":"Also delete from Meta","default":false,"title":"Delete From Meta"},"description":"Also delete from Meta"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/{number_id}/templates/sync":{"post":{"tags":["WhatsApp"],"summary":"Sync Templates","description":"Sync templates from Meta API\n\nFetches all templates from Meta and updates local database:\n- Creates new templates found in Meta\n- Updates status of existing templates (PENDING ‚Üí APPROVED/REJECTED)\n- Useful after creating templates directly in Meta Business Manager","operationId":"sync_templates_api_v1_whatsapp__number_id__templates_sync_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateSyncResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/{number_id}/rate-limit/usage":{"get":{"tags":["WhatsApp"],"summary":"Get Rate Limit Usage","description":"Get current rate limit usage for WhatsApp number\n\nShows daily, hourly, and minute usage counters.\nUseful for monitoring and preventing rate limit issues.","operationId":"get_rate_limit_usage_api_v1_whatsapp__number_id__rate_limit_usage_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/{number_id}/rate-limit/reset":{"post":{"tags":["WhatsApp"],"summary":"Reset Rate Limit","description":"Reset rate limit counters for WhatsApp number\n\nRequires: org_admin or super_admin role\n\nUse with caution - only for testing or manual intervention.","operationId":"reset_rate_limit_api_v1_whatsapp__number_id__rate_limit_reset_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/templates/critical":{"get":{"tags":["WhatsApp"],"summary":"Get Critical Templates","description":"Get all templates requiring attention for the organization.\n\nReturns templates with issues:\n- Status: DISABLED, PAUSED, REJECTED\n- Quality: RED (failing quality metrics)\n- Pending approval (PENDING status > 48h)\n\n**Returns:**\n```json\n{\n    \"critical_templates\": [\n        {\n            \"id\": \"template-uuid\",\n            \"name\": \"template_name\",\n            \"status\": \"DISABLED\",\n            \"quality_score\": \"RED\",\n            \"disabled_reason\": \"QUALITY_ISSUES\",\n            \"disabled_at\": \"2025-01-15T14:30:00Z\",\n            \"sent_count\": 1250,\n            \"failed_count\": 45,\n            \"failure_rate\": 0.036,\n            \"campaigns_affected\": 3,\n            \"action_required\": \"Review template quality metrics and resubmit\"\n        }\n    ],\n    \"total_critical\": 2,\n    \"timestamp\": \"2025-01-15T15:00:00Z\"\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Scoped to: Organization","operationId":"get_critical_templates_api_v1_whatsapp_templates_critical_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/whatsapp/templates/quality-summary":{"get":{"tags":["WhatsApp"],"summary":"Get Quality Summary","description":"Get quality metrics summary for all organization templates.\n\nProvides overview of template quality distribution and metrics.\n\n**Returns:**\n```json\n{\n    \"quality_summary\": {\n        \"total_templates\": 45,\n        \"approved\": 40,\n        \"pending\": 2,\n        \"rejected\": 1,\n        \"disabled\": 2,\n        \"paused\": 0,\n        \"quality_distribution\": {\n            \"GREEN\": 35,\n            \"YELLOW\": 4,\n            \"RED\": 1,\n            \"UNKNOWN\": 5\n        },\n        \"avg_success_rate\": 0.98,\n        \"avg_failure_rate\": 0.02,\n        \"total_messages_sent\": 125400,\n        \"total_messages_failed\": 2450\n    },\n    \"recent_quality_changes\": [\n        {\n            \"template_id\": \"uuid\",\n            \"template_name\": \"name\",\n            \"previous_score\": \"GREEN\",\n            \"current_score\": \"YELLOW\",\n            \"changed_at\": \"2025-01-15T10:30:00Z\",\n            \"reason\": \"Quality metrics degraded\"\n        }\n    ],\n    \"timestamp\": \"2025-01-15T15:00:00Z\"\n}\n```\n\n**Permissions:**\n- Requires: org_admin or super_admin role\n- Scoped to: Organization","operationId":"get_quality_summary_api_v1_whatsapp_templates_quality_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/whatsapp/{number_id}/templates/{template_id}/status-history":{"get":{"tags":["WhatsApp"],"summary":"Get Template Status History","description":"Get status change history for a specific template.\n\nShows all status transitions and quality score changes with timestamps\nand reasons. Useful for auditing and debugging template issues.\n\n**Path Parameters:**\n- number_id: WhatsApp number UUID\n- template_id: Template UUID\n\n**Query Parameters:**\n- limit: Max results (default: 100, max: 1000)\n- offset: Pagination offset (default: 0)\n\n**Returns:**\n```json\n{\n    \"template\": {\n        \"id\": \"template-uuid\",\n        \"name\": \"template_name\",\n        \"current_status\": \"APPROVED\",\n        \"current_quality\": \"GREEN\"\n    },\n    \"history\": [\n        {\n            \"timestamp\": \"2025-01-15T14:30:00Z\",\n            \"event_type\": \"APPROVED\",\n            \"previous_status\": \"PENDING\",\n            \"new_status\": \"APPROVED\",\n            \"quality_score\": \"UNKNOWN\",\n            \"reason\": \"Template approved by Meta\",\n            \"webhook_id\": \"evt-123\"\n        }\n    ],\n    \"total\": 15,\n    \"limit\": 100,\n    \"offset\": 0\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization + WhatsApp number\n\n**Note:** This endpoint requires implementation of AuditLog model\n(Future enhancement for complete audit trail)","operationId":"get_template_status_history_api_v1_whatsapp__number_id__templates__template_id__status_history_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}},{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Template Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/{number_id}/templates/{template_id}/acknowledge-alert":{"post":{"tags":["WhatsApp"],"summary":"Acknowledge Template Alert","description":"Mark template quality alert as acknowledged by user.\n\nUsed to suppress repeated alerts after admin has reviewed\nand taken action on a template issue.\n\n**Path Parameters:**\n- number_id: WhatsApp number UUID\n- template_id: Template UUID\n\n**Returns:**\n```json\n{\n    \"message\": \"Alert acknowledged\",\n    \"template_id\": \"uuid\",\n    \"acknowledged_at\": \"2025-01-15T15:05:00Z\",\n    \"acknowledged_by\": \"user@example.com\"\n}\n```\n\n**Permissions:**\n- Requires: org_admin or super_admin role\n- Scoped to: Organization + WhatsApp number","operationId":"acknowledge_template_alert_api_v1_whatsapp__number_id__templates__template_id__acknowledge_alert_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"number_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Number Id"}},{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Template Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp-analytics/flows/{flow_id}/report":{"get":{"tags":["WhatsApp Analytics"],"summary":"Get Flow Report","description":"Get comprehensive flow report for WhatsApp conversations.\n\n**Path Parameters:**\n- flow_id (str, UUID): Flow UUID\n\n**Query Parameters:**\n- days (int): Report period in days (1-365, default: 30)\n\n**Returns:** Flow report with:\n- Conversation metrics (total, completed, completion rate)\n- Message metrics (total, user, bot, average turns)\n- Duration analytics (average, min, max)\n- User engagement\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Scoped to: Organization\n- Note: Can only view flows from their organization\n\n**Error Codes:**\n- 401: Unauthorized\n- 403: Not in organization\n- 404: Flow not found","operationId":"get_flow_report_api_v1_whatsapp_analytics_flows__flow_id__report_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp-analytics/conversations/{phone_number}/transcript":{"get":{"tags":["WhatsApp Analytics"],"summary":"Get Conversation Transcript","description":"Get conversation transcript (message history).\n\n**Path Parameters:**\n- phone_number (str): Customer WhatsApp phone number\n\n**Query Parameters:**\n- flow_id (str, UUID): Flow UUID (required)\n\n**Returns:** Transcript with:\n- All messages (user and bot)\n- Timestamps\n- Node context\n- Message count\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization\n\n**Error Codes:**\n- 401: Unauthorized\n- 404: Conversation not found","operationId":"get_conversation_transcript_api_v1_whatsapp_analytics_conversations__phone_number__transcript_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"phone_number","in":"path","required":true,"schema":{"type":"string","title":"Phone Number"}},{"name":"flow_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp-analytics/flows/{flow_id}/nodes-heatmap":{"get":{"tags":["WhatsApp Analytics"],"summary":"Get Node Heatmap","description":"Get node visit heatmap - which nodes are most visited.\n\n**Path Parameters:**\n- flow_id (str, UUID): Flow UUID\n\n**Query Parameters:**\n- days (int): Analysis period\n\n**Returns:** Node heatmap with:\n- Node IDs and visit counts\n- Percentage of total visits\n- Sorted by popularity\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization","operationId":"get_node_heatmap_api_v1_whatsapp_analytics_flows__flow_id__nodes_heatmap_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp-analytics/flows/{flow_id}/daily-activity":{"get":{"tags":["WhatsApp Analytics"],"summary":"Get Daily Activity","description":"Get daily activity breakdown.\n\n**Path Parameters:**\n- flow_id (str, UUID): Flow UUID\n\n**Query Parameters:**\n- days (int): Analysis period\n\n**Returns:** Daily activity with:\n- Messages per day\n- Unique users per day\n- Trends over time\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization","operationId":"get_daily_activity_api_v1_whatsapp_analytics_flows__flow_id__daily_activity_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp-analytics/flows/{flow_id}/user-segments":{"get":{"tags":["WhatsApp Analytics"],"summary":"Get User Segments","description":"Get user segmentation by engagement level.\n\n**Path Parameters:**\n- flow_id (str, UUID): Flow UUID\n\n**Returns:** User segments with:\n- Power users (20+ messages)\n- Active users (5-19 messages)\n- Inactive users (1-4 messages)\n- Counts and percentages\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization","operationId":"get_user_segments_api_v1_whatsapp_analytics_flows__flow_id__user_segments_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/":{"post":{"tags":["Chatbots"],"summary":"Create Chatbot","description":"Create a new chatbot for the organization\n\n**Description:** Creates a new chatbot with an automatically initialized main flow.\nChatbots can have multiple flows and are used to build conversational experiences.\n\n**Request Body:**\n- `name` (string, required): Name of the chatbot (2-100 chars)\n- `description` (string, optional): Description of the chatbot's purpose\n- `welcome_message` (string, optional): Initial greeting message for users\n- `is_active` (boolean, default: false): Whether the chatbot starts active\n\n**Example Request:**\n```json\n{\n  \"name\": \"Support Bot\",\n  \"description\": \"Automated support and FAQ responses\",\n  \"welcome_message\": \"Hi! How can I help you today?\",\n  \"is_active\": true\n}\n```\n\n**Returns:** ChatbotInDB object with generated ID and default flow\n\n**Example Response:**\n```json\n{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"organization_id\": \"650e8400-e29b-41d4-a716-446655440001\",\n  \"name\": \"Support Bot\",\n  \"description\": \"Automated support and FAQ responses\",\n  \"welcome_message\": \"Hi! How can I help you today?\",\n  \"is_active\": true,\n  \"created_at\": \"2025-12-08T10:00:00Z\",\n  \"updated_at\": \"2025-12-08T10:00:00Z\"\n}\n```\n\n**Permissions Required:** org_admin\n\n**Possible Errors:**\n- `400`: Invalid data (name too short/long, invalid format)\n- `403`: User does not have org_admin role\n- `500`: Internal server error during creation","operationId":"create_chatbot_api_v1_chatbots__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Chatbots"],"summary":"List Chatbots","description":"List all chatbots in the organization with WhatsApp connection details\n\n**Description:** Retrieves a paginated list of all chatbots accessible to the current user,\nincluding WhatsApp connection information for each chatbot if linked.\n\n**Query Parameters:**\n- `skip` (int, default: 0): Offset for pagination  \n- `limit` (int, default: 100, max: 500): Maximum records per page\n\n**Returns:** ChatbotListResponse with array of chatbots (including WhatsApp details) and total count\n\n**Example Response:**\n```json\n{\n  \"total\": 2,\n  \"items\": [\n    {\n      \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n      \"name\": \"Support Bot\",\n      \"whatsapp_number_id\": \"2f8ab23a-5d7f-4507-8767-90b2e438e394\",\n      \"whatsapp_connection_type\": \"official\",\n      \"whatsapp_phone_number\": \"+556181287787\",\n      \"available_node_types\": [\"start\", \"message\", \"question\", \"condition\", \"end\"],\n      \"is_active\": true\n    },\n    {\n      \"id\": \"660e8400-e29b-41d4-a716-446655440001\",\n      \"name\": \"Sales Bot\",\n      \"whatsapp_number_id\": null,\n      \"whatsapp_connection_type\": null,\n      \"whatsapp_phone_number\": null,\n      \"available_node_types\": null,\n      \"is_active\": false\n    }\n  ]\n}\n```\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `500`: Database error","operationId":"list_chatbots_api_v1_chatbots__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/{chatbot_id}":{"get":{"tags":["Chatbots"],"summary":"Get Chatbot","description":"Get chatbot by ID with WhatsApp connection details\n\n**Description:** Retrieves detailed information about a specific chatbot including configuration,\nmetadata, and WhatsApp connection details if linked.\n\n**Path Parameters:**\n- `chatbot_id` (UUID, required): Unique chatbot identifier\n\n**Returns:** ChatbotInDB object with complete chatbot details including:\n- whatsapp_connection_type: \"official\", \"qrcode\", etc (if linked)\n- whatsapp_phone_number: Phone number of linked WhatsApp\n- available_node_types: Types of nodes available for this chatbot\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Chatbot not found\n- `500`: Database error","operationId":"get_chatbot_api_v1_chatbots__chatbot_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chatbot Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Chatbots"],"summary":"Update Chatbot","description":"Update chatbot with multi-binding, fallback, and A/B testing support\n\n**Description:** Updates chatbot configuration including name, description, active status,\nand new features: multi-binding (link to multiple WhatsApp numbers), fallback flow,\nand A/B testing configuration.\n\n**Path Parameters:**\n- `chatbot_id` (UUID, required): Unique chatbot identifier\n\n**Request Body (all optional):**\n- `name` (string): New chatbot name\n- `description` (string): Updated description\n- `is_active` (boolean): Active status\n- `is_fallback` (boolean): Set as fallback flow for unmapped numbers (unique per org)\n- `whatsapp_number_ids` (array of strings): Link to multiple WhatsApp numbers\n- `ab_test_enabled` (boolean): Enable A/B testing\n- `ab_test_flows` (array): A/B test configuration [{flow_id, weight, variant_name}]\n- `global_variables` (object): Global variables\n- `settings` (object): Bot settings\n\n**Example - Multi-binding:**\n```json\n{\n  \"name\": \"Customer Service\",\n  \"whatsapp_number_ids\": [\"num_001\", \"num_002\", \"num_003\"],\n  \"is_fallback\": false\n}\n```\n\n**Example - Fallback Flow:**\n```json\n{\n  \"name\": \"Default Flow\",\n  \"is_fallback\": true,\n  \"whatsapp_number_ids\": null\n}\n```\n\n**Example - A/B Testing:**\n```json\n{\n  \"ab_test_enabled\": true,\n  \"ab_test_flows\": [\n    {\"flow_id\": \"flow_a\", \"weight\": 60, \"variant_name\": \"Red Button\"},\n    {\"flow_id\": \"flow_b\", \"weight\": 40, \"variant_name\": \"Blue Button\"}\n  ]\n}\n```\n\n**Returns:** Updated ChatbotInDB with linked_history\n\n**Permissions Required:** org_admin role\n\n**Possible Errors:**\n- `400`: Invalid data (e.g., both whatsapp_number_ids and is_fallback set)\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Chatbot not found\n- `409`: Fallback conflict (org already has a fallback)\n- `500`: Database error","operationId":"update_chatbot_api_v1_chatbots__chatbot_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chatbot Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Chatbots"],"summary":"Delete Chatbot","description":"Soft delete chatbot\n\nRequired role: org_admin","operationId":"delete_chatbot_api_v1_chatbots__chatbot_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chatbot Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/{chatbot_id}/full":{"get":{"tags":["Chatbots"],"summary":"Get Chatbot With Flows","description":"Get chatbot with all flows loaded","operationId":"get_chatbot_with_flows_api_v1_chatbots__chatbot_id__full_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chatbot Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotWithFlows"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/{chatbot_id}/stats":{"get":{"tags":["Chatbots"],"summary":"Get Chatbot Stats","description":"Get chatbot statistics\n\n**Description:** Retrieves aggregated statistics for a chatbot including conversation count, message metrics, and engagement data.\n\n**Path Parameters:**\n- `chatbot_id` (UUID, required): Unique chatbot identifier\n\n**Returns:** ChatbotStats object with aggregated metrics\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Chatbot not found\n- `500`: Database error","operationId":"get_chatbot_stats_api_v1_chatbots__chatbot_id__stats_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chatbot Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotStats"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/{chatbot_id}/linking-history":{"get":{"tags":["Chatbots"],"summary":"Get Chatbot Linking History","description":"Get chatbot linking/unlinking history\n\n**Description:** Retrieves audit trail of all linking and unlinking actions for a chatbot\n(i.e., when numbers were connected or disconnected from the flow).\n\n**Path Parameters:**\n- `chatbot_id` (UUID, required): Unique chatbot identifier\n\n**Query Parameters:**\n- `limit` (integer, default: 100, max: 500): Maximum number of history entries to return\n\n**Returns:** List of history entries with timestamp, action, number_id, and changed_by\n\n**Example Response:**\n```json\n{\n  \"chatbot_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"history\": [\n    {\n      \"timestamp\": \"2025-12-11T15:45:30Z\",\n      \"action\": \"linked\",\n      \"number_id\": \"num_001\",\n      \"changed_by\": \"admin@company.com\"\n    },\n    {\n      \"timestamp\": \"2025-12-11T15:44:00Z\",\n      \"action\": \"unlinked\",\n      \"number_id\": \"num_002\",\n      \"changed_by\": \"admin@company.com\"\n    }\n  ]\n}\n```\n\n**Permissions Required:** org_admin or agent role\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Chatbot not found\n- `500`: Database error","operationId":"get_chatbot_linking_history_api_v1_chatbots__chatbot_id__linking_history_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chatbot Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Chatbot Linking History Api V1 Chatbots  Chatbot Id  Linking History Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/{chatbot_id}/activate":{"post":{"tags":["Chatbots"],"summary":"Activate Chatbot","description":"Activate chatbot\n\nRequired role: org_admin\n\nValidates that chatbot has at least one flow and a main flow.","operationId":"activate_chatbot_api_v1_chatbots__chatbot_id__activate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chatbot Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/{chatbot_id}/deactivate":{"post":{"tags":["Chatbots"],"summary":"Deactivate Chatbot","description":"Deactivate chatbot\n\nRequired role: org_admin","operationId":"deactivate_chatbot_api_v1_chatbots__chatbot_id__deactivate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chatbot Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/{chatbot_id}/flows":{"post":{"tags":["Chatbots"],"summary":"Create Flow","description":"Create a new flow for chatbot\n\nRequired role: org_admin or agent\n\nIf is_main is true, all other main flows will be unset.","operationId":"create_flow_api_v1_chatbots__chatbot_id__flows_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chatbot Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Chatbots"],"summary":"List Flows","description":"List all flows for chatbot","operationId":"list_flows_api_v1_chatbots__chatbot_id__flows_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chatbot Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/flows/{flow_id}":{"get":{"tags":["Chatbots"],"summary":"Get Flow","description":"Get flow by ID","operationId":"get_flow_api_v1_chatbots_flows__flow_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Chatbots"],"summary":"Delete Flow","description":"Soft delete flow\n\nRequired role: org_admin\n\nCannot delete main flow without setting another flow as main first.","operationId":"delete_flow_api_v1_chatbots_flows__flow_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/flows/{flow_id}/full":{"get":{"tags":["Chatbots"],"summary":"Get Flow With Nodes","description":"Get flow with all nodes loaded","operationId":"get_flow_with_nodes_api_v1_chatbots_flows__flow_id__full_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowWithNodes"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/flows/{flow_id}/nodes":{"post":{"tags":["Chatbots"],"summary":"Create Node","description":"Create a new node for flow\n\nRequired role: org_admin or agent","operationId":"create_node_api_v1_chatbots_flows__flow_id__nodes_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NodeCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NodeInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Chatbots"],"summary":"List Nodes","description":"List all nodes for flow","operationId":"list_nodes_api_v1_chatbots_flows__flow_id__nodes_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NodeListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/nodes/{node_id}":{"patch":{"tags":["Chatbots"],"summary":"Update Node","description":"Update node\n\nRequired role: org_admin or agent","operationId":"update_node_api_v1_chatbots_nodes__node_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"node_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Node Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NodeUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NodeInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Chatbots"],"summary":"Delete Node","description":"Delete node\n\nRequired role: org_admin or agent","operationId":"delete_node_api_v1_chatbots_nodes__node_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"node_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Node Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/flows/{flow_id}/export":{"get":{"tags":["Chatbots"],"summary":"Export Flow","description":"Export flow as JSON for backup/template\n\nRequired role: org_admin\n\nReturns complete flow data including canvas_data, variables, and metadata.\nUse this exported JSON to import the flow into another chatbot or organization.","operationId":"export_flow_api_v1_chatbots_flows__flow_id__export_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Export Flow Api V1 Chatbots Flows  Flow Id  Export Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chatbots/{chatbot_id}/import":{"post":{"tags":["Chatbots"],"summary":"Import Flow","description":"Import flow from exported JSON\n\nRequired role: org_admin\n\nImport a flow previously exported from this or another chatbot.\nThe imported flow will never be set as main - you must set it manually.","operationId":"import_flow_api_v1_chatbots__chatbot_id__import_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chatbot Id"}},{"name":"override_name","in":"query","required":false,"schema":{"type":"string","description":"Optional name override for imported flow","title":"Override Name"},"description":"Optional name override for imported flow"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Import Data"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/":{"post":{"tags":["Campaigns"],"summary":"Create Campaign","description":"Create a new campaign\n\n**Description:** Creates a new bulk messaging campaign. The campaign starts in 'draft' status and can be scheduled or started immediately.\n\n**Request Body:**\n- `name` (string, required): Campaign name\n- `message_template` (string, required): Message content or template ID\n- `audience_filter` (object, optional): Target audience filters (tags, VIP status, etc.)\n- `send_delay` (integer, optional): Delay between messages in milliseconds\n- `retry_max_attempts` (integer, default: 3): Maximum retry attempts\n\n**Returns:** CampaignInDB with created campaign details\n\n**Permissions Required:** org_admin or agent role\n\n**Possible Errors:**\n- `400`: Invalid campaign data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `500`: Database error","operationId":"create_campaign_api_v1_campaigns__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Campaigns"],"summary":"List Campaigns","description":"List all campaigns for current organization\n\n**Description:** Retrieves a paginated list of campaigns with optional filtering by status.\n\n**Query Parameters:**\n- `skip` (int, default: 0): Offset for pagination\n- `limit` (int, default: 100, max: 500): Records per page\n- `status` (string, optional): Filter by status (draft, scheduled, running, completed, paused, cancelled)\n\n**Returns:** CampaignListResponse with paginated campaigns and total count\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `500`: Database error","operationId":"list_campaigns_api_v1_campaigns__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":100,"title":"Limit"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status (draft, scheduled, running, completed, paused, cancelled)","title":"Status"},"description":"Filter by status (draft, scheduled, running, completed, paused, cancelled)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/{campaign_id}":{"get":{"tags":["Campaigns"],"summary":"Get Campaign","description":"Get campaign by ID\n\n**Description:** Retrieves full campaign details including message template, audience configuration, and current statistics.\n\n**Path Parameters:**\n- `campaign_id` (UUID, required): Unique campaign identifier\n\n**Returns:** CampaignInDB with complete campaign details\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Campaign not found\n- `500`: Database error","operationId":"get_campaign_api_v1_campaigns__campaign_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Campaigns"],"summary":"Update Campaign","description":"Update campaign\n\n**Description:** Updates campaign configuration. Can only update draft or scheduled campaigns.\n\n**Path Parameters:**\n- `campaign_id` (UUID, required): Unique campaign identifier\n\n**Request Body (all optional):**\n- `name` (string): New campaign name\n- `message_template` (string): Updated message template\n- `audience_filter` (object): Updated audience filters\n- `send_delay` (integer): New send delay in milliseconds\n\n**Returns:** Updated CampaignInDB\n\n**Permissions Required:** org_admin or agent role\n\n**Possible Errors:**\n- `400`: Invalid update data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Campaign not found\n- `409`: Cannot update running campaign\n- `500`: Database error","operationId":"update_campaign_api_v1_campaigns__campaign_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Campaigns"],"summary":"Delete Campaign","description":"Soft delete campaign\n\n**Description:** Marks campaign as deleted. Cannot delete running campaigns. Data is retained for audit.\n\n**Path Parameters:**\n- `campaign_id` (UUID, required): Unique campaign identifier\n\n**Returns:** 204 No Content on success\n\n**Permissions Required:** org_admin role\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Campaign not found\n- `409`: Cannot delete running campaign\n- `500`: Database error","operationId":"delete_campaign_api_v1_campaigns__campaign_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/{campaign_id}/stats":{"get":{"tags":["Campaigns"],"summary":"Get Campaign Stats","description":"Get campaign statistics\n\nReturns detailed statistics including delivery rates, read rates, etc.","operationId":"get_campaign_stats_api_v1_campaigns__campaign_id__stats_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignStats"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/{campaign_id}/progress":{"get":{"tags":["Campaigns"],"summary":"Get Campaign Progress","description":"Get campaign progress\n\nReturns current progress and estimated completion time.","operationId":"get_campaign_progress_api_v1_campaigns__campaign_id__progress_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignProgress"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/{campaign_id}/retry-stats":{"get":{"tags":["Campaigns"],"summary":"Get Campaign Retry Stats","description":"Get detailed retry statistics for campaign\n\nReturns:\n- Total contacts and status breakdown\n- Average attempts per contact\n- Successful on first attempt vs required retries\n- Retry rate percentage\n- Detailed error logs","operationId":"get_campaign_retry_stats_api_v1_campaigns__campaign_id__retry_stats_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/{campaign_id}/audience/preview":{"get":{"tags":["Campaigns"],"summary":"Preview Campaign Audience","description":"Preview campaign audience\n\nReturns total count and sample of target contacts.","operationId":"preview_campaign_audience_api_v1_campaigns__campaign_id__audience_preview_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudiencePreview"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/{campaign_id}/schedule":{"post":{"tags":["Campaigns"],"summary":"Schedule Campaign","description":"Schedule campaign for future sending\n\nRequired role: org_admin or agent\n\nThe campaign will start automatically at the scheduled time.","operationId":"schedule_campaign_api_v1_campaigns__campaign_id__schedule_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScheduleCampaignRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/{campaign_id}/start":{"post":{"tags":["Campaigns"],"summary":"Start Campaign","description":"Start campaign immediately\n\n**Description:** Begins sending messages to the target audience immediately. Campaign must be in draft or scheduled status.\n\n**Path Parameters:**\n- `campaign_id` (UUID, required): Unique campaign identifier\n\n**Returns:** CampaignStartResponse with execution start details\n\n**Permissions Required:** org_admin or agent role\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Campaign not found\n- `409`: Campaign already running or invalid status\n- `500`: Database error","operationId":"start_campaign_api_v1_campaigns__campaign_id__start_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignStartResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/{campaign_id}/pause":{"post":{"tags":["Campaigns"],"summary":"Pause Campaign","description":"Pause running campaign\n\nRequired role: org_admin or agent\n\nStops sending messages. Can be resumed later.","operationId":"pause_campaign_api_v1_campaigns__campaign_id__pause_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/{campaign_id}/resume":{"post":{"tags":["Campaigns"],"summary":"Resume Campaign","description":"Resume paused campaign\n\nRequired role: org_admin or agent\n\nContinues sending messages from where it was paused.","operationId":"resume_campaign_api_v1_campaigns__campaign_id__resume_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/{campaign_id}/cancel":{"post":{"tags":["Campaigns"],"summary":"Cancel Campaign","description":"Cancel campaign\n\nRequired role: org_admin\n\nPermanently stops the campaign. Cannot be resumed.","operationId":"cancel_campaign_api_v1_campaigns__campaign_id__cancel_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analytics/overview":{"get":{"tags":["Analytics"],"summary":"Get Overview Metrics","description":"Get overview dashboard metrics\n\n**Returns:** High-level metrics for the organization dashboard\n\n**Metrics Included:**\n- Total conversations\n- Total messages sent/received\n- Active agents\n- Connected WhatsApp numbers\n- Average response time\n\n**Example Response:**\n```json\n{\n  \"total_conversations\": 150,\n  \"total_messages\": 3500,\n  \"active_agents\": 5,\n  \"connected_channels\": 2,\n  \"avg_response_time_seconds\": 45.5\n}\n```","operationId":"get_overview_metrics_api_v1_analytics_overview_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OverviewMetrics"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/analytics/conversations":{"get":{"tags":["Analytics"],"summary":"Get Conversation Metrics","description":"Get conversation analytics with detailed metrics\n\n**Query Parameters:**\n- `start_date` (datetime, optional): Data inicial (padr√£o: 30 dias atr√°s). Formato: ISO 8601\n- `end_date` (datetime, optional): Data final (padr√£o: agora). Formato: ISO 8601\n\n**Returns:** Detailed conversation metrics for the specified period\n\n**Metrics Included:**\n- Total conversations\n- Conversations by status (open, pending, resolved, closed)\n- Average resolution time\n- Conversation volume trends\n\n**Example Request:**\n```\nGET /api/v1/analytics/conversations?start_date=2025-11-08T00:00:00Z&end_date=2025-12-08T23:59:59Z\n```\n\n**Example Response:**\n```json\n{\n  \"period\": {\n    \"start_date\": \"2025-11-08T00:00:00Z\",\n    \"end_date\": \"2025-12-08T23:59:59Z\"\n  },\n  \"total\": 150,\n  \"by_status\": {\n    \"open\": 25,\n    \"pending\": 10,\n    \"resolved\": 100,\n    \"closed\": 15\n  },\n  \"avg_resolution_time_minutes\": 125\n}\n```","operationId":"get_conversation_metrics_api_v1_analytics_conversations_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"Data de in√≠cio (padr√£o: 30 dias atr√°s). Formato: ISO 8601 (ex: 2025-12-08T00:00:00Z)","title":"Start Date"},"description":"Data de in√≠cio (padr√£o: 30 dias atr√°s). Formato: ISO 8601 (ex: 2025-12-08T00:00:00Z)"},{"name":"end_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"Data de fim (padr√£o: agora). Formato: ISO 8601 (ex: 2025-12-08T23:59:59Z)","title":"End Date"},"description":"Data de fim (padr√£o: agora). Formato: ISO 8601 (ex: 2025-12-08T23:59:59Z)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationMetrics"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analytics/conversations/hourly":{"get":{"tags":["Analytics"],"summary":"Get Conversations Hourly","description":"Get conversation volume time series by hour or day\n\n**Query Parameters:**\n- `granularity` (string, default: \"hour\"): Intervalo de tempo: \"hour\" (hor√°ria) ou \"day\" (di√°ria)\n- `start_date` (datetime, optional): Data inicial (padr√£o: 24 horas atr√°s)\n- `end_date` (datetime, optional): Data final (padr√£o: agora)\n\n**Returns:** Time series data with conversation counts per period\n\n**Example Request:**\n```\nGET /api/v1/analytics/conversations/hourly?granularity=hour&start_date=2025-12-08T00:00:00Z&end_date=2025-12-09T00:00:00Z\n```\n\n**Example Response:**\n```json\n{\n  \"metric_name\": \"conversations\",\n  \"data_points\": [\n    {\n      \"timestamp\": \"2025-12-08T00:00:00Z\",\n      \"value\": 12\n    },\n    {\n      \"timestamp\": \"2025-12-08T01:00:00Z\",\n      \"value\": 18\n    }\n  ],\n  \"total\": 200,\n  \"average\": 15.5\n}\n```","operationId":"get_conversations_hourly_api_v1_analytics_conversations_hourly_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"granularity","in":"query","required":false,"schema":{"type":"string","description":"Granularidade temporal: 'hour' (hor√°ria) ou 'day' (di√°ria)","default":"hour","title":"Granularity"},"description":"Granularidade temporal: 'hour' (hor√°ria) ou 'day' (di√°ria)"},{"name":"start_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"Data de in√≠cio (padr√£o: 24 horas atr√°s). Formato: ISO 8601","title":"Start Date"},"description":"Data de in√≠cio (padr√£o: 24 horas atr√°s). Formato: ISO 8601"},{"name":"end_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"Data de fim (padr√£o: agora). Formato: ISO 8601","title":"End Date"},"description":"Data de fim (padr√£o: agora). Formato: ISO 8601"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimeSeriesData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analytics/agents":{"get":{"tags":["Analytics"],"summary":"Get Agent Metrics","description":"Get agent performance analytics\n\nReturns agent metrics including top performers.","operationId":"get_agent_metrics_api_v1_analytics_agents_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"Start date (defaults to 30 days ago)","title":"Start Date"},"description":"Start date (defaults to 30 days ago)"},{"name":"end_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"End date (defaults to now)","title":"End Date"},"description":"End date (defaults to now)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentMetrics"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analytics/campaigns":{"get":{"tags":["Analytics"],"summary":"Get Campaign Metrics","description":"Get campaign analytics\n\nReturns campaign performance metrics including delivery and engagement rates.","operationId":"get_campaign_metrics_api_v1_analytics_campaigns_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"Start date (defaults to 30 days ago)","title":"Start Date"},"description":"Start date (defaults to 30 days ago)"},{"name":"end_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"End date (defaults to now)","title":"End Date"},"description":"End date (defaults to now)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignMetrics"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analytics/contacts":{"get":{"tags":["Analytics"],"summary":"Get Contact Metrics","description":"Get contact analytics\n\nReturns contact growth and segmentation metrics.","operationId":"get_contact_metrics_api_v1_analytics_contacts_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"Start date (defaults to 30 days ago)","title":"Start Date"},"description":"Start date (defaults to 30 days ago)"},{"name":"end_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"End date (defaults to now)","title":"End Date"},"description":"End date (defaults to now)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactMetrics"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analytics/chatbots":{"get":{"tags":["Analytics"],"summary":"Get Chatbot Metrics","description":"Get chatbot analytics\n\nReturns chatbot performance and usage metrics.","operationId":"get_chatbot_metrics_api_v1_analytics_chatbots_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatbotMetrics"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/analytics/messages":{"get":{"tags":["Analytics"],"summary":"Get Message Metrics","description":"Get message analytics\n\nReturns message volume and delivery metrics.","operationId":"get_message_metrics_api_v1_analytics_messages_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"Start date (defaults to 30 days ago)","title":"Start Date"},"description":"Start date (defaults to 30 days ago)"},{"name":"end_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"End date (defaults to now)","title":"End Date"},"description":"End date (defaults to now)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageMetrics"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analytics/time-series/messages":{"get":{"tags":["Analytics"],"summary":"Get Messages Time Series","description":"Get message volume time series\n\nReturns message count over time with specified granularity.","operationId":"get_messages_time_series_api_v1_analytics_time_series_messages_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":true,"schema":{"type":"string","format":"date-time","description":"Start date","title":"Start Date"},"description":"Start date"},{"name":"end_date","in":"query","required":true,"schema":{"type":"string","format":"date-time","description":"End date","title":"End Date"},"description":"End date"},{"name":"granularity","in":"query","required":false,"schema":{"type":"string","description":"Granularity: hour, day, week, month","default":"day","title":"Granularity"},"description":"Granularity: hour, day, week, month"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimeSeriesData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analytics/reports/full":{"get":{"tags":["Analytics"],"summary":"Generate Full Report","description":"Generate comprehensive analytics report\n\nReturns complete analytics report with all metrics for the specified period.","operationId":"generate_full_report_api_v1_analytics_reports_full_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"Start date (defaults to 30 days ago)","title":"Start Date"},"description":"Start date (defaults to 30 days ago)"},{"name":"end_date","in":"query","required":false,"schema":{"type":"string","format":"date-time","description":"End date (defaults to now)","title":"End Date"},"description":"End date (defaults to now)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FullReport"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dashboard/summary":{"get":{"tags":["Dashboard"],"summary":"Get Dashboard Summary","description":"Get dashboard summary metrics for organization.\n\nReturns aggregated metrics for the organization dashboard, including\nconversation statistics, messaging volume, agent activity, and recent trends.\n\n**Path Parameters:** None\n\n**Query Parameters:** None\n\n**Returns:**\n- total_conversations (int): Total conversations in organization\n- total_messages (int): Total messages across all conversations\n- active_agents (int): Number of agents currently active\n- active_conversations (int): Conversations with status 'active'\n- pending_conversations (int): Conversations awaiting assignment\n- messages_today (int): Messages sent today\n- avg_response_time (float): Average agent response time in seconds\n- avg_resolution_time (float): Average conversation resolution time\n- customer_satisfaction (float): Average CSAT score (0-5)\n- last_updated (datetime): Timestamp of metrics calculation\n\n**Example Request:**\n```\nGET /api/v1/analytics/dashboard/summary\nAuthorization: Bearer eyJhbGc...\n```\n\n**Example Response:**\n```json\n{\n    \"total_conversations\": 15487,\n    \"total_messages\": 523891,\n    \"active_agents\": 12,\n    \"active_conversations\": 247,\n    \"pending_conversations\": 43,\n    \"messages_today\": 8923,\n    \"avg_response_time\": 127.5,\n    \"avg_resolution_time\": 3421.8,\n    \"customer_satisfaction\": 4.6,\n    \"last_updated\": \"2025-01-15T14:32:00Z\"\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Scoped to: Organization (organization_id from current user)\n- Note: All organization members can view dashboard metrics\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 403: Forbidden (user not in organization)\n- 500: Server error (analytics calculation failure)\n\n**Performance Notes:**\n- Response cached for 60 seconds to reduce database load\n- Suitable for real-time dashboard display\n- Metrics updated every 5 minutes in background\n\n**Author:** Kayo Carvalho Fernandes","operationId":"get_dashboard_summary_api_v1_dashboard_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OverviewMetrics"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/flow-automations/":{"post":{"tags":["Flow Automations"],"summary":"Create Automation","description":"Create a new flow automation\n\n**Description:** Creates a new automation for proactive flow dispatching. The automation starts in 'draft' status.\n\n**Request Body:**\n- `name` (string, required): Automation name\n- `flow_id` (UUID, required): Target flow to dispatch\n- `trigger_type` (string, required): Trigger type (e.g., \"keyword\", \"user_action\", \"schedule\")\n- `target_contacts` (array, optional): List of contact IDs to target\n- `is_active` (boolean, default: false): Whether automation is active on creation\n\n**Returns:** Created FlowAutomationResponse with automation details\n\n**Permissions Required:** org_admin or agent role\n\n**Possible Errors:**\n- `400`: Invalid automation data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Flow not found\n- `500`: Database error","operationId":"create_automation_api_v1_flow_automations__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowAutomationCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowAutomationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Flow Automations"],"summary":"List Automations","description":"List all flow automations for current organization\n\n**Description:** Retrieves a paginated list of automations with optional filtering by status or active state.\n\n**Query Parameters:**\n- `skip` (int, default: 0): Offset for pagination\n- `limit` (int, default: 100, max: 500): Records per page\n- `status` (string, optional): Filter by status (draft, active, paused, completed)\n- `is_active` (boolean, optional): Filter by active status\n\n**Returns:** FlowAutomationList with paginated automations and metadata\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `500`: Database error","operationId":"list_automations_api_v1_flow_automations__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":100,"title":"Limit"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status (draft, active, paused, completed)","title":"Status"},"description":"Filter by status (draft, active, paused, completed)"},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by active status","title":"Is Active"},"description":"Filter by active status"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowAutomationList"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/flow-automations/{automation_id}":{"get":{"tags":["Flow Automations"],"summary":"Get Automation","description":"Get flow automation by ID\n\n**Description:** Retrieves full automation details including relationships, schedule, and execution history.\n\n**Path Parameters:**\n- `automation_id` (UUID, required): Unique automation identifier\n\n**Returns:** FlowAutomationResponse with complete automation details\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Automation not found\n- `500`: Database error","operationId":"get_automation_api_v1_flow_automations__automation_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"automation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Automation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowAutomationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Flow Automations"],"summary":"Update Automation","description":"Update flow automation\n\n**Description:** Updates automation configuration. Can only update draft or paused automations.\n\n**Path Parameters:**\n- `automation_id` (UUID, required): Unique automation identifier\n\n**Request Body (all optional):**\n- `name` (string): New automation name\n- `flow_id` (UUID): New target flow\n- `trigger_type` (string): New trigger type\n- `is_active` (boolean): Active status\n\n**Returns:** Updated FlowAutomationResponse\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `400`: Invalid update data\n- `401`: User not authenticated\n- `404`: Automation not found\n- `409`: Cannot update running automation\n- `500`: Database error","operationId":"update_automation_api_v1_flow_automations__automation_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"automation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Automation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowAutomationUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowAutomationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Flow Automations"],"summary":"Delete Automation","description":"Delete flow automation (soft delete)\n\n**Description:** Marks automation as deleted. Cannot delete running automations.\n\n**Path Parameters:**\n- `automation_id` (UUID, required): Unique automation identifier\n\n**Returns:** 204 No Content on success\n\n**Permissions Required:** org_admin role\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Automation not found\n- `409`: Cannot delete running automation\n- `500`: Database error","operationId":"delete_automation_api_v1_flow_automations__automation_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"automation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Automation Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/flow-automations/{automation_id}/start":{"post":{"tags":["Flow Automations"],"summary":"Start Automation","description":"Start flow automation execution manually\n\n**Description:** Triggers execution of the automation. Creates an execution and begins processing recipients.\nOptionally supports test mode with specific contact IDs.\n\n**Path Parameters:**\n- `automation_id` (UUID, required): Unique automation identifier\n\n**Request Body (optional):**\n- `contact_ids` (array, optional): Specific contacts to execute flow for (test mode)\n- `test_mode` (boolean, optional): Run in test mode without recording metrics\n\n**Returns:** FlowAutomationExecutionResponse with execution details\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Automation not found\n- `409`: Automation not active or already running\n- `500`: Database error","operationId":"start_automation_api_v1_flow_automations__automation_id__start_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"automation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Automation Id"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/FlowAutomationStartRequest"},{"type":"null"}],"title":"Request"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowAutomationExecutionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/flow-automations/{automation_id}/stats":{"get":{"tags":["Flow Automations"],"summary":"Get Automation Stats","description":"Get statistics for flow automation\n\n**Description:** Returns aggregated metrics across all executions including total contacts reached,\nmessages sent, success rate, and engagement metrics.\n\n**Path Parameters:**\n- `automation_id` (UUID, required): Unique automation identifier\n\n**Returns:** FlowAutomationStats with aggregated metrics\n\n**Response Example:**\n```json\n{\n  \"total_executions\": 5,\n  \"total_contacts_reached\": 250,\n  \"total_messages_sent\": 250,\n  \"successful_executions\": 4,\n  \"failed_executions\": 0,\n  \"engagement_rate\": 0.42,\n  \"success_rate\": 0.95\n}\n```\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Automation not found\n- `500`: Database error","operationId":"get_automation_stats_api_v1_flow_automations__automation_id__stats_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"automation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Automation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowAutomationStats"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/flow-automations/{automation_id}/schedule":{"post":{"tags":["Flow Automations"],"summary":"Create Automation Schedule","description":"Create or update schedule for automation\n\nDefines when and how the automation runs (daily, weekly, monthly, cron, etc.)","operationId":"create_automation_schedule_api_v1_flow_automations__automation_id__schedule_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"automation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Automation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowAutomationScheduleCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowAutomationScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Flow Automations"],"summary":"Get Automation Schedule","description":"Get schedule for automation","operationId":"get_automation_schedule_api_v1_flow_automations__automation_id__schedule_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"automation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Automation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowAutomationScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Flow Automations"],"summary":"Update Automation Schedule","description":"Update automation schedule","operationId":"update_automation_schedule_api_v1_flow_automations__automation_id__schedule_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"automation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Automation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowAutomationScheduleUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowAutomationScheduleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Flow Automations"],"summary":"Delete Automation Schedule","description":"Delete automation schedule","operationId":"delete_automation_schedule_api_v1_flow_automations__automation_id__schedule_delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"automation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Automation Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/flow-automations/{automation_id}/schedule/exceptions":{"post":{"tags":["Flow Automations"],"summary":"Add Schedule Exception","description":"Add exception to automation schedule (e.g., holiday, maintenance window)","operationId":"add_schedule_exception_api_v1_flow_automations__automation_id__schedule_exceptions_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"automation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Automation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScheduleExceptionCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/flow-automations/{automation_id}/schedule/exceptions/{exception_id}":{"delete":{"tags":["Flow Automations"],"summary":"Remove Schedule Exception","description":"Remove exception from schedule","operationId":"remove_schedule_exception_api_v1_flow_automations__automation_id__schedule_exceptions__exception_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"automation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Automation Id"}},{"name":"exception_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Exception Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/flow-automations/{automation_id}/schedule/preview":{"get":{"tags":["Flow Automations"],"summary":"Get Schedule Preview","description":"Get preview of next N scheduled executions\n\nUseful for showing calendar view in UI","operationId":"get_schedule_preview_api_v1_flow_automations__automation_id__schedule_preview_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"automation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Automation Id"}},{"name":"num_executions","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":10,"title":"Num Executions"}},{"name":"days_ahead","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"default":90,"title":"Days Ahead"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SchedulePreview"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/templates/templates/{template_id}/analytics/metrics":{"get":{"tags":["Template Analytics","templates-analytics"],"summary":"Get template analytics metrics","description":"Get detailed metrics and analytics for a specific template","operationId":"get_template_analytics_metrics_api_v1_templates_templates__template_id__analytics_metrics_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Template Id"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateMetricsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/templates/templates/analytics/dashboard":{"get":{"tags":["Template Analytics","templates-analytics"],"summary":"Get organization dashboard","description":"Get aggregated analytics dashboard for entire organization","operationId":"get_organization_analytics_dashboard_api_v1_templates_templates_analytics_dashboard_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"default":30,"title":"Days"}},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/templates/templates/analytics/compare":{"post":{"tags":["Template Analytics","templates-analytics"],"summary":"Compare templates","description":"Compare multiple templates side-by-side","operationId":"compare_templates_api_v1_templates_templates_analytics_compare_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"template_ids","in":"query","required":true,"schema":{"type":"array","items":{"type":"string","format":"uuid"},"min_items":2,"max_items":10,"title":"Template Ids"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/expenses/expenses/organization":{"get":{"tags":["Expenses","expenses"],"summary":"Get organization expense dashboard","description":"Get aggregated expense dashboard for entire organization","operationId":"get_organization_expense_dashboard_api_v1_expenses_expenses_organization_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"default":30,"title":"Days"}},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/expenses/expenses/templates/{template_id}":{"get":{"tags":["Expenses","expenses"],"summary":"Get template expense history","description":"Get expense history for a specific template","operationId":"get_template_expense_history_api_v1_expenses_expenses_templates__template_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Template Id"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"default":90,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/expenses/expenses/optimization":{"get":{"tags":["Expenses","expenses"],"summary":"Get optimization suggestions","description":"Get cost optimization recommendations","operationId":"get_optimization_suggestions_api_v1_expenses_expenses_optimization_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/expenses/expenses/alerts/check":{"post":{"tags":["Expenses","expenses"],"summary":"Check cost limits and alerts","description":"Check if organization has exceeded cost limits","operationId":"check_cost_limits_api_v1_expenses_expenses_alerts_check_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"month","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":12,"minimum":1},{"type":"null"}],"title":"Month"}},{"name":"year","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":2024},{"type":"null"}],"title":"Year"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/secrets/":{"get":{"tags":["Secrets"],"summary":"List Secrets","description":"List all secrets in organization\n\n**Description:** Retrieves encrypted secrets without decrypted values for security. Use GET /secrets/{id}/value to retrieve decrypted value.\n\n**Query Parameters:**\n- `skip` (int, default: 0): Offset for pagination\n- `limit` (int, default: 100, max: 100): Records per page\n- `scope` (SecretScope, optional): Filter by scope (global, chatbot, contact, etc.)\n- `chatbot_id` (UUID, optional): Filter by chatbot association\n- `is_active` (boolean, optional): Filter by active status\n\n**Returns:** Array of SecretInDB objects (encrypted values not included)\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `500`: Database error","operationId":"list_secrets_api_v1_secrets__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":100,"title":"Limit"}},{"name":"scope","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/SecretScope"},{"type":"null"}],"title":"Scope"}},{"name":"chatbot_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Chatbot Id"}},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SecretInDB"},"title":"Response List Secrets Api V1 Secrets  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Secrets"],"summary":"Create Secret","description":"Create a new encrypted secret\n\n**Description:** Creates an encrypted secret for storing API keys, passwords, and sensitive data. Values are encrypted using Fernet or specified provider.\n\n**Request Body:**\n- `name` (string, required): Internal identifier (no spaces)\n- `display_name` (string, required): Human-readable name\n- `value` (string, required): Plaintext value (will be encrypted)\n- `scope` (SecretScope, required): Scope (global, chatbot, contact, etc.)\n- `chatbot_id` (UUID, optional): Associated chatbot ID if scope is chatbot\n- `description` (string, optional): Purpose/notes\n- `encryption_provider` (string, default: \"fernet\"): Encryption algorithm\n\n**Returns:** Created SecretInDB (encrypted)\n\n**Permissions Required:** org_admin or super_admin role\n\n**Possible Errors:**\n- `400`: Invalid secret data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `500`: Encryption error","operationId":"create_secret_api_v1_secrets__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecretCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecretInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/secrets/{secret_id}":{"get":{"tags":["Secrets"],"summary":"Get Secret","description":"Get secret by ID (without decrypted value)\n\n**Description:** Retrieves secret metadata without exposing encrypted value. Use GET /secrets/{id}/value to retrieve the decrypted value.\n\n**Path Parameters:**\n- `secret_id` (UUID, required): Unique secret identifier\n\n**Returns:** SecretInDB object (without decrypted value)\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: Secret not found\n- `500`: Database error","operationId":"get_secret_api_v1_secrets__secret_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"secret_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Secret Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecretInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Secrets"],"summary":"Update Secret","description":"Update secret\n\n**Description:** Updates secret metadata and/or value. If value is provided, it will be re-encrypted.\n\n**Path Parameters:**\n- `secret_id` (UUID, required): Unique secret identifier\n\n**Request Body (all optional):**\n- `display_name` (string): New display name\n- `description` (string): Updated description\n- `value` (string): New plaintext value (will be re-encrypted)\n- `is_active` (boolean): Active status\n\n**Returns:** Updated SecretInDB\n\n**Permissions Required:** org_admin or super_admin role\n\n**Possible Errors:**\n- `400`: Invalid update data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Secret not found\n- `500`: Encryption error","operationId":"update_secret_api_v1_secrets__secret_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"secret_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Secret Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecretUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecretInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Secrets"],"summary":"Delete Secret","description":"Delete secret permanently\n\n**Description:** Permanently removes an encrypted secret. ‚ö†Ô∏è WARNING: This is a hard delete and cannot be reversed.\n\n**Path Parameters:**\n- `secret_id` (UUID, required): Unique secret identifier\n\n**Returns:** 204 No Content on success\n\n**Permissions Required:** org_admin or super_admin role\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Secret not found\n- `500`: Database error","operationId":"delete_secret_api_v1_secrets__secret_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"secret_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Secret Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/secrets/{secret_id}/value":{"get":{"tags":["Secrets"],"summary":"Get Secret Value","description":"Get secret with decrypted value\n\nRequires: org_admin or super_admin role\n\n‚ö†Ô∏è SECURITY WARNING: This endpoint returns the decrypted value.\nUse with caution and ensure proper access controls.","operationId":"get_secret_value_api_v1_secrets__secret_id__value_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"secret_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Secret Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecretWithValue"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/secrets/{secret_id}/rotate":{"post":{"tags":["Secrets"],"summary":"Rotate Secret","description":"Rotate secret value (update with new encrypted value)\n\n**Description:** Specialized endpoint for rotating credentials without changing metadata. Encrypts new value and preserves all other secret properties.\n\n**Path Parameters:**\n- `secret_id` (UUID, required): Unique secret identifier\n\n**Query Parameters:**\n- `new_value` (string, required): New plaintext value to encrypt\n\n**Returns:** Updated SecretInDB with new encrypted value\n\n**Permissions Required:** org_admin or super_admin role\n\n**Possible Errors:**\n- `400`: Empty new_value\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: Secret not found\n- `500`: Encryption error","operationId":"rotate_secret_api_v1_secrets__secret_id__rotate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"secret_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Secret Id"}},{"name":"new_value","in":"query","required":true,"schema":{"type":"string","minLength":1,"description":"New plaintext value","title":"New Value"},"description":"New plaintext value"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecretInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/secrets/stats":{"get":{"tags":["Secrets"],"summary":"Get Secrets Stats","description":"Get secrets statistics for organization","operationId":"get_secrets_stats_api_v1_secrets_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Secrets Stats Api V1 Secrets Stats Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/database/test-connection":{"post":{"tags":["Database"],"summary":"Test Database Connection","description":"Test database connection and validate configuration.\n\nValidates connection configuration and attempts to connect to the database.\nSupports multiple database engines with automatic driver detection.\n\n**Path Parameters:** None\n\n**Request Body:**\n- config (DatabaseConfig, required):\n  - connection_type (str): 'postgresql', 'mysql', 'mongodb', 'sqlite'\n  - host (str): Database server hostname\n  - port (int): Connection port\n  - database (str): Database name\n  - username (str, optional): Authentication user\n  - password (str, optional): Authentication password\n  - extra_params (dict, optional): Engine-specific options\n\n**Database Engine Support:**\n- **PostgreSQL**: psycopg2-binary required, supports connection pooling\n- **MySQL**: pymysql required, supports TLS\n- **MongoDB**: pymongo required, supports replica sets\n- **SQLite**: Built-in, no extra packages needed\n\n**Returns:**\n- success (bool): Connection successful\n- message (str): Connection status message\n- connection_time (float): Time taken in milliseconds\n- server_version (str): Database server version\n\n**Example Request:**\n```json\n{\n    \"config\": {\n        \"connection_type\": \"postgresql\",\n        \"host\": \"postgres.example.com\",\n        \"port\": 5432,\n        \"database\": \"pytake_prod\",\n        \"username\": \"app_user\",\n        \"password\": \"secure_password\"\n    }\n}\n```\n\n**Example Response (Success):**\n```json\n{\n    \"success\": true,\n    \"message\": \"Connection successful\",\n    \"connection_time\": 245.5,\n    \"server_version\": \"PostgreSQL 15.2\"\n}\n```\n\n**Example Response (Failure):**\n```json\n{\n    \"success\": false,\n    \"message\": \"Connection refused - host unreachable\",\n    \"connection_time\": 30000,\n    \"server_version\": null\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Note: All users can test database connections\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 422: Unprocessable Entity (missing required fields in config)\n- 500: Server error (database connection error, driver not found)\n- 504: Gateway Timeout (connection timeout exceeded)","operationId":"test_database_connection_api_v1_database_test_connection_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestConnectionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestConnectionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/database/execute-query":{"post":{"tags":["Database"],"summary":"Execute Database Query","description":"Execute database query against configured database connection.\n\nExecutes SQL or NoSQL queries with support for caching, parameter binding,\nand configurable timeouts. Enforces security restrictions on dangerous operations.\n\n**Path Parameters:** None\n\n**Request Body:**\n- config (DatabaseConfig, required):\n  - connection_type (str): 'postgresql', 'mysql', 'mongodb', 'sqlite'\n  - host (str): Database server hostname\n  - port (int): Connection port\n  - database (str): Database name\n  - username (str, optional): Authentication user\n  - password (str, optional): Authentication password\n- query (str, required): SQL or NoSQL query string\n- query_type (str): 'SELECT', 'INSERT', 'UPDATE', 'DELETE', 'CUSTOM'\n- parameters (dict, optional): Query parameter bindings (prevents SQL injection)\n- timeout (int): Query timeout 1-300 seconds (default: 30)\n- cache (bool): Enable query result caching (default: false)\n- cache_key (str, optional): Custom cache identifier\n- cache_ttl (int, optional): Cache TTL in seconds (10-86400)\n- max_rows (int): Maximum rows to return (1-10000, default: 1000)\n\n**Security Notes:**\n- Always use parameters for user input (prevents SQL injection)\n- DROP and TRUNCATE operations are blocked for data protection\n- DELETE without WHERE clause raises warning\n- Results limited to max_rows (prevents memory exhaustion)\n- Query timeout enforced (1-300 seconds)\n- Credentials are not logged or cached\n\n**Cache Behavior:**\n- Enable cache for frequently accessed, rarely changing data\n- Cache TTL: 10 seconds to 24 hours\n- Cached results returned immediately without re-executing\n- from_cache field indicates if result is from cache\n\n**Query Types:**\n- **SELECT**: Returns data array with row count\n- **INSERT/UPDATE/DELETE**: Returns affected row count\n- **CUSTOM**: Any valid SQL/NoSQL command\n\n**SQL Example (PostgreSQL):**\n```sql\nSELECT id, name, email FROM users WHERE organization_id = %(org_id)s ORDER BY created_at DESC LIMIT %(limit)s\n```\n\n**SQL Parameters:**\n```json\n{\n    \"org_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"limit\": 100\n}\n```\n\n**MongoDB Format:**\n```json\n{\n    \"collection\": \"conversations\",\n    \"operation\": \"find\",\n    \"filter\": {\"organization_id\": \"550e8400-e29b-41d4-a716-446655440000\"},\n    \"projection\": {\"id\": 1, \"name\": 1, \"status\": 1},\n    \"limit\": 100\n}\n```\n\n**Returns:**\n- success (bool): Query executed successfully\n- data (array): Array of result rows (SELECT only, null for other operations)\n- row_count (int): Number of rows affected (INSERT/UPDATE/DELETE) or returned (SELECT)\n- execution_time (float): Query execution time in milliseconds\n- from_cache (bool): Result served from cache\n- error (str, optional): Error message on failure\n\n**Example Request (SELECT):**\n```json\n{\n    \"config\": {\n        \"connection_type\": \"postgresql\",\n        \"host\": \"postgres.example.com\",\n        \"port\": 5432,\n        \"database\": \"pytake\",\n        \"username\": \"app_user\",\n        \"password\": \"secure_password\"\n    },\n    \"query\": \"SELECT id, name FROM organizations WHERE status = %(status)s LIMIT %(limit)s\",\n    \"query_type\": \"SELECT\",\n    \"parameters\": {\"status\": \"active\", \"limit\": 50},\n    \"timeout\": 30,\n    \"cache\": true,\n    \"cache_ttl\": 300,\n    \"max_rows\": 1000\n}\n```\n\n**Example Response (Success):**\n```json\n{\n    \"result\": {\n        \"success\": true,\n        \"data\": [\n            {\"id\": \"550e8400-e29b-41d4-a716-446655440000\", \"name\": \"Acme Corp\"},\n            {\"id\": \"550e8400-e29b-41d4-a716-446655440001\", \"name\": \"Tech Startup\"}\n        ],\n        \"row_count\": 2,\n        \"execution_time\": 125.4,\n        \"from_cache\": false\n    },\n    \"warnings\": null\n}\n```\n\n**Example Response (Delete Warning):**\n```json\n{\n    \"result\": {\n        \"success\": true,\n        \"row_count\": 150,\n        \"execution_time\": 542.8,\n        \"from_cache\": false\n    },\n    \"warnings\": [\"DELETE without WHERE clause - this will delete ALL rows!\"]\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user (org_admin recommended)\n- Note: Query execution follows database user permissions\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 422: Unprocessable Entity (invalid query or missing required fields)\n- 400: Bad Request (DROP/TRUNCATE operation blocked)\n- 500: Server error (query execution error, connection failure)\n- 504: Gateway Timeout (query timeout exceeded)","operationId":"execute_database_query_api_v1_database_execute_query_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExecuteQueryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExecuteQueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai-assistant/models":{"get":{"tags":["AI Assistant"],"summary":"List Ai Models","description":"List all available AI models (predefined + custom).\n\nReturns available AI models from multiple providers with pricing information,\ncapabilities, and compatibility details for flow generation and analysis.\n\n**Path Parameters:** None\n\n**Query Parameters:**\n- provider (str, optional): Filter by provider ('openai', 'anthropic', 'google', etc.)\n- recommended (bool): Show only recommended models for flow generation (default: false)\n- include_deprecated (bool): Include models no longer supported (default: false)\n\n**Returns:**\n- models (array): List of available AI models:\n  - id (str): Unique model identifier\n  - name (str): Human-readable model name\n  - provider (str): Provider name ('openai', 'anthropic', etc.)\n  - max_tokens (int): Maximum context window size\n  - cost_per_1k_input (float): Input token cost per 1K tokens\n  - cost_per_1k_output (float): Output token cost per 1K tokens\n  - capabilities (array): Supported capabilities ['text', 'vision', 'tool_use']\n  - is_custom (bool): Custom model created for organization\n  - is_deprecated (bool): Model no longer supported\n- total (int): Total number of models\n\n**Example Request (Recommended OpenAI):**\n```\nGET /api/v1/ai-assistant/models?provider=openai&recommended=true\nAuthorization: Bearer eyJhbGc...\n```\n\n**Example Response:**\n```json\n{\n    \"models\": [\n        {\n            \"id\": \"gpt-4o\",\n            \"name\": \"GPT-4 Optimized\",\n            \"provider\": \"openai\",\n            \"max_tokens\": 128000,\n            \"cost_per_1k_input\": 0.005,\n            \"cost_per_1k_output\": 0.015,\n            \"capabilities\": [\"text\", \"vision\", \"tool_use\"],\n            \"is_custom\": false,\n            \"is_deprecated\": false\n        },\n        {\n            \"id\": \"gpt-4o-mini\",\n            \"name\": \"GPT-4 Mini (Fast)\",\n            \"provider\": \"openai\",\n            \"max_tokens\": 128000,\n            \"cost_per_1k_input\": 0.00015,\n            \"cost_per_1k_output\": 0.0006,\n            \"capabilities\": [\"text\"],\n            \"is_custom\": false,\n            \"is_deprecated\": false\n        }\n    ],\n    \"total\": 2\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Note: All organization members can list available models\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 500: Server error (model list retrieval failure)","operationId":"list_ai_models_api_v1_ai_assistant_models_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"provider","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by provider (openai, anthropic)","title":"Provider"},"description":"Filter by provider (openai, anthropic)"},{"name":"recommended","in":"query","required":false,"schema":{"type":"boolean","description":"Show only recommended models","default":false,"title":"Recommended"},"description":"Show only recommended models"},{"name":"include_deprecated","in":"query","required":false,"schema":{"type":"boolean","description":"Include deprecated models","default":false,"title":"Include Deprecated"},"description":"Include deprecated models"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIModelListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-assistant/models/{model_id}":{"get":{"tags":["AI Assistant"],"summary":"Get Model Details","description":"Get detailed information about a specific AI model.\n\nRetrieve comprehensive details about a model including pricing, capabilities,\nusage limits, and recommended use cases for flow generation.\n\n**Path Parameters:**\n- model_id (str, required): Model identifier (e.g., 'gpt-4o', 'claude-3-opus-20240229')\n\n**Query Parameters:** None\n\n**Returns:**\n- id (str): Model identifier\n- name (str): Human-readable name\n- provider (str): Provider ('openai', 'anthropic', etc.)\n- description (str): Detailed model description\n- max_tokens (int): Maximum context window\n- training_date (str): Latest training data cutoff\n- cost_per_1k_input (float): Input token pricing\n- cost_per_1k_output (float): Output token pricing\n- capabilities (array): Supported features\n- recommended_for (array): Best use cases\n- rate_limits (object): API rate limits\n- release_date (str): Model release date\n\n**Example Request:**\n```\nGET /api/v1/ai-assistant/models/claude-3-opus-20240229\nAuthorization: Bearer eyJhbGc...\n```\n\n**Example Response:**\n```json\n{\n    \"id\": \"claude-3-opus-20240229\",\n    \"name\": \"Claude 3 Opus\",\n    \"provider\": \"anthropic\",\n    \"description\": \"Most capable Claude model for complex reasoning\",\n    \"max_tokens\": 200000,\n    \"training_date\": \"2024-02-29\",\n    \"cost_per_1k_input\": 0.015,\n    \"cost_per_1k_output\": 0.075,\n    \"capabilities\": [\"text\", \"vision\", \"tool_use\", \"reasoning\"],\n    \"recommended_for\": [\"flow_generation\", \"complex_analysis\", \"improvement_suggestions\"],\n    \"rate_limits\": {\"requests_per_minute\": 100, \"tokens_per_minute\": 40000},\n    \"release_date\": \"2024-02-29\"\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 404: Not Found (model_id doesn't exist)\n- 500: Server error (model details retrieval failure)","operationId":"get_model_details_api_v1_ai_assistant_models__model_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"model_id","in":"path","required":true,"schema":{"type":"string","title":"Model Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-assistant/models/custom":{"post":{"tags":["AI Assistant"],"summary":"Create Custom Model","description":"Create a custom AI model for your organization.\n\nRegister fine-tuned models or custom model implementations not available\nin the predefined list. Useful for proprietary or specialized models.\n\n**Path Parameters:** None\n\n**Request Body:**\n- model_id (str, required): Unique model identifier (e.g., 'custom_gpt4_finetuned')\n- name (str, required): Human-readable model name\n- provider (str, required): Provider ('openai', 'anthropic', 'custom')\n- description (str, optional): Model description and use cases\n- max_tokens (int, required): Context window size\n- cost_per_1k_input (float, optional): Input token cost (default: 0)\n- cost_per_1k_output (float, optional): Output token cost (default: 0)\n- capabilities (array): Supported capabilities ['text', 'vision', 'tool_use']\n- api_endpoint (str, optional): Custom API endpoint URL\n- authentication_method (str, optional): 'bearer_token', 'api_key', 'custom'\n\n**Returns:**\n- id (str): Generated custom model ID\n- organization_id (str): Organization that owns the model\n- is_custom (bool): Always true\n- created_at (datetime): Creation timestamp\n- (all request body fields)\n\n**Example Request:**\n```json\n{\n    \"model_id\": \"gpt4_medical_finetuned\",\n    \"name\": \"GPT-4 Medical Specialized\",\n    \"provider\": \"openai\",\n    \"description\": \"Fine-tuned for medical flow generation\",\n    \"max_tokens\": 8192,\n    \"cost_per_1k_input\": 0.01,\n    \"cost_per_1k_output\": 0.03,\n    \"capabilities\": [\"text\"],\n    \"api_endpoint\": \"https://api.openai.com/v1/chat/completions\"\n}\n```\n\n**Example Response:**\n```json\n{\n    \"id\": \"custom_gpt4_med_20250115\",\n    \"organization_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"model_id\": \"gpt4_medical_finetuned\",\n    \"name\": \"GPT-4 Medical Specialized\",\n    \"provider\": \"openai\",\n    \"description\": \"Fine-tuned for medical flow generation\",\n    \"max_tokens\": 8192,\n    \"cost_per_1k_input\": 0.01,\n    \"cost_per_1k_output\": 0.03,\n    \"capabilities\": [\"text\"],\n    \"is_custom\": true,\n    \"created_at\": \"2025-01-15T10:30:00Z\"\n}\n```\n\n**Permissions:**\n- Requires: org_admin or super_admin role\n- Scoped to: Organization (organization_id from current user)\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 403: Forbidden (insufficient permissions - not org_admin)\n- 422: Unprocessable Entity (invalid model configuration)\n- 409: Conflict (model_id already exists in organization)\n- 500: Server error (model creation failure)","operationId":"create_custom_model_api_v1_ai_assistant_models_custom_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIModelCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIModel"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai-assistant/settings":{"get":{"tags":["AI Assistant"],"summary":"Get Ai Settings","description":"Get AI Assistant settings for the organization.\n\nRetrieve current configuration including enabled providers, API keys,\nand default model selection for flow generation features.\n\n**Path Parameters:** None\n\n**Query Parameters:** None\n\n**Returns:**\n- enabled (bool): Whether AI Assistant is active\n- default_provider (str): Primary provider ('openai', 'anthropic')\n- default_model (str): Default model for flow generation\n- openai_api_key (str, optional): OpenAI API key (masked in response)\n- anthropic_api_key (str, optional): Anthropic API key (masked in response)\n- temperature (float): Generation temperature (0-2)\n- max_tokens (int): Maximum output tokens\n- enable_flow_generation (bool): Allow AI flow generation\n- enable_improvements (bool): Allow improvement suggestions\n- created_at (datetime): Configuration creation date\n\nOr **null** if not configured\n\n**Example Request:**\n```\nGET /api/v1/ai-assistant/settings\nAuthorization: Bearer eyJhbGc...\n```\n\n**Example Response (Configured):**\n```json\n{\n    \"enabled\": true,\n    \"default_provider\": \"anthropic\",\n    \"default_model\": \"claude-3-opus-20240229\",\n    \"openai_api_key\": \"sk-***...\",\n    \"anthropic_api_key\": \"sk-ant-***...\",\n    \"temperature\": 0.7,\n    \"max_tokens\": 2048,\n    \"enable_flow_generation\": true,\n    \"enable_improvements\": true,\n    \"created_at\": \"2025-01-01T00:00:00Z\"\n}\n```\n\n**Example Response (Not Configured):**\n```json\nnull\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Note: Any user can view organization's AI settings (keys are masked)\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 404: Organization not found\n- 500: Server error (settings retrieval failure)","operationId":"get_ai_settings_api_v1_ai_assistant_settings_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/AIAssistantSettings"},{"type":"null"}],"title":"Response Get Ai Settings Api V1 Ai Assistant Settings Get"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["AI Assistant"],"summary":"Update Ai Settings","description":"Update AI Assistant settings for the organization.\n\nConfigure API keys, select default provider and model, and enable/disable\nAI features like flow generation and improvement suggestions.\n\n**Path Parameters:** None\n\n**Request Body:**\n- enabled (bool, optional): Enable/disable AI Assistant\n- default_provider (str, optional): Provider choice ('openai', 'anthropic')\n- default_model (str, optional): Model identifier for generation\n- openai_api_key (str, optional): OpenAI API key\n- anthropic_api_key (str, optional): Anthropic API key\n- temperature (float, optional): Generation temperature (0-2, default: 0.7)\n- max_tokens (int, optional): Max output tokens (default: 2048)\n- enable_flow_generation (bool, optional): Allow AI flow generation\n- enable_improvements (bool, optional): Allow improvement suggestions\n\n**Returns:** Updated AIAssistantSettings object\n\n**Example Request:**\n```json\n{\n    \"enabled\": true,\n    \"default_provider\": \"anthropic\",\n    \"default_model\": \"claude-3-opus-20240229\",\n    \"anthropic_api_key\": \"sk-ant-...\",\n    \"temperature\": 0.8,\n    \"max_tokens\": 4096,\n    \"enable_flow_generation\": true,\n    \"enable_improvements\": true\n}\n```\n\n**Example Response:**\n```json\n{\n    \"enabled\": true,\n    \"default_provider\": \"anthropic\",\n    \"default_model\": \"claude-3-opus-20240229\",\n    \"openai_api_key\": null,\n    \"anthropic_api_key\": \"sk-ant-***...\",\n    \"temperature\": 0.8,\n    \"max_tokens\": 4096,\n    \"enable_flow_generation\": true,\n    \"enable_improvements\": true,\n    \"created_at\": \"2025-01-15T10:30:00Z\"\n}\n```\n\n**Permissions:**\n- Requires: org_admin or super_admin role\n- Scoped to: Organization (organization_id from current user)\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 403: Forbidden (insufficient permissions - not org_admin)\n- 404: Organization not found\n- 422: Unprocessable Entity (invalid settings configuration)\n- 500: Server error (settings update failure)","operationId":"update_ai_settings_api_v1_ai_assistant_settings_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIAssistantSettingsUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIAssistantSettings"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai-assistant/test":{"post":{"tags":["AI Assistant"],"summary":"Test Ai Connection","description":"Test AI connection with current organization settings.\n\nValidates configured API keys and makes a minimal test call to verify\nconnectivity and quota availability. Uses smallest/cheapest models to\nminimize costs.\n\n**Path Parameters:** None\n\n**Request Body:** None\n\n**Returns:**\n- success (bool): Connection successful\n- provider (str): Provider that was tested\n- message (str): Status message\n- model_tested (str): Model used for test\n- latency_ms (int, optional): Response latency\n\n**Example Request:**\n```\nPOST /api/v1/ai-assistant/test\nAuthorization: Bearer eyJhbGc...\n```\n\n**Example Response (Success - Anthropic):**\n```json\n{\n    \"success\": true,\n    \"provider\": \"anthropic\",\n    \"message\": \"Connection successful! Anthropic API is working.\",\n    \"model_tested\": \"claude-3-5-haiku-20241022\"\n}\n```\n\n**Example Response (Success - OpenAI):**\n```json\n{\n    \"success\": true,\n    \"provider\": \"openai\",\n    \"message\": \"Connection successful! OpenAI API is working.\",\n    \"model_tested\": \"gpt-4o-mini\"\n}\n```\n\n**Example Response (Auth Error):**\n```json\n{\n    \"success\": false,\n    \"error\": \"401\",\n    \"message\": \"Invalid API key. Please check your credentials.\"\n}\n```\n\n**Example Response (Quota Error):**\n```json\n{\n    \"success\": false,\n    \"error\": \"402\",\n    \"message\": \"API quota exceeded. Please check your billing.\"\n}\n```\n\n**Permissions:**\n- Requires: org_admin or super_admin role\n- Scoped to: Organization (organization_id from current user)\n\n**Error Codes:**\n- 400: Bad Request (not configured or missing API key)\n- 401: Unauthorized (invalid API key/credentials)\n- 402: Payment Required (quota exceeded, billing issue)\n- 403: Forbidden (insufficient permissions - not org_admin)\n- 404: Organization not found\n- 429: Too Many Requests (rate limit exceeded)\n- 500: Server error (connection test failure)\n- 504: Gateway Timeout (API response timeout)","operationId":"test_ai_connection_api_v1_ai_assistant_test_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai-assistant/generate-flow":{"post":{"tags":["AI Assistant"],"summary":"Generate Flow","description":"Generate a chatbot flow from natural language description using AI.\n\nCreates a complete conversational flow based on user description.\nRequires AI Assistant to be configured and enabled.\n\n**Path Parameters:** None\n\n**Request Body:**\n- description (str, required): What the flow should do in natural language\n- industry (str, optional): Industry context ('ecommerce', 'support', 'banking')\n- language (str, optional): Flow language (default: 'pt-BR')\n- chatbot_id (str, optional): Target chatbot UUID (for direct assignment)\n- clarifications (object, optional): User answers to clarification questions\n\n**Returns:**\n- flow_id (str): Generated flow UUID\n- name (str): Auto-generated flow name\n- canvas_data (object): Flow diagram and node structure\n- variables (object): Variables extracted from description\n- success (bool): Generation successful\n- message (str): Generation summary\n- cost_estimate (float, optional): Estimated API cost\n\n**Example Request:**\n```json\n{\n    \"description\": \"Create a flow for customer support. Start by asking what issue they have, then route to specialized agent based on category (technical, billing, or general).\",\n    \"industry\": \"support\",\n    \"language\": \"pt-BR\",\n    \"chatbot_id\": \"550e8400-e29b-41d4-a716-446655440000\"\n}\n```\n\n**Example Response:**\n```json\n{\n    \"flow_id\": \"550e8400-e29b-41d4-a716-446655440001\",\n    \"name\": \"Customer Support Router - Generated\",\n    \"canvas_data\": {\n        \"nodes\": [\n            {\"id\": \"start\", \"type\": \"start\", \"data\": {\"label\": \"Start\"}},\n            {\"id\": \"ask_issue\", \"type\": \"text\", \"data\": {\"message\": \"What issue are you experiencing?\"}},\n            {\"id\": \"route\", \"type\": \"router\", \"data\": {\"routes\": [\"technical\", \"billing\", \"general\"]}}\n        ]\n    },\n    \"variables\": {\n        \"issue_type\": {\"type\": \"string\"},\n        \"priority\": {\"type\": \"string\"}\n    },\n    \"success\": true,\n    \"message\": \"Flow generated successfully with 12 nodes and 3 decision points\",\n    \"cost_estimate\": 0.0456\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Scoped to: Organization (organization_id from current user)\n- Note: Requires configured AI Assistant settings\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 400: Bad Request (AI Assistant not configured)\n- 404: Chatbot not found (if chatbot_id provided)\n- 422: Unprocessable Entity (invalid description or parameters)\n- 500: Server error (flow generation failed)","operationId":"generate_flow_api_v1_ai_assistant_generate_flow_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateFlowRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateFlowResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai-assistant/suggest-improvements":{"post":{"tags":["AI Assistant"],"summary":"Suggest Improvements","description":"Analyze a chatbot flow and suggest AI-powered improvements.\n\nExamines flow structure, logic, and user experience to provide actionable\nrecommendations for enhancement. Can focus on specific areas of interest.\n\n**Path Parameters:** None\n\n**Request Body:**\n- flow_id (str, required): Target flow UUID\n- focus_areas (array, optional): Areas to focus on\n  - 'user_experience': UX and conversation flow\n  - 'routing_logic': Decision points and conditions\n  - 'error_handling': Error cases and fallbacks\n  - 'performance': Optimization opportunities\n  - 'security': Security and data validation\n- max_suggestions (int, optional): Number of suggestions (default: 5)\n\n**Returns:**\n- flow_id (str): Analyzed flow UUID\n- suggestions (array): List of improvement suggestions:\n  - category (str): Type of improvement\n  - severity (str): 'critical', 'high', 'medium', 'low'\n  - current_state (str): Current implementation\n  - recommended_change (str): Suggested change\n  - benefit (str): Expected benefit\n  - estimated_impact (str): 'high', 'medium', 'low'\n- score (float): Current flow quality score (0-100)\n- estimated_score_after (float): Projected score after improvements\n\n**Example Request:**\n```json\n{\n    \"flow_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"focus_areas\": [\"user_experience\", \"routing_logic\"],\n    \"max_suggestions\": 5\n}\n```\n\n**Example Response:**\n```json\n{\n    \"flow_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"suggestions\": [\n        {\n            \"category\": \"user_experience\",\n            \"severity\": \"high\",\n            \"current_state\": \"Single text input for complex issue categorization\",\n            \"recommended_change\": \"Use button options for issue categories (Technical, Billing, General)\",\n            \"benefit\": \"Reduces user confusion and improves routing accuracy\",\n            \"estimated_impact\": \"high\"\n        },\n        {\n            \"category\": \"error_handling\",\n            \"severity\": \"medium\",\n            \"current_state\": \"No fallback for unrecognized input\",\n            \"recommended_change\": \"Add clarification message and retry logic\",\n            \"benefit\": \"Prevents conversation drops and improves resolution rate\",\n            \"estimated_impact\": \"medium\"\n        }\n    ],\n    \"score\": 72.5,\n    \"estimated_score_after\": 87.3\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n- Scoped to: Organization (flow must belong to user's organization)\n- Note: Requires configured AI Assistant settings\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 400: Bad Request (invalid flow_id format)\n- 404: Not Found (flow doesn't exist or not owned by org)\n- 422: Unprocessable Entity (invalid focus_areas)\n- 500: Server error (analysis failed)","operationId":"suggest_improvements_api_v1_ai_assistant_suggest_improvements_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuggestImprovementsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuggestImprovementsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai-assistant/templates/categories":{"get":{"tags":["AI Assistant"],"summary":"List Template Categories","description":"List all available flow template categories.\n\nReturns categories of pre-built templates for different industries and use cases.\n\n**Path Parameters:** None\n\n**Query Parameters:** None\n\n**Returns:** Array of template categories:\n- id (str): Category identifier\n- name (str): Category display name\n- description (str): Category description\n- icon (str, optional): Category icon name\n- templates_count (int): Number of templates in category\n\n**Example Request:**\n```\nGET /api/v1/ai-assistant/templates/categories\nAuthorization: Bearer eyJhbGc...\n```\n\n**Example Response:**\n```json\n[\n    {\n        \"id\": \"ecommerce\",\n        \"name\": \"E-commerce\",\n        \"description\": \"Templates for online retail and shopping\",\n        \"icon\": \"shopping-cart\",\n        \"templates_count\": 8\n    },\n    {\n        \"id\": \"customer_support\",\n        \"name\": \"Customer Support\",\n        \"description\": \"Templates for helpdesk and customer service\",\n        \"icon\": \"headset\",\n        \"templates_count\": 12\n    },\n    {\n        \"id\": \"healthcare\",\n        \"name\": \"Healthcare\",\n        \"description\": \"Templates for medical and health services\",\n        \"icon\": \"heart\",\n        \"templates_count\": 6\n    }\n]\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 500: Server error (category list retrieval failure)","operationId":"list_template_categories_api_v1_ai_assistant_templates_categories_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TemplateCategory"},"type":"array","title":"Response List Template Categories Api V1 Ai Assistant Templates Categories Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai-assistant/templates":{"get":{"tags":["AI Assistant"],"summary":"List Templates","description":"List available flow templates with filtering and pagination.\n\nBrowse pre-built templates for different industries, use cases, and complexity levels.\n\n**Path Parameters:** None\n\n**Query Parameters:**\n- category (str, optional): Filter by category ID (e.g., 'ecommerce', 'customer_support')\n- complexity (str, optional): Filter by complexity ('simple', 'intermediate', 'advanced')\n- tags (str, optional): Comma-separated tag filters (e.g., 'billing,returns')\n- language (str, optional): Template language (default: 'pt-BR')\n- skip (int): Number of templates to skip (default: 0)\n- limit (int): Number of templates to return (1-100, default: 50)\n\n**Returns:**\n- total (int): Total templates matching filters\n- items (array): List of templates:\n  - id (str): Template unique ID\n  - name (str): Template name\n  - description (str): Template description\n  - category (str): Category ID\n  - complexity (str): Complexity level\n  - industry (str): Target industry\n  - language (str): Template language\n  - tags (array): Template tags\n  - nodes_count (int): Number of flow nodes\n  - preview_image (str, optional): Template thumbnail\n  - use_count (int): Number of times imported\n- categories (array): All available categories (for UI dropdown)\n\n**Example Request:**\n```\nGET /api/v1/ai-assistant/templates?category=customer_support&complexity=intermediate&language=pt-BR&limit=20\nAuthorization: Bearer eyJhbGc...\n```\n\n**Example Response:**\n```json\n{\n    \"total\": 156,\n    \"items\": [\n        {\n            \"id\": \"tpl_support_basic\",\n            \"name\": \"Basic Support Flow\",\n            \"description\": \"Simple customer support with issue categorization\",\n            \"category\": \"customer_support\",\n            \"complexity\": \"simple\",\n            \"industry\": \"support\",\n            \"language\": \"pt-BR\",\n            \"tags\": [\"support\", \"routing\", \"basic\"],\n            \"nodes_count\": 8,\n            \"use_count\": 1247\n        },\n        {\n            \"id\": \"tpl_support_escalation\",\n            \"name\": \"Support with Escalation\",\n            \"description\": \"Multi-level support with escalation to specialists\",\n            \"category\": \"customer_support\",\n            \"complexity\": \"intermediate\",\n            \"industry\": \"support\",\n            \"language\": \"pt-BR\",\n            \"tags\": [\"support\", \"routing\", \"escalation\", \"queue\"],\n            \"nodes_count\": 15,\n            \"use_count\": 892\n        }\n    ],\n    \"categories\": [\n        {\"id\": \"ecommerce\", \"name\": \"E-commerce\"},\n        {\"id\": \"customer_support\", \"name\": \"Customer Support\"}\n    ]\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 400: Bad Request (invalid filter parameters)\n- 500: Server error (template list retrieval failure)","operationId":"list_templates_api_v1_ai_assistant_templates_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by category","title":"Category"},"description":"Filter by category"},{"name":"complexity","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by complexity","title":"Complexity"},"description":"Filter by complexity"},{"name":"tags","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by tags (comma-separated)","title":"Tags"},"description":"Filter by tags (comma-separated)"},{"name":"language","in":"query","required":false,"schema":{"type":"string","description":"Language filter","default":"pt-BR","title":"Language"},"description":"Language filter"},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-assistant/templates/{template_id}":{"get":{"tags":["AI Assistant"],"summary":"Get Template","description":"Get detailed information about a specific template.\n\nRetrieve complete template details including flow canvas data, variables,\nand instructions for customization.\n\n**Path Parameters:**\n- template_id (str, required): Template unique identifier\n\n**Query Parameters:** None\n\n**Returns:**\n- id (str): Template ID\n- name (str): Template name\n- description (str): Detailed description\n- category (str): Category ID\n- complexity (str): Complexity level\n- language (str): Template language\n- tags (array): Template tags\n- flow_data (object): Complete flow structure:\n  - canvas_data (object): Flow diagram nodes and connections\n  - variables (object): Template variables and types\n  - settings (object): Flow configuration\n- instructions (string): User instructions for customization\n- customization_tips (array): Tips for tailoring template\n- preview_image (str, optional): Template thumbnail\n- use_count (int): Import count\n- created_date (datetime): Template creation date\n\n**Example Request:**\n```\nGET /api/v1/ai-assistant/templates/tpl_support_escalation\nAuthorization: Bearer eyJhbGc...\n```\n\n**Example Response:**\n```json\n{\n    \"id\": \"tpl_support_escalation\",\n    \"name\": \"Support with Escalation\",\n    \"description\": \"Multi-level support routing with escalation to specialized agents\",\n    \"category\": \"customer_support\",\n    \"complexity\": \"intermediate\",\n    \"language\": \"pt-BR\",\n    \"tags\": [\"support\", \"escalation\", \"routing\"],\n    \"flow_data\": {\n        \"canvas_data\": {\n            \"nodes\": [\n                {\"id\": \"start\", \"type\": \"start\", \"position\": [0, 0]},\n                {\"id\": \"ask_issue\", \"type\": \"text\", \"data\": {\"message\": \"How can we help?\"}}\n            ],\n            \"edges\": [{\"source\": \"start\", \"target\": \"ask_issue\"}]\n        },\n        \"variables\": {\n            \"issue_type\": {\"type\": \"string\", \"required\": true},\n            \"priority\": {\"type\": \"enum\", \"values\": [\"low\", \"medium\", \"high\"]}\n        },\n        \"settings\": {\"max_duration\": 3600, \"allow_handoff\": true}\n    },\n    \"instructions\": \"Customize the issue categories and agent queues...\",\n    \"customization_tips\": [\"Update issue categories to match your business\", \"Configure agent teams\"],\n    \"use_count\": 892,\n    \"created_date\": \"2024-06-15T00:00:00Z\"\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 404: Not Found (template_id doesn't exist)\n- 500: Server error (template retrieval failure)","operationId":"get_template_api_v1_ai_assistant_templates__template_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","title":"Template Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowTemplateDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-assistant/templates/search/{query}":{"get":{"tags":["AI Assistant"],"summary":"Search Templates","description":"Search flow templates by keyword query.\n\nFind relevant templates using semantic search across template names,\ndescriptions, tags, and use cases.\n\n**Path Parameters:**\n- query (str, required): Search term (e.g., 'billing', 'returns', 'escalation')\n\n**Query Parameters:**\n- language (str, optional): Language filter (default: 'pt-BR')\n- limit (int, optional): Max results (1-50, default: 10)\n\n**Returns:** Array of matching templates:\n- id (str): Template ID\n- name (str): Template name\n- description (str): Template description\n- category (str): Category ID\n- complexity (str): Complexity level\n- tags (array): Template tags\n- relevance_score (float, optional): Search relevance (0-1)\n\n**Example Request:**\n```\nGET /api/v1/ai-assistant/templates/search/billing?language=pt-BR&limit=5\nAuthorization: Bearer eyJhbGc...\n```\n\n**Example Response:**\n```json\n[\n    {\n        \"id\": \"tpl_billing_inquiry\",\n        \"name\": \"Billing Inquiry Handler\",\n        \"description\": \"Handle billing questions and invoice retrieval\",\n        \"category\": \"customer_support\",\n        \"complexity\": \"simple\",\n        \"tags\": [\"billing\", \"invoices\", \"payment\"],\n        \"relevance_score\": 0.95\n    },\n    {\n        \"id\": \"tpl_billing_dispute\",\n        \"name\": \"Billing Dispute Resolution\",\n        \"description\": \"Manage billing disputes and refund requests\",\n        \"category\": \"customer_support\",\n        \"complexity\": \"intermediate\",\n        \"tags\": [\"billing\", \"disputes\", \"refunds\"],\n        \"relevance_score\": 0.88\n    }\n]\n```\n\n**Permissions:**\n- Requires: Authenticated user (any role)\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 422: Unprocessable Entity (invalid query or parameters)\n- 500: Server error (search failure)","operationId":"search_templates_api_v1_ai_assistant_templates_search__query__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"query","in":"path","required":true,"schema":{"type":"string","title":"Query"}},{"name":"language","in":"query","required":false,"schema":{"type":"string","default":"pt-BR","title":"Language"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FlowTemplate"},"title":"Response Search Templates Api V1 Ai Assistant Templates Search  Query  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai-assistant/templates/{template_id}/import":{"post":{"tags":["AI Assistant"],"summary":"Import Template","description":"Import a template into a chatbot as a new flow.\n\nCreate a new flow in a chatbot by importing a pre-built template.\nOptionally customize template variables and naming before creation.\n\n**Path Parameters:**\n- template_id (str, required): Template unique identifier\n\n**Request Body:**\n- chatbot_id (str, required): Target chatbot UUID\n- flow_name (str, optional): Custom name for imported flow (uses template name if not provided)\n- customize_variables (bool, optional): Apply variable name customizations (default: false)\n- variable_mappings (object, optional): Map template variables to custom names\n\n**Returns:** Created FlowInDB object:\n- id (str): New flow UUID\n- organization_id (str): Organization ID\n- chatbot_id (str): Parent chatbot UUID\n- name (str): Flow name\n- description (str): Flow description\n- canvas_data (object): Flow diagram\n- variables (object): Flow variables\n- is_active (bool): Flow enabled status\n- created_at (datetime): Creation timestamp\n- use_count (int): Import count (incremented)\n\n**Example Request:**\n```json\n{\n    \"chatbot_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"flow_name\": \"My Custom Support Flow\",\n    \"customize_variables\": true,\n    \"variable_mappings\": {\n        \"issue_type\": \"problem_category\",\n        \"priority\": \"severity_level\"\n    }\n}\n```\n\n**Example Response:**\n```json\n{\n    \"id\": \"550e8400-e29b-41d4-a716-446655440001\",\n    \"organization_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"chatbot_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"name\": \"My Custom Support Flow\",\n    \"description\": \"Multi-level support routing with escalation\",\n    \"canvas_data\": {...},\n    \"variables\": {\n        \"problem_category\": {\"type\": \"string\"},\n        \"severity_level\": {\"type\": \"enum\"}\n    },\n    \"is_active\": true,\n    \"created_at\": \"2025-01-15T14:32:00Z\",\n    \"updated_at\": \"2025-01-15T14:32:00Z\"\n}\n```\n\n**Permissions:**\n- Requires: Authenticated user (agent or higher)\n- Scoped to: Organization (chatbot must belong to user's organization)\n\n**Error Codes:**\n- 401: Unauthorized (invalid or missing token)\n- 404: Not Found (template_id or chatbot_id doesn't exist)\n- 422: Unprocessable Entity (invalid variable mappings)\n- 409: Conflict (flow name already exists in chatbot)\n- 500: Server error (import failure)","operationId":"import_template_api_v1_ai_assistant_templates__template_id__import_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","title":"Template Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportTemplateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}/skills":{"get":{"tags":["Users","Agent Skills"],"summary":"List User Skills","description":"List all skills for a specific user/agent\n\n**Path Parameters:**\n- `user_id` (UUID, required): Unique user identifier\n\n**Returns:** Array of AgentSkill objects\n\n**Permissions Required:** Any authenticated user\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `404`: User not found\n- `500`: Database error","operationId":"list_user_skills_api_v1_users__user_id__skills_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AgentSkill"},"title":"Response List User Skills Api V1 Users  User Id  Skills Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Users","Agent Skills"],"summary":"Add User Skill","description":"Add a skill to a user/agent\n\n**Path Parameters:**\n- `user_id` (UUID, required): Unique user identifier\n\n**Request Body:**\n- `skill_name` (string, required): Skill identifier (e.g., \"technical_support\", \"sales\")\n- `proficiency_level` (integer, optional): Proficiency level 1-5\n\n**Returns:** Created AgentSkill object\n\n**Permissions Required:** org_admin role\n\n**Possible Errors:**\n- `400`: Invalid skill data\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: User not found\n- `409`: Skill already assigned\n- `500`: Database error","operationId":"add_user_skill_api_v1_users__user_id__skills_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentSkillCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentSkill"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Users","Agent Skills"],"summary":"Replace User Skills","description":"Replace all skills for a user (bulk update)","operationId":"replace_user_skills_api_v1_users__user_id__skills_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AgentSkillCreate"},"title":"Skills"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AgentSkill"},"title":"Response Replace User Skills Api V1 Users  User Id  Skills Put"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}/skills/{skill_id}":{"put":{"tags":["Users","Agent Skills"],"summary":"Update User Skill","operationId":"update_user_skill_api_v1_users__user_id__skills__skill_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}},{"name":"skill_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Skill Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentSkillUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentSkill"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Users","Agent Skills"],"summary":"Delete User Skill","description":"Remove a skill from a user/agent\n\n**Path Parameters:**\n- `user_id` (UUID, required): Unique user identifier\n- `skill_id` (UUID, required): Unique skill identifier to remove\n\n**Returns:** 204 No Content on success\n\n**Permissions Required:** org_admin role\n\n**Possible Errors:**\n- `401`: User not authenticated\n- `403`: Insufficient permissions\n- `404`: User or skill not found\n- `500`: Database error","operationId":"delete_user_skill_api_v1_users__user_id__skills__skill_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}},{"name":"skill_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Skill Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/skills/available":{"get":{"tags":["Users","Agent Skills"],"summary":"List Available Skills","description":"List all unique skills used in the organization","operationId":"list_available_skills_api_v1_users_skills_available_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"type":"string"},"type":"array","title":"Response List Available Skills Api V1 Users Skills Available Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/api/v1/alerts/critical":{"get":{"tags":["Alerts","alerts"],"summary":"Get critical alerts","description":"Get all CRITICAL severity alerts for organization","operationId":"get_critical_alerts_api_v1_api_v1_alerts_critical_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"include_resolved","in":"query","required":false,"schema":{"type":"boolean","description":"Include resolved alerts","default":false,"title":"Include Resolved"},"description":"Include resolved alerts"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CriticalAlertsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts":{"get":{"tags":["Alerts","alerts"],"summary":"List alerts","description":"Get all alerts for organization with pagination","operationId":"list_alerts_api_v1_api_v1_alerts_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Skip N alerts","default":0,"title":"Skip"},"description":"Skip N alerts"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Limit to N alerts","default":20,"title":"Limit"},"description":"Limit to N alerts"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts/{alert_id}":{"get":{"tags":["Alerts","alerts"],"summary":"Get alert by ID","description":"Get a specific alert by ID","operationId":"get_alert_api_v1_api_v1_alerts__alert_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"alert_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Alert Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts/{alert_id}/acknowledge":{"post":{"tags":["Alerts","alerts"],"summary":"Acknowledge alert","description":"Mark alert as acknowledged by user","operationId":"acknowledge_alert_api_v1_api_v1_alerts__alert_id__acknowledge_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"alert_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Alert Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertAcknowledge"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts/{alert_id}/escalate":{"post":{"tags":["Alerts","alerts"],"summary":"Escalate alert","description":"Escalate alert to next level","operationId":"escalate_alert_api_v1_api_v1_alerts__alert_id__escalate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"alert_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Alert Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertEscalate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts/{alert_id}/resolve":{"post":{"tags":["Alerts","alerts"],"summary":"Resolve alert","description":"Manually resolve an alert","operationId":"resolve_alert_api_v1_api_v1_alerts__alert_id__resolve_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"alert_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Alert Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertResolve"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts/organization/{organization_id}/summary":{"get":{"tags":["Alerts","alerts"],"summary":"Get alert summary","description":"Get alert statistics for organization","operationId":"get_alert_summary_api_v1_api_v1_alerts_organization__organization_id__summary_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"organization_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Organization Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertSummary"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts-dashboard/search":{"get":{"tags":["Alerts Dashboard","alerts-dashboard"],"summary":"Search alerts with advanced filters","description":"Search and filter alerts by severity, status, type, date, and text","operationId":"search_alerts_api_v1_api_v1_alerts_dashboard_search_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Comma-separated severities (critical,high,warning,info)","title":"Severity"},"description":"Comma-separated severities (critical,high,warning,info)"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Comma-separated statuses (open,acknowledged,resolved,escalated)","title":"Status"},"description":"Comma-separated statuses (open,acknowledged,resolved,escalated)"},{"name":"alert_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Comma-separated alert types","title":"Alert Type"},"description":"Comma-separated alert types"},{"name":"template_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filter by template ID","title":"Template Id"},"description":"Filter by template ID"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search in title and description","title":"Search"},"description":"Search in title and description"},{"name":"created_after","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Alerts created after this date","title":"Created After"},"description":"Alerts created after this date"},{"name":"created_before","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Alerts created before this date","title":"Created Before"},"description":"Alerts created before this date"},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Search Alerts Api V1 Api V1 Alerts Dashboard Search Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts-dashboard/stats/overview":{"get":{"tags":["Alerts Dashboard","alerts-dashboard"],"summary":"Get alert overview statistics","description":"Returns counts and percentages by severity and status","operationId":"get_alert_stats_overview_api_v1_api_v1_alerts_dashboard_stats_overview_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Alert Stats Overview Api V1 Api V1 Alerts Dashboard Stats Overview Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/api/v1/alerts-dashboard/stats/trends":{"get":{"tags":["Alerts Dashboard","alerts-dashboard"],"summary":"Get alert trends over time","description":"Returns alert creation and resolution trends by day","operationId":"get_alert_trends_api_v1_api_v1_alerts_dashboard_stats_trends_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":1,"description":"Number of days to analyze","default":7,"title":"Days"},"description":"Number of days to analyze"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Alert Trends Api V1 Api V1 Alerts Dashboard Stats Trends Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts-dashboard/stats/severity-distribution":{"get":{"tags":["Alerts Dashboard","alerts-dashboard"],"summary":"Get alert severity distribution","description":"Returns percentage breakdown of alerts by severity","operationId":"get_severity_distribution_api_v1_api_v1_alerts_dashboard_stats_severity_distribution_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Severity Distribution Api V1 Api V1 Alerts Dashboard Stats Severity Distribution Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/api/v1/alerts-dashboard/stats/status-distribution":{"get":{"tags":["Alerts Dashboard","alerts-dashboard"],"summary":"Get alert status distribution","description":"Returns breakdown of alerts by current status","operationId":"get_status_distribution_api_v1_api_v1_alerts_dashboard_stats_status_distribution_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Status Distribution Api V1 Api V1 Alerts Dashboard Stats Status Distribution Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/api/v1/alerts-dashboard/stats/type-distribution":{"get":{"tags":["Alerts Dashboard","alerts-dashboard"],"summary":"Get alert type distribution","description":"Returns breakdown of alerts by type","operationId":"get_type_distribution_api_v1_api_v1_alerts_dashboard_stats_type_distribution_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Type Distribution Api V1 Api V1 Alerts Dashboard Stats Type Distribution Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/api/v1/alerts-dashboard/recent":{"get":{"tags":["Alerts Dashboard","alerts-dashboard"],"summary":"Get recent alerts","description":"Returns most recently created/updated alerts","operationId":"get_recent_alerts_api_v1_api_v1_alerts_dashboard_recent_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Recent Alerts Api V1 Api V1 Alerts Dashboard Recent Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts-dashboard/escalated":{"get":{"tags":["Alerts Dashboard","alerts-dashboard"],"summary":"Get escalated alerts","description":"Returns alerts that have been escalated","operationId":"get_escalated_alerts_api_v1_api_v1_alerts_dashboard_escalated_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Escalated Alerts Api V1 Api V1 Alerts Dashboard Escalated Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts-dashboard/unacknowledged":{"get":{"tags":["Alerts Dashboard","alerts-dashboard"],"summary":"Get unacknowledged alerts","description":"Returns alerts that haven't been acknowledged yet","operationId":"get_unacknowledged_alerts_api_v1_api_v1_alerts_dashboard_unacknowledged_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Unacknowledged Alerts Api V1 Api V1 Alerts Dashboard Unacknowledged Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts-search/advanced":{"get":{"tags":["Alerts Search","alerts-search"],"summary":"Advanced Alert Search","description":"Search alerts with complex filtering, full-text search, sorting","operationId":"advanced_search_api_v1_api_v1_alerts_search_advanced_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"organization_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Organization Id"}},{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Comma-separated severity levels","title":"Severity"},"description":"Comma-separated severity levels"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Comma-separated statuses","title":"Status"},"description":"Comma-separated statuses"},{"name":"alert_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Comma-separated alert types","title":"Alert Type"},"description":"Comma-separated alert types"},{"name":"template_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Template Id"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Full-text search in title/description","title":"Search"},"description":"Full-text search in title/description"},{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Date From"}},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Date To"}},{"name":"escalated","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Escalated"}},{"name":"unacknowledged","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Unacknowledged"}},{"name":"sort_by","in":"query","required":false,"schema":{"$ref":"#/components/schemas/SortField","default":"created_at"}},{"name":"sort_order","in":"query","required":false,"schema":{"$ref":"#/components/schemas/SortOrder","default":"desc"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts-search/timeline":{"get":{"tags":["Alerts Search","alerts-search"],"summary":"Alert Timeline","description":"Get alert creation timeline for specified days","operationId":"get_timeline_api_v1_api_v1_alerts_search_timeline_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"organization_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Organization Id"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":1,"default":7,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts-search/stats":{"get":{"tags":["Alerts Search","alerts-search"],"summary":"Alert Statistics","description":"Comprehensive alert statistics and rates","operationId":"get_stats_api_v1_api_v1_alerts_search_stats_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"organization_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Organization Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/alerts-search/{alert_id}/similar":{"get":{"tags":["Alerts Search","alerts-search"],"summary":"Find Similar Alerts","description":"Find similar alerts based on template, severity, and date","operationId":"get_similar_alerts_api_v1_api_v1_alerts_search__alert_id__similar_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"alert_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Alert Id"}},{"name":"organization_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Organization Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":20,"minimum":1,"default":5,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/conversations/{conversation_id}/window":{"get":{"tags":["Conversation Windows","conversation_windows"],"summary":"Get conversation window","description":"Get the 24-hour message window for a conversation","operationId":"get_conversation_window_api_v1_api_v1_conversations__conversation_id__window_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationWindowResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/conversations/{conversation_id}/window/status":{"get":{"tags":["Conversation Windows","conversation_windows"],"summary":"Check window status","description":"Check if a conversation is within the 24-hour message window","operationId":"check_window_status_api_v1_api_v1_conversations__conversation_id__window_status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationWindowStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/conversations/{conversation_id}/window/extend":{"post":{"tags":["Conversation Windows","conversation_windows"],"summary":"Extend window","description":"Manually extend a conversation's 24-hour window (admin only)","operationId":"extend_window_api_v1_api_v1_conversations__conversation_id__window_extend_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationWindowExtend"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationWindowResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/conversations/organization/{org_id}/windows/active":{"get":{"tags":["Conversation Windows","conversation_windows"],"summary":"List active windows","description":"List all active conversation windows for an organization","operationId":"list_active_windows_api_v1_api_v1_conversations_organization__org_id__windows_active_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Org Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationWindowListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/conversations/organization/{org_id}/windows/expiring-soon":{"get":{"tags":["Conversation Windows","conversation_windows"],"summary":"List expiring windows","description":"List windows expiring within the next N hours","operationId":"list_expiring_windows_api_v1_api_v1_conversations_organization__org_id__windows_expiring_soon_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"org_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Org Id"}},{"name":"hours_threshold","in":"query","required":false,"schema":{"type":"integer","default":2,"title":"Hours Threshold"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ConversationWindowResponse"},"title":"Response List Expiring Windows Api V1 Api V1 Conversations Organization  Org Id  Windows Expiring Soon Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/api/v1/conversations/validate-message":{"post":{"tags":["Conversation Windows","conversation_windows"],"summary":"Validate message","description":"Validate a message against 24-hour window rules","operationId":"validate_message_api_v1_api_v1_conversations_validate_message_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageValidationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageValidationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ws/stats":{"get":{"tags":["WebSocket"],"summary":"Get Websocket Stats","description":"Get WebSocket statistics\n\nReturns:\n{\n  \"total_connections\": 5,\n  \"total_rooms\": 3,\n  \"rooms\": {\n    \"campaign:uuid1\": 2,\n    \"campaign:uuid2\": 3\n  }\n}","operationId":"get_websocket_stats_api_v1_ws_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/debug/conversations/metrics-debug":{"get":{"tags":["Debug"],"summary":"Conversations Metrics Debug","description":"Echo query params for debugging frontend requests to /conversations/metrics.","operationId":"conversations_metrics_debug_api_v1_debug_conversations_metrics_debug_get","parameters":[{"name":"department_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Department Id"}},{"name":"queue_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Queue Id"}},{"name":"since","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Since"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/flows/":{"post":{"tags":["Flow Builder"],"summary":"Create Flow","description":"Create a new flow.\n\nCreates a new conversation flow within a chatbot. A flow contains nodes and edges\nthat define the conversation logic (React Flow format).\n\n**Path Parameters:** None\n\n**Request Body:**\n- name (str, required): Flow name\n- description (str, optional): Flow description\n- chatbot_id (UUID, required): Chatbot this flow belongs to\n- is_main (bool, optional): Mark as main entry flow\n- is_fallback (bool, optional): Mark as fallback flow for errors\n- canvas_data (object, optional): React Flow canvas data with nodes and edges\n\n**Returns:**\n- Flow object with id, name, description, canvas_data, timestamps\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization\n\n**Error Codes:**\n- 400: Bad Request (invalid data)\n- 401: Unauthorized\n- 404: Chatbot not found\n- 500: Server error","operationId":"create_flow_api_v1_flows__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/app__schemas__flow__FlowCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Flow"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Flow Builder"],"summary":"List Flows By Chatbot","description":"List all flows for a chatbot.\n\nReturns all conversation flows for a specific chatbot in the organization.\n\n**Query Parameters:**\n- chatbot_id (UUID, required): Chatbot to list flows for\n\n**Returns:**\n- List of Flow objects with metadata\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization\n\n**Error Codes:**\n- 401: Unauthorized\n- 404: Chatbot not found\n- 500: Server error","operationId":"list_flows_by_chatbot_api_v1_flows__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","description":"Chatbot ID to list flows for","title":"Chatbot Id"},"description":"Chatbot ID to list flows for"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowList"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/flows/{flow_id}":{"get":{"tags":["Flow Builder"],"summary":"Get Flow","description":"Get a specific flow.\n\nReturns a single flow with its complete canvas data (nodes and edges).\n\n**Path Parameters:**\n- flow_id (UUID): Flow ID\n\n**Returns:**\n- Flow object with all details\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization\n\n**Error Codes:**\n- 401: Unauthorized\n- 404: Flow not found\n- 500: Server error","operationId":"get_flow_api_v1_flows__flow_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Flow"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Flow Builder"],"summary":"Update Flow","description":"Update a flow.\n\nUpdates flow configuration and/or canvas data (nodes and edges).\nCan be used to save flow design changes from the builder.\n\n**Path Parameters:**\n- flow_id (UUID): Flow ID\n\n**Request Body:**\n- name (str, optional): New flow name\n- description (str, optional): New description\n- is_main (bool, optional): Change main flow status\n- is_fallback (bool, optional): Change fallback status\n- canvas_data (object, optional): Updated React Flow canvas data\n\n**Returns:**\n- Updated Flow object\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization\n\n**Error Codes:**\n- 400: Bad Request (invalid data)\n- 401: Unauthorized\n- 404: Flow not found\n- 500: Server error","operationId":"update_flow_api_v1_flows__flow_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlowUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Flow"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Flow Builder"],"summary":"Delete Flow","description":"Delete a flow (soft delete).\n\nRemoves a flow from the system. The flow is soft-deleted and can be restored.\n\n**Path Parameters:**\n- flow_id (UUID): Flow ID\n\n**Returns:** HTTP 204 No Content\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization\n\n**Error Codes:**\n- 401: Unauthorized\n- 404: Flow not found\n- 500: Server error","operationId":"delete_flow_api_v1_flows__flow_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/flows/chatbots/{chatbot_id}/main":{"get":{"tags":["Flow Builder"],"summary":"Get Main Flow","description":"Get main entry flow for a chatbot.\n\nReturns the primary flow that starts conversations for a chatbot.\n\n**Path Parameters:**\n- chatbot_id (UUID): Chatbot ID\n\n**Returns:**\n- Main Flow object\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization\n\n**Error Codes:**\n- 401: Unauthorized\n- 404: Chatbot or main flow not found\n- 500: Server error","operationId":"get_main_flow_api_v1_flows_chatbots__chatbot_id__main_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chatbot Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Flow"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/flows/chatbots/{chatbot_id}/fallback":{"get":{"tags":["Flow Builder"],"summary":"Get Fallback Flow","description":"Get fallback flow for a chatbot.\n\nReturns the fallback flow used when conversations can't be routed to a main flow.\n\n**Path Parameters:**\n- chatbot_id (UUID): Chatbot ID\n\n**Returns:**\n- Fallback Flow object\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization\n\n**Error Codes:**\n- 401: Unauthorized\n- 404: Chatbot or fallback flow not found\n- 500: Server error","operationId":"get_fallback_flow_api_v1_flows_chatbots__chatbot_id__fallback_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chatbot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chatbot Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Flow"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/flows/{flow_id}/activate":{"post":{"tags":["Flow Builder"],"summary":"Activate Flow","description":"Activate a flow.\n\nEnables a specific flow so it can be used in conversations.\nA flow can be independently activated/deactivated from its parent chatbot.\n\n**Path Parameters:**\n- flow_id (UUID): Flow ID\n\n**Returns:**\n- Updated Flow object with is_active=true\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization\n\n**Error Codes:**\n- 401: Unauthorized\n- 404: Flow not found\n- 500: Server error","operationId":"activate_flow_api_v1_flows__flow_id__activate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Flow"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/flows/{flow_id}/deactivate":{"post":{"tags":["Flow Builder"],"summary":"Deactivate Flow","description":"Deactivate a flow.\n\nDisables a specific flow. The flow cannot be used in conversations\nwhile inactive, but all its data is preserved.\n\n**Path Parameters:**\n- flow_id (UUID): Flow ID\n\n**Returns:**\n- Updated Flow object with is_active=false\n\n**Permissions:**\n- Requires: Authenticated user\n- Scoped to: Organization\n\n**Error Codes:**\n- 401: Unauthorized\n- 404: Flow not found\n- 500: Server error","operationId":"deactivate_flow_api_v1_flows__flow_id__deactivate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"flow_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Flow Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Flow"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/roles/initialize":{"post":{"tags":["RBAC","RBAC"],"summary":"Initialize system roles","description":"Initialize default system roles for organization","operationId":"initialize_system_roles_api_v1_roles_initialize_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/roles/":{"get":{"tags":["RBAC","RBAC"],"summary":"List roles","description":"List all roles for organization","operationId":"list_roles_api_v1_roles__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleListResponse"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["RBAC","RBAC"],"summary":"Create custom role","description":"Create a new custom role for the organization","operationId":"create_role_api_v1_roles__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/roles/{role_id}":{"get":{"tags":["RBAC","RBAC"],"summary":"Get role","description":"Get role by ID with permissions","operationId":"get_role_api_v1_roles__role_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Role Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["RBAC","RBAC"],"summary":"Update role","description":"Update role metadata (name, description)","operationId":"update_role_api_v1_roles__role_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Role Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["RBAC","RBAC"],"summary":"Delete custom role","description":"Delete a custom role (cannot delete system roles)","operationId":"delete_role_api_v1_roles__role_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Role Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/roles/{role_id}/permissions":{"post":{"tags":["RBAC","RBAC"],"summary":"Assign permissions to role","description":"Replace all permissions for a role","operationId":"assign_permissions_api_v1_roles__role_id__permissions_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Role Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RolePermissionAssign"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["RBAC","RBAC"],"summary":"Get role permissions","description":"List all permissions assigned to a role","operationId":"get_role_permissions_api_v1_roles__role_id__permissions_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Role Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PermissionInDB"},"title":"Response Get Role Permissions Api V1 Roles  Role Id  Permissions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/permissions/":{"post":{"tags":["RBAC","RBAC"],"summary":"Create permission","description":"Create a new permission","operationId":"create_permission_api_v1_permissions__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["RBAC","RBAC"],"summary":"List permissions","description":"List all permissions available (system + organization)","operationId":"list_permissions_api_v1_permissions__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"category","in":"query","required":false,"schema":{"type":"string","description":"Filter by category","title":"Category"},"description":"Filter by category"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/permissions/{permission_id}":{"get":{"tags":["RBAC","RBAC"],"summary":"Get permission","description":"Get permission by ID","operationId":"get_permission_api_v1_permissions__permission_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"permission_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Permission Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionInDB"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/permissions/assign-to-user":{"post":{"tags":["RBAC","RBAC"],"summary":"Assign role to user","description":"Assign a role to a user in the organization","operationId":"assign_role_to_user_api_v1_permissions_assign_to_user_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRoleAssign"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Assign Role To User Api V1 Permissions Assign To User Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/campaigns":{"get":{"tags":["Campaigns"],"summary":"List Campaigns","description":"List campaigns for organization (mock data)","operationId":"list_campaigns_api_v1_campaigns_get","parameters":[{"name":"organization_id","in":"query","required":true,"schema":{"type":"string","title":"Organization Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/webhooks/meta/verify":{"get":{"tags":["Webhooks"],"summary":"Verify Webhook","description":"Webhook verification endpoint for Meta Cloud API\n\nMeta sends GET request with:\n- hub.mode=subscribe\n- hub.challenge=random_string\n- hub.verify_token=your_verify_token\n\nResponse: Echo back hub.challenge if verify_token matches","operationId":"verify_webhook_api_v1_webhooks_meta_verify_get","parameters":[{"name":"hub.mode","in":"query","required":false,"schema":{"type":"string","title":"Hub.Mode"}},{"name":"hub.challenge","in":"query","required":false,"schema":{"type":"string","title":"Hub.Challenge"}},{"name":"hub.verify_token","in":"query","required":false,"schema":{"type":"string","title":"Hub.Verify Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/webhooks/meta/":{"post":{"tags":["Webhooks"],"summary":"Receive Webhook","description":"Receive webhook events from Meta Cloud API\n\nEvents processed:\n- message_status: sent, delivered, read, failed\n- messages: incoming messages (future)\n\nSecurity:\n- Verifies HMAC SHA256 signature\n- Validates request structure","operationId":"receive_webhook_api_v1_webhooks_meta__post","parameters":[{"name":"X-Hub-Signature-256","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Hub-Signature-256"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/webhooks/meta/test":{"post":{"tags":["Webhooks"],"summary":"Test Webhook","description":"Test endpoint for webhook processing without signature verification\n\nUsage:\nPOST /webhooks/meta/test\n{\n  \"object\": \"whatsapp_business_account\",\n  \"entry\": [{\n    \"changes\": [{\n      \"field\": \"messages\",\n      \"value\": {\n        \"statuses\": [{\n          \"id\": \"wamid.xxx\",\n          \"status\": \"delivered\",\n          \"timestamp\": \"1234567890\",\n          \"recipient_id\": \"5511999999999\"\n        }]\n      }\n    }]\n  }]\n}","operationId":"test_webhook_api_v1_webhooks_meta_test_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dev/ai/conversations":{"get":{"tags":["AI Assistant"],"summary":"Get Ai Conversations","description":"Mock endpoint to get AI conversations","operationId":"get_ai_conversations_api_v1_dev_ai_conversations_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/dev/ai/chat":{"post":{"tags":["AI Assistant"],"summary":"Chat With Ai","description":"Mock endpoint for AI chat","operationId":"chat_with_ai_api_v1_dev_ai_chat_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Message"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dev/contacts":{"get":{"tags":["Contacts"],"summary":"Get Contacts","description":"Mock endpoint to get contacts","operationId":"get_contacts_api_v1_dev_contacts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/dev/analytics/metrics":{"get":{"tags":["Analytics"],"summary":"Get Analytics Metrics","description":"Mock endpoint to get analytics metrics","operationId":"get_analytics_metrics_api_v1_dev_analytics_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/graphql":{"get":{"summary":"Handle Http Get","operationId":"handle_http_get_graphql_get","responses":{"200":{"description":"The GraphiQL integrated development environment.","content":{"application/json":{"schema":{}}}},"404":{"description":"Not found if GraphiQL or query via GET are not enabled."}}},"post":{"summary":"Handle Http Post","operationId":"handle_http_post_graphql_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AIAssistantSettings":{"properties":{"enabled":{"type":"boolean","title":"Enabled","description":"Enable/disable AI Flow Assistant feature","default":false},"default_provider":{"$ref":"#/components/schemas/AIProvider","description":"Default AI provider (openai or anthropic)","default":"anthropic"},"openai_api_key":{"anyOf":[{"type":"string","minLength":10},{"type":"null"}],"title":"Openai Api Key","description":"OpenAI API key"},"anthropic_api_key":{"anyOf":[{"type":"string","minLength":10},{"type":"null"}],"title":"Anthropic Api Key","description":"Anthropic API key"},"model":{"type":"string","title":"Model","description":"AI model to use","default":"claude-3-5-sonnet-20241022"},"max_tokens":{"type":"integer","maximum":200000.0,"minimum":1024.0,"title":"Max Tokens","description":"Maximum tokens for AI responses","default":8192},"temperature":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Temperature","description":"AI temperature (0-1, higher = more creative)","default":0.7}},"type":"object","title":"AIAssistantSettings","description":"AI Assistant settings stored in organization.settings['ai_assistant']\n\nExample:\n{\n    \"ai_assistant\": {\n        \"enabled\": true,\n        \"default_provider\": \"anthropic\",\n        \"openai_api_key\": \"sk-...\",\n        \"anthropic_api_key\": \"sk-ant-...\",\n        \"model\": \"claude-3-5-sonnet-20241022\",\n        \"max_tokens\": 8192,\n        \"temperature\": 0.7\n    }\n}"},"AIAssistantSettingsUpdate":{"properties":{"enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Enabled"},"default_provider":{"anyOf":[{"$ref":"#/components/schemas/AIProvider"},{"type":"null"}]},"openai_api_key":{"anyOf":[{"type":"string","minLength":10},{"type":"null"}],"title":"Openai Api Key"},"anthropic_api_key":{"anyOf":[{"type":"string","minLength":10},{"type":"null"}],"title":"Anthropic Api Key"},"provider":{"anyOf":[{"$ref":"#/components/schemas/AIProvider"},{"type":"null"}]},"api_key":{"anyOf":[{"type":"string","minLength":10},{"type":"null"}],"title":"Api Key"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model"},"max_tokens":{"anyOf":[{"type":"integer","maximum":200000.0,"minimum":1024.0},{"type":"null"}],"title":"Max Tokens"},"temperature":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Temperature"}},"type":"object","title":"AIAssistantSettingsUpdate","description":"Schema for updating AI Assistant settings"},"AIModel":{"properties":{"model_id":{"type":"string","title":"Model Id","description":"Model identifier (e.g., 'gpt-4o', 'claude-sonnet-4.5')"},"provider":{"$ref":"#/components/schemas/AIProvider","description":"AI provider"},"name":{"type":"string","title":"Name","description":"Display name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Model description"},"context_window":{"type":"integer","title":"Context Window","description":"Maximum context window in tokens"},"max_output_tokens":{"type":"integer","title":"Max Output Tokens","description":"Maximum output tokens"},"input_cost_per_million":{"type":"number","title":"Input Cost Per Million","description":"Cost per million input tokens (USD)"},"output_cost_per_million":{"type":"number","title":"Output Cost Per Million","description":"Cost per million output tokens (USD)"},"supports_vision":{"type":"boolean","title":"Supports Vision","description":"Supports image inputs","default":false},"supports_tools":{"type":"boolean","title":"Supports Tools","description":"Supports function calling/tools","default":true},"is_custom":{"type":"boolean","title":"Is Custom","description":"Is custom model (user-added)","default":false},"is_deprecated":{"type":"boolean","title":"Is Deprecated","description":"Is deprecated","default":false},"release_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Release Date","description":"Release date (YYYY-MM-DD)"},"id":{"type":"string","title":"Id","description":"Unique model ID in database"},"organization_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Organization Id","description":"Organization ID (null for global models)"},"created_at":{"type":"string","title":"Created At"}},"type":"object","required":["model_id","provider","name","context_window","max_output_tokens","input_cost_per_million","output_cost_per_million","id","created_at"],"title":"AIModel","description":"Schema for AI model with ID"},"AIModelCreate":{"properties":{"model_id":{"type":"string","title":"Model Id","description":"Model identifier (e.g., 'gpt-4o', 'claude-sonnet-4.5')"},"provider":{"$ref":"#/components/schemas/AIProvider","description":"AI provider"},"name":{"type":"string","title":"Name","description":"Display name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Model description"},"context_window":{"type":"integer","title":"Context Window","description":"Maximum context window in tokens"},"max_output_tokens":{"type":"integer","title":"Max Output Tokens","description":"Maximum output tokens"},"input_cost_per_million":{"type":"number","title":"Input Cost Per Million","description":"Cost per million input tokens (USD)"},"output_cost_per_million":{"type":"number","title":"Output Cost Per Million","description":"Cost per million output tokens (USD)"},"supports_vision":{"type":"boolean","title":"Supports Vision","description":"Supports image inputs","default":false},"supports_tools":{"type":"boolean","title":"Supports Tools","description":"Supports function calling/tools","default":true},"is_custom":{"type":"boolean","title":"Is Custom","description":"Is custom model (user-added)","default":false},"is_deprecated":{"type":"boolean","title":"Is Deprecated","description":"Is deprecated","default":false},"release_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Release Date","description":"Release date (YYYY-MM-DD)"}},"type":"object","required":["model_id","provider","name","context_window","max_output_tokens","input_cost_per_million","output_cost_per_million"],"title":"AIModelCreate","description":"Schema for creating custom AI models"},"AIModelListResponse":{"properties":{"models":{"items":{"$ref":"#/components/schemas/AIModel"},"type":"array","title":"Models","description":"List of available models"},"total":{"type":"integer","title":"Total","description":"Total number of models"}},"type":"object","required":["models","total"],"title":"AIModelListResponse","description":"Response for listing AI models"},"AIProvider":{"type":"string","enum":["openai","anthropic"],"title":"AIProvider","description":"Supported AI providers"},"AgentAvailable":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"full_name":{"type":"string","title":"Full Name"},"email":{"type":"string","format":"email","title":"Email"},"department_id":{"type":"string","format":"uuid","title":"Department Id"},"agent_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Status","description":"available, busy, away, offline"},"active_conversations_count":{"type":"integer","minimum":0.0,"title":"Active Conversations Count","description":"Number of active conversations assigned to agent"},"capacity_remaining":{"type":"integer","minimum":0.0,"title":"Capacity Remaining","description":"Remaining capacity (max - active)"}},"type":"object","required":["id","full_name","email","department_id","active_conversations_count","capacity_remaining"],"title":"AgentAvailable","description":"Schema for available agents in a department"},"AgentMetrics":{"properties":{"total_agents":{"type":"integer","title":"Total Agents","default":0},"agents_online":{"type":"integer","title":"Agents Online","default":0},"agents_away":{"type":"integer","title":"Agents Away","default":0},"agents_offline":{"type":"integer","title":"Agents Offline","default":0},"top_performers":{"items":{"$ref":"#/components/schemas/AgentPerformance"},"type":"array","title":"Top Performers"},"avg_conversations_per_agent":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Conversations Per Agent"},"avg_response_time_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Response Time Seconds"}},"type":"object","title":"AgentMetrics","description":"Agent analytics"},"AgentPerformance":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"agent_name":{"type":"string","title":"Agent Name"},"total_conversations":{"type":"integer","title":"Total Conversations","default":0},"active_conversations":{"type":"integer","title":"Active Conversations","default":0},"closed_conversations":{"type":"integer","title":"Closed Conversations","default":0},"avg_response_time_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Response Time Seconds"},"avg_resolution_time_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Resolution Time Seconds"},"satisfaction_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Satisfaction Score"},"messages_sent":{"type":"integer","title":"Messages Sent","default":0},"online_time_hours":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Online Time Hours"}},"type":"object","required":["agent_id","agent_name"],"title":"AgentPerformance","description":"Individual agent performance metrics"},"AgentSkill":{"properties":{"skill_name":{"type":"string","maxLength":100,"minLength":1,"title":"Skill Name"},"proficiency_level":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Proficiency Level","description":"1 (beginner) .. 5 (expert)","default":3},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"}},"type":"object","required":["skill_name","id","organization_id","user_id"],"title":"AgentSkill"},"AgentSkillCreate":{"properties":{"skill_name":{"type":"string","maxLength":100,"minLength":1,"title":"Skill Name"},"proficiency_level":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Proficiency Level","description":"1 (beginner) .. 5 (expert)","default":3}},"type":"object","required":["skill_name"],"title":"AgentSkillCreate"},"AgentSkillUpdate":{"properties":{"skill_name":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Skill Name"},"proficiency_level":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":1.0},{"type":"null"}],"title":"Proficiency Level"}},"type":"object","title":"AgentSkillUpdate"},"AlertAcknowledge":{"properties":{"notes":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Notes"}},"type":"object","title":"AlertAcknowledge","description":"Acknowledge alert request"},"AlertEscalate":{"properties":{"to_admin":{"type":"boolean","title":"To Admin","description":"Escalate directly to admin","default":false}},"type":"object","title":"AlertEscalate","description":"Escalate alert request"},"AlertListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/AlertResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"skip":{"type":"integer","title":"Skip"},"limit":{"type":"integer","title":"Limit"}},"type":"object","required":["data","total","skip","limit"],"title":"AlertListResponse","description":"Alert list response"},"AlertResolve":{"properties":{"reason":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Reason"}},"type":"object","title":"AlertResolve","description":"Resolve alert request"},"AlertResponse":{"properties":{"alert_type":{"$ref":"#/components/schemas/AlertType"},"severity":{"$ref":"#/components/schemas/AlertSeverity"},"title":{"type":"string","maxLength":255,"minLength":1,"title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"whatsapp_template_id":{"type":"string","format":"uuid","title":"Whatsapp Template Id"},"status":{"$ref":"#/components/schemas/AlertStatus"},"escalation_level":{"type":"integer","title":"Escalation Level"},"escalated_to_admin":{"type":"boolean","title":"Escalated To Admin"},"acknowledged_by_user_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Acknowledged By User Id"},"acknowledged_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Acknowledged At"},"acknowledgment_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Acknowledgment Notes"},"escalated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Escalated At"},"auto_resolved":{"type":"boolean","title":"Auto Resolved"},"auto_resolved_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Auto Resolved At"},"auto_resolved_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Auto Resolved Reason"},"notification_sent":{"type":"boolean","title":"Notification Sent"},"notification_sent_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Notification Sent At"},"alert_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Alert Metadata"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["alert_type","severity","title","id","organization_id","whatsapp_template_id","status","escalation_level","escalated_to_admin","auto_resolved","notification_sent","created_at","updated_at"],"title":"AlertResponse","description":"Alert response schema"},"AlertSeverity":{"type":"string","enum":["info","warning","critical"],"title":"AlertSeverity","description":"Alert severity levels"},"AlertStatus":{"type":"string","enum":["open","acknowledged","resolved","escalated"],"title":"AlertStatus","description":"Alert lifecycle status"},"AlertSummary":{"properties":{"total_open":{"type":"integer","title":"Total Open"},"critical_count":{"type":"integer","title":"Critical Count"},"warning_count":{"type":"integer","title":"Warning Count"},"escalated_count":{"type":"integer","title":"Escalated Count"},"unacknowledged_count":{"type":"integer","title":"Unacknowledged Count"}},"type":"object","required":["total_open","critical_count","warning_count","escalated_count","unacknowledged_count"],"title":"AlertSummary","description":"Alert summary statistics"},"AlertType":{"type":"string","enum":["template_disabled","template_paused","quality_degraded","approval_rejected","send_failure_high","delivery_failure","template_expired"],"title":"AlertType","description":"Types of alerts that can be generated"},"AudiencePreview":{"properties":{"total_contacts":{"type":"integer","title":"Total Contacts"},"sample_contacts":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Sample Contacts"},"filters_applied":{"additionalProperties":true,"type":"object","title":"Filters Applied"}},"type":"object","required":["total_contacts"],"title":"AudiencePreview","description":"Preview of campaign audience"},"CampaignCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"campaign_type":{"type":"string","title":"Campaign Type","description":"broadcast, drip, trigger","default":"broadcast"},"whatsapp_number_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Whatsapp Number Id"},"template_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Template Id"},"message_type":{"type":"string","title":"Message Type","default":"text"},"message_content":{"additionalProperties":true,"type":"object","title":"Message Content"},"template_variables":{"additionalProperties":true,"type":"object","title":"Template Variables"},"audience_type":{"type":"string","title":"Audience Type","description":"all_contacts, segment, tags, custom_list","default":"all_contacts"},"target_tag_ids":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Target Tag Ids"},"target_contact_ids":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Target Contact Ids"},"segment_filters":{"additionalProperties":true,"type":"object","title":"Segment Filters"},"messages_per_hour":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Messages Per Hour","default":100},"delay_between_messages_seconds":{"type":"integer","maximum":60.0,"minimum":0.0,"title":"Delay Between Messages Seconds","default":2},"respect_opt_out":{"type":"boolean","title":"Respect Opt Out","default":true},"skip_active_conversations":{"type":"boolean","title":"Skip Active Conversations","default":false},"scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled At"},"settings":{"additionalProperties":true,"type":"object","title":"Settings"},"retry_max_attempts":{"type":"integer","maximum":10.0,"minimum":1.0,"title":"Retry Max Attempts","description":"Maximum retry attempts per message","default":3},"retry_base_delay":{"type":"integer","maximum":600.0,"minimum":10.0,"title":"Retry Base Delay","description":"Base delay in seconds for exponential backoff","default":60},"retry_max_delay":{"type":"integer","maximum":7200.0,"minimum":60.0,"title":"Retry Max Delay","description":"Maximum delay in seconds for exponential backoff","default":3600}},"type":"object","required":["name"],"title":"CampaignCreate","description":"Schema for creating a campaign"},"CampaignInDB":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"campaign_type":{"type":"string","title":"Campaign Type","description":"broadcast, drip, trigger","default":"broadcast"},"whatsapp_number_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Whatsapp Number Id"},"template_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Template Id"},"message_type":{"type":"string","title":"Message Type","default":"text"},"message_content":{"additionalProperties":true,"type":"object","title":"Message Content"},"template_variables":{"additionalProperties":true,"type":"object","title":"Template Variables"},"audience_type":{"type":"string","title":"Audience Type","description":"all_contacts, segment, tags, custom_list","default":"all_contacts"},"target_tag_ids":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Target Tag Ids"},"target_contact_ids":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Target Contact Ids"},"segment_filters":{"additionalProperties":true,"type":"object","title":"Segment Filters"},"messages_per_hour":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Messages Per Hour","default":100},"delay_between_messages_seconds":{"type":"integer","maximum":60.0,"minimum":0.0,"title":"Delay Between Messages Seconds","default":2},"respect_opt_out":{"type":"boolean","title":"Respect Opt Out","default":true},"skip_active_conversations":{"type":"boolean","title":"Skip Active Conversations","default":false},"scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled At"},"settings":{"additionalProperties":true,"type":"object","title":"Settings"},"retry_max_attempts":{"type":"integer","maximum":10.0,"minimum":1.0,"title":"Retry Max Attempts","description":"Maximum retry attempts per message","default":3},"retry_base_delay":{"type":"integer","maximum":600.0,"minimum":10.0,"title":"Retry Base Delay","description":"Base delay in seconds for exponential backoff","default":60},"retry_max_delay":{"type":"integer","maximum":7200.0,"minimum":60.0,"title":"Retry Max Delay","description":"Maximum delay in seconds for exponential backoff","default":3600},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"created_by_user_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Created By User Id"},"status":{"type":"string","title":"Status","default":"draft"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"paused_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Paused At"},"cancelled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Cancelled At"},"total_recipients":{"type":"integer","title":"Total Recipients","default":0},"messages_sent":{"type":"integer","title":"Messages Sent","default":0},"messages_delivered":{"type":"integer","title":"Messages Delivered","default":0},"messages_read":{"type":"integer","title":"Messages Read","default":0},"messages_failed":{"type":"integer","title":"Messages Failed","default":0},"messages_pending":{"type":"integer","title":"Messages Pending","default":0},"replies_count":{"type":"integer","title":"Replies Count","default":0},"unique_replies_count":{"type":"integer","title":"Unique Replies Count","default":0},"opt_outs_count":{"type":"integer","title":"Opt Outs Count","default":0},"delivery_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Delivery Rate"},"read_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Read Rate"},"reply_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Reply Rate"},"estimated_cost":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Cost"},"actual_cost":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Actual Cost"},"error_count":{"type":"integer","title":"Error Count","default":0},"last_error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Error Message"},"errors":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Errors"},"message_statuses":{"additionalProperties":true,"type":"object","title":"Message Statuses"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"}},"type":"object","required":["name","id","organization_id","created_at","updated_at"],"title":"CampaignInDB","description":"Schema for campaign in database"},"CampaignListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"items":{"items":{"$ref":"#/components/schemas/CampaignInDB"},"type":"array","title":"Items"}},"type":"object","required":["total","items"],"title":"CampaignListResponse","description":"Response for campaign list"},"CampaignMetrics":{"properties":{"total_campaigns":{"type":"integer","title":"Total Campaigns","default":0},"active_campaigns":{"type":"integer","title":"Active Campaigns","default":0},"completed_campaigns":{"type":"integer","title":"Completed Campaigns","default":0},"total_messages_sent":{"type":"integer","title":"Total Messages Sent","default":0},"total_messages_delivered":{"type":"integer","title":"Total Messages Delivered","default":0},"total_messages_read":{"type":"integer","title":"Total Messages Read","default":0},"total_messages_failed":{"type":"integer","title":"Total Messages Failed","default":0},"avg_delivery_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Delivery Rate"},"avg_read_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Read Rate"},"avg_reply_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Reply Rate"},"total_cost":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Total Cost"},"roi":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Roi"}},"type":"object","title":"CampaignMetrics","description":"Campaign analytics"},"CampaignProgress":{"properties":{"status":{"type":"string","title":"Status"},"total_recipients":{"type":"integer","title":"Total Recipients"},"messages_sent":{"type":"integer","title":"Messages Sent"},"messages_pending":{"type":"integer","title":"Messages Pending"},"messages_failed":{"type":"integer","title":"Messages Failed"},"progress_percentage":{"type":"number","title":"Progress Percentage"},"estimated_completion_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Estimated Completion Time"}},"type":"object","required":["status","total_recipients","messages_sent","messages_pending","messages_failed","progress_percentage"],"title":"CampaignProgress","description":"Campaign progress details"},"CampaignScheduleResponse":{"properties":{"campaign_id":{"type":"string","format":"uuid","title":"Campaign Id"},"scheduled_at":{"type":"string","format":"date-time","title":"Scheduled At"},"total_recipients":{"type":"integer","title":"Total Recipients"},"estimated_cost":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Cost"},"message":{"type":"string","title":"Message"}},"type":"object","required":["campaign_id","scheduled_at","total_recipients","message"],"title":"CampaignScheduleResponse","description":"Response for schedule action"},"CampaignStartResponse":{"properties":{"campaign_id":{"type":"string","format":"uuid","title":"Campaign Id"},"status":{"type":"string","title":"Status"},"started_at":{"type":"string","format":"date-time","title":"Started At"},"total_recipients":{"type":"integer","title":"Total Recipients"},"message":{"type":"string","title":"Message"}},"type":"object","required":["campaign_id","status","started_at","total_recipients","message"],"title":"CampaignStartResponse","description":"Response for start action"},"CampaignStats":{"properties":{"total_recipients":{"type":"integer","title":"Total Recipients"},"messages_sent":{"type":"integer","title":"Messages Sent"},"messages_delivered":{"type":"integer","title":"Messages Delivered"},"messages_read":{"type":"integer","title":"Messages Read"},"messages_failed":{"type":"integer","title":"Messages Failed"},"messages_pending":{"type":"integer","title":"Messages Pending"},"replies_count":{"type":"integer","title":"Replies Count"},"unique_replies_count":{"type":"integer","title":"Unique Replies Count"},"opt_outs_count":{"type":"integer","title":"Opt Outs Count"},"delivery_rate":{"type":"number","title":"Delivery Rate"},"read_rate":{"type":"number","title":"Read Rate"},"reply_rate":{"type":"number","title":"Reply Rate"},"progress_percentage":{"type":"number","title":"Progress Percentage"},"success_rate":{"type":"number","title":"Success Rate"}},"type":"object","required":["total_recipients","messages_sent","messages_delivered","messages_read","messages_failed","messages_pending","replies_count","unique_replies_count","opt_outs_count","delivery_rate","read_rate","reply_rate","progress_percentage","success_rate"],"title":"CampaignStats","description":"Campaign statistics"},"CampaignUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"campaign_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Campaign Type"},"whatsapp_number_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Whatsapp Number Id"},"template_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Template Id"},"message_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message Type"},"message_content":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Message Content"},"template_variables":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Template Variables"},"audience_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Audience Type"},"target_tag_ids":{"anyOf":[{"items":{"type":"string","format":"uuid"},"type":"array"},{"type":"null"}],"title":"Target Tag Ids"},"target_contact_ids":{"anyOf":[{"items":{"type":"string","format":"uuid"},"type":"array"},{"type":"null"}],"title":"Target Contact Ids"},"segment_filters":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Segment Filters"},"messages_per_hour":{"anyOf":[{"type":"integer","maximum":1000.0,"minimum":1.0},{"type":"null"}],"title":"Messages Per Hour"},"delay_between_messages_seconds":{"anyOf":[{"type":"integer","maximum":60.0,"minimum":0.0},{"type":"null"}],"title":"Delay Between Messages Seconds"},"respect_opt_out":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Respect Opt Out"},"skip_active_conversations":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Skip Active Conversations"},"scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled At"},"settings":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Settings"},"retry_max_attempts":{"anyOf":[{"type":"integer","maximum":10.0,"minimum":1.0},{"type":"null"}],"title":"Retry Max Attempts"},"retry_base_delay":{"anyOf":[{"type":"integer","maximum":600.0,"minimum":10.0},{"type":"null"}],"title":"Retry Base Delay"},"retry_max_delay":{"anyOf":[{"type":"integer","maximum":7200.0,"minimum":60.0},{"type":"null"}],"title":"Retry Max Delay"}},"type":"object","title":"CampaignUpdate","description":"Schema for updating a campaign"},"CanvasData":{"properties":{"nodes":{"items":{"$ref":"#/components/schemas/FlowNodeData"},"type":"array","title":"Nodes","description":"Canvas nodes"},"edges":{"items":{"$ref":"#/components/schemas/FlowEdgeData"},"type":"array","title":"Edges","description":"Canvas edges"},"viewport":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Viewport","description":"Viewport state"}},"type":"object","title":"CanvasData","description":"Flow canvas data (React Flow format)"},"ChatbotCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"is_active":{"type":"boolean","title":"Is Active","default":false},"is_published":{"type":"boolean","title":"Is Published","default":false},"is_fallback":{"type":"boolean","title":"Is Fallback","description":"Is this a fallback flow?","default":false},"whatsapp_number_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Whatsapp Number Ids","description":"List of WhatsApp numbers linked to this chatbot"},"ab_test_enabled":{"type":"boolean","title":"Ab Test Enabled","description":"Enable A/B testing?","default":false},"ab_test_flows":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Ab Test Flows","description":"A/B test configurations [{'flow_id': '...', 'weight': 60, 'variant_name': '...'}]"},"global_variables":{"additionalProperties":true,"type":"object","title":"Global Variables"},"settings":{"additionalProperties":true,"type":"object","title":"Settings"}},"type":"object","required":["name"],"title":"ChatbotCreate","description":"Schema for creating a chatbot"},"ChatbotInDB":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"is_active":{"type":"boolean","title":"Is Active","default":false},"is_published":{"type":"boolean","title":"Is Published","default":false},"is_fallback":{"type":"boolean","title":"Is Fallback","description":"Is this a fallback flow?","default":false},"whatsapp_number_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Whatsapp Number Ids","description":"List of WhatsApp numbers linked to this chatbot"},"ab_test_enabled":{"type":"boolean","title":"Ab Test Enabled","description":"Enable A/B testing?","default":false},"ab_test_flows":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Ab Test Flows","description":"A/B test configurations [{'flow_id': '...', 'weight': 60, 'variant_name': '...'}]"},"global_variables":{"additionalProperties":true,"type":"object","title":"Global Variables"},"settings":{"additionalProperties":true,"type":"object","title":"Settings"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"total_conversations":{"type":"integer","title":"Total Conversations","default":0},"total_messages_sent":{"type":"integer","title":"Total Messages Sent","default":0},"total_messages_received":{"type":"integer","title":"Total Messages Received","default":0},"version":{"type":"integer","title":"Version","default":1},"published_version":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Published Version"},"linked_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Linked At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"linked_history":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Linked History","description":"History of linking/unlinking actions"}},"type":"object","required":["name","id","organization_id","created_at","updated_at"],"title":"ChatbotInDB","description":"Schema for chatbot in database"},"ChatbotListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"items":{"items":{"$ref":"#/components/schemas/ChatbotInDB"},"type":"array","title":"Items"}},"type":"object","required":["total","items"],"title":"ChatbotListResponse","description":"Response for chatbot list"},"ChatbotMetrics":{"properties":{"total_chatbots":{"type":"integer","title":"Total Chatbots","default":0},"active_chatbots":{"type":"integer","title":"Active Chatbots","default":0},"total_bot_conversations":{"type":"integer","title":"Total Bot Conversations","default":0},"total_bot_messages":{"type":"integer","title":"Total Bot Messages","default":0},"avg_completion_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Completion Rate"},"handoff_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Handoff Rate"},"top_intents":{"items":{"additionalProperties":{"type":"integer"},"type":"object"},"type":"array","title":"Top Intents"},"avg_conversation_steps":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Conversation Steps"}},"type":"object","title":"ChatbotMetrics","description":"Chatbot analytics"},"ChatbotStats":{"properties":{"total_conversations":{"type":"integer","title":"Total Conversations"},"total_messages_sent":{"type":"integer","title":"Total Messages Sent"},"total_messages_received":{"type":"integer","title":"Total Messages Received"},"total_flows":{"type":"integer","title":"Total Flows"},"total_nodes":{"type":"integer","title":"Total Nodes"},"is_active":{"type":"boolean","title":"Is Active"},"is_published":{"type":"boolean","title":"Is Published"}},"type":"object","required":["total_conversations","total_messages_sent","total_messages_received","total_flows","total_nodes","is_active","is_published"],"title":"ChatbotStats","description":"Chatbot statistics"},"ChatbotUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"is_published":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Published"},"is_fallback":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Fallback","description":"Is this a fallback flow?"},"whatsapp_number_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Whatsapp Number Ids","description":"List of WhatsApp numbers linked to this chatbot"},"whatsapp_number_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Whatsapp Number Id","description":"(Deprecated) Single WhatsApp number - will be converted to whatsapp_number_ids"},"ab_test_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Ab Test Enabled","description":"Enable A/B testing?"},"ab_test_flows":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Ab Test Flows","description":"A/B test configurations"},"global_variables":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Global Variables"},"settings":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Settings"},"canvas_data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Canvas Data","description":"React Flow canvas data (nodes and edges) - updates main flow if provided"}},"type":"object","title":"ChatbotUpdate","description":"Schema for updating a chatbot"},"ChatbotWithFlows":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"is_active":{"type":"boolean","title":"Is Active","default":false},"is_published":{"type":"boolean","title":"Is Published","default":false},"is_fallback":{"type":"boolean","title":"Is Fallback","description":"Is this a fallback flow?","default":false},"whatsapp_number_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Whatsapp Number Ids","description":"List of WhatsApp numbers linked to this chatbot"},"ab_test_enabled":{"type":"boolean","title":"Ab Test Enabled","description":"Enable A/B testing?","default":false},"ab_test_flows":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Ab Test Flows","description":"A/B test configurations [{'flow_id': '...', 'weight': 60, 'variant_name': '...'}]"},"global_variables":{"additionalProperties":true,"type":"object","title":"Global Variables"},"settings":{"additionalProperties":true,"type":"object","title":"Settings"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"total_conversations":{"type":"integer","title":"Total Conversations","default":0},"total_messages_sent":{"type":"integer","title":"Total Messages Sent","default":0},"total_messages_received":{"type":"integer","title":"Total Messages Received","default":0},"version":{"type":"integer","title":"Version","default":1},"published_version":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Published Version"},"linked_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Linked At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"linked_history":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Linked History","description":"History of linking/unlinking actions"},"flows":{"items":{"$ref":"#/components/schemas/FlowInDB"},"type":"array","title":"Flows","default":[]}},"type":"object","required":["name","id","organization_id","created_at","updated_at"],"title":"ChatbotWithFlows","description":"Chatbot with flows included"},"ClarificationQuestion":{"properties":{"question":{"type":"string","title":"Question","description":"The clarification question"},"options":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Options","description":"Suggested answer options (if applicable)"},"field":{"type":"string","title":"Field","description":"Field being clarified (e.g., 'tone', 'complexity')"}},"type":"object","required":["question","field"],"title":"ClarificationQuestion","description":"Clarification question from AI"},"ConnectionType":{"type":"string","enum":["official","qrcode"],"title":"ConnectionType","description":"WhatsApp connection type"},"Contact":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Name"},"email":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Email"},"phone_number":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone Number"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"company":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Company"},"job_title":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Job Title"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"whatsapp_id":{"type":"string","title":"Whatsapp Id"},"whatsapp_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Whatsapp Name"},"whatsapp_profile_pic":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Whatsapp Profile Pic"},"address_street":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address Street"},"address_city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address City"},"address_state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address State"},"address_country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address Country"},"address_postal_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address Postal Code"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"},"lifecycle_stage":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lifecycle Stage"},"opt_in":{"type":"boolean","title":"Opt In","default":true},"opt_in_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Opt In Date"},"opt_out_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Opt Out Date"},"is_blocked":{"type":"boolean","title":"Is Blocked","default":false},"blocked_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Blocked At"},"blocked_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Blocked Reason"},"is_vip":{"type":"boolean","title":"Is Vip","default":false},"last_message_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Message At"},"last_message_received_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Message Received At"},"last_message_sent_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Message Sent At"},"total_messages_sent":{"type":"integer","title":"Total Messages Sent","default":0},"total_messages_received":{"type":"integer","title":"Total Messages Received","default":0},"total_conversations":{"type":"integer","title":"Total Conversations","default":0},"assigned_agent_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Assigned Agent Id"},"assigned_department_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Assigned Department Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","description":"List of tag names"}},"type":"object","required":["id","organization_id","whatsapp_id","created_at","updated_at"],"title":"Contact"},"ContactCreate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Name"},"email":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Email"},"phone_number":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone Number"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"company":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Company"},"job_title":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Job Title"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"whatsapp_id":{"type":"string","title":"Whatsapp Id","description":"WhatsApp ID (phone number with country code)"}},"type":"object","required":["whatsapp_id"],"title":"ContactCreate"},"ContactMetrics":{"properties":{"total_contacts":{"type":"integer","title":"Total Contacts","default":0},"new_contacts_today":{"type":"integer","title":"New Contacts Today","default":0},"new_contacts_this_week":{"type":"integer","title":"New Contacts This Week","default":0},"new_contacts_this_month":{"type":"integer","title":"New Contacts This Month","default":0},"active_contacts":{"type":"integer","title":"Active Contacts","default":0},"blocked_contacts":{"type":"integer","title":"Blocked Contacts","default":0},"opted_out_contacts":{"type":"integer","title":"Opted Out Contacts","default":0},"contacts_by_source":{"additionalProperties":{"type":"integer"},"type":"object","title":"Contacts By Source"},"contacts_by_lifecycle_stage":{"additionalProperties":{"type":"integer"},"type":"object","title":"Contacts By Lifecycle Stage"},"avg_engagement_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Engagement Score"},"top_tags":{"items":{"additionalProperties":{"type":"integer"},"type":"object"},"type":"array","title":"Top Tags"}},"type":"object","title":"ContactMetrics","description":"Contact analytics"},"ContactUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Name"},"email":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Email"},"phone_number":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone Number"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"company":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Company"},"job_title":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Job Title"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"lifecycle_stage":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Lifecycle Stage"},"opt_in":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Opt In"},"is_blocked":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Blocked"},"blocked_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Blocked Reason"},"is_vip":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Vip"},"assigned_agent_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Assigned Agent Id"},"assigned_department_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Assigned Department Id"}},"type":"object","title":"ContactUpdate"},"Conversation":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"contact_id":{"type":"string","format":"uuid","title":"Contact Id"},"whatsapp_number_id":{"type":"string","format":"uuid","title":"Whatsapp Number Id"},"status":{"type":"string","title":"Status"},"assigned_agent_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Assigned Agent Id"},"assigned_department_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Assigned Department Id"},"priority":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Priority"},"last_message_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Message At"},"last_inbound_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Inbound At"},"last_outbound_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Outbound At"},"first_response_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"First Response At"},"resolved_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Resolved At"},"closed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Closed At"},"total_messages":{"type":"integer","title":"Total Messages","default":0},"unread_count":{"type":"integer","title":"Unread Count","default":0},"response_time_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Response Time Seconds"},"resolution_time_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Resolution Time Seconds"},"channel":{"type":"string","title":"Channel","default":"whatsapp"},"extra_data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Extra Data"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","organization_id","contact_id","whatsapp_number_id","status","created_at","updated_at"],"title":"Conversation","description":"Public conversation schema"},"ConversationAssign":{"properties":{"agent_id":{"type":"string","format":"uuid","title":"Agent Id","description":"Agent ID to assign conversation to"}},"type":"object","required":["agent_id"],"title":"ConversationAssign","description":"Schema for assigning conversation to agent"},"ConversationClose":{"properties":{"reason":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Reason","description":"Reason for closing"},"resolved":{"type":"boolean","title":"Resolved","description":"Mark as resolved","default":true}},"type":"object","title":"ConversationClose","description":"Schema for closing a conversation"},"ConversationCreate":{"properties":{"contact_id":{"type":"string","format":"uuid","title":"Contact Id"},"whatsapp_number_id":{"type":"string","format":"uuid","title":"Whatsapp Number Id"},"initial_message":{"anyOf":[{"$ref":"#/components/schemas/MessageCreate"},{"type":"null"}]}},"type":"object","required":["contact_id","whatsapp_number_id"],"title":"ConversationCreate","description":"Schema for creating a conversation"},"ConversationMetrics":{"properties":{"total_conversations":{"type":"integer","title":"Total Conversations","default":0},"active_conversations":{"type":"integer","title":"Active Conversations","default":0},"closed_conversations":{"type":"integer","title":"Closed Conversations","default":0},"avg_conversation_duration_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Conversation Duration Seconds"},"avg_messages_per_conversation":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Messages Per Conversation"},"avg_response_time_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Response Time Seconds"},"first_response_time_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"First Response Time Seconds"},"resolution_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Resolution Rate"},"conversations_by_status":{"additionalProperties":{"type":"integer"},"type":"object","title":"Conversations By Status"},"conversations_by_channel":{"additionalProperties":{"type":"integer"},"type":"object","title":"Conversations By Channel"},"peak_hours":{"items":{"type":"integer"},"type":"array","title":"Peak Hours"}},"type":"object","title":"ConversationMetrics","description":"Conversation analytics"},"ConversationTransfer":{"properties":{"department_id":{"type":"string","format":"uuid","title":"Department Id","description":"Department ID to transfer conversation to"},"note":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Note","description":"Optional transfer note"}},"type":"object","required":["department_id"],"title":"ConversationTransfer","description":"Schema for transferring conversation to department"},"ConversationTransferToAgent":{"properties":{"agent_id":{"type":"string","format":"uuid","title":"Agent Id","description":"Agent ID to transfer conversation to"},"note":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Note","description":"Optional transfer note"}},"type":"object","required":["agent_id"],"title":"ConversationTransferToAgent","description":"Schema for transferring conversation directly to a specific agent"},"ConversationUpdate":{"properties":{"status":{"anyOf":[{"type":"string","pattern":"^(open|pending|resolved|closed)$"},{"type":"null"}],"title":"Status"},"assigned_agent_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Assigned Agent Id"},"assigned_department_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Assigned Department Id"},"priority":{"anyOf":[{"type":"string","pattern":"^(low|medium|high|urgent)$"},{"type":"null"}],"title":"Priority"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags"}},"type":"object","title":"ConversationUpdate","description":"Schema for updating a conversation"},"ConversationWindowExtend":{"properties":{"hours":{"type":"integer","maximum":168.0,"minimum":1.0,"title":"Hours","description":"Number of hours to extend (1-168)","default":24}},"type":"object","title":"ConversationWindowExtend","description":"Request to manually extend a conversation window."},"ConversationWindowListResponse":{"properties":{"windows":{"items":{"$ref":"#/components/schemas/ConversationWindowResponse"},"type":"array","title":"Windows","description":"List of windows"},"total":{"type":"integer","title":"Total","description":"Total number of windows"},"skip":{"type":"integer","title":"Skip","description":"Number of records skipped"},"limit":{"type":"integer","title":"Limit","description":"Number of records returned"}},"type":"object","required":["windows","total","skip","limit"],"title":"ConversationWindowListResponse","description":"Response for listing conversation windows."},"ConversationWindowResponse":{"properties":{"conversation_id":{"type":"string","format":"uuid","title":"Conversation Id","description":"ID of the conversation"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At","description":"When the 24h window started"},"ends_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ends At","description":"When the 24h window ends (started_at + 24h)"},"is_active":{"type":"boolean","title":"Is Active","description":"Whether the window is currently active","default":true},"status":{"type":"string","title":"Status","description":"Window status: active, expired, manually_extended, closed","default":"active"},"close_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Close Reason","description":"Reason for closing (if closed)"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Additional notes"},"id":{"type":"string","format":"uuid","title":"Id","description":"Window ID"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id","description":"Organization ID"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"When the window was created"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"When the window was last updated"},"is_within_window":{"type":"boolean","title":"Is Within Window","description":"Whether current time is within the window"},"hours_remaining":{"type":"number","title":"Hours Remaining","description":"Hours remaining in the window (0 if expired)"},"minutes_remaining":{"type":"number","title":"Minutes Remaining","description":"Minutes remaining in the window (0 if expired)"},"time_until_expiry":{"additionalProperties":true,"type":"object","title":"Time Until Expiry","description":"Detailed time until expiry"}},"type":"object","required":["conversation_id","id","organization_id","created_at","updated_at","is_within_window","hours_remaining","minutes_remaining","time_until_expiry"],"title":"ConversationWindowResponse","description":"Response schema for a conversation window."},"ConversationWindowStatusResponse":{"properties":{"window_status":{"type":"string","title":"Window Status","description":"Status: active, expired, unknown"},"is_within_window":{"type":"boolean","title":"Is Within Window","description":"Whether within 24h window"},"started_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Started At","description":"ISO format start time"},"ends_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ends At","description":"ISO format end time"},"hours_remaining":{"type":"number","title":"Hours Remaining","description":"Hours remaining (0 if expired)"},"minutes_remaining":{"type":"number","title":"Minutes Remaining","description":"Minutes remaining (0 if expired)"},"time_until_expiry":{"additionalProperties":true,"type":"object","title":"Time Until Expiry","description":"Detailed time breakdown"},"window_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Window Id","description":"Window ID"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if any"}},"type":"object","required":["window_status","is_within_window","hours_remaining","minutes_remaining","time_until_expiry"],"title":"ConversationWindowStatusResponse","description":"Response for window status check."},"CriticalAlertsResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/AlertResponse"},"type":"array","title":"Data"},"summary":{"$ref":"#/components/schemas/AlertSummary"}},"type":"object","required":["data","summary"],"title":"CriticalAlertsResponse","description":"Critical alerts response"},"DashboardSummaryResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"message":{"type":"string","title":"Message"},"data":{"anyOf":[{},{"type":"null"}],"title":"Data"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"period_days":{"type":"integer","title":"Period Days"},"total_templates":{"type":"integer","title":"Total Templates"},"active_templates":{"type":"integer","title":"Active Templates"}},"type":"object","required":["message","organization_id","period_days","total_templates","active_templates"],"title":"DashboardSummaryResponse","description":"Organization dashboard summary response"},"DatabaseConnectionConfig":{"properties":{"connection_type":{"type":"string","enum":["postgres","mysql","mongodb","sqlite"],"title":"Connection Type","description":"Type of database"},"host":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Host","description":"Database host","default":"localhost"},"port":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Port","description":"Database port","default":5432},"database":{"type":"string","title":"Database","description":"Database name or file path for SQLite"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username","description":"Database username"},"password":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Password","description":"Database password"}},"type":"object","required":["connection_type","database"],"title":"DatabaseConnectionConfig","description":"Database connection configuration."},"Department":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"color":{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$","title":"Color","default":"#3B82F6"},"icon":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Icon"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"slug":{"type":"string","title":"Slug"},"is_active":{"type":"boolean","title":"Is Active"},"business_hours":{"additionalProperties":true,"type":"object","title":"Business Hours"},"offline_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Offline Message"},"routing_mode":{"type":"string","title":"Routing Mode"},"auto_assign_conversations":{"type":"boolean","title":"Auto Assign Conversations"},"max_conversations_per_agent":{"type":"integer","title":"Max Conversations Per Agent"},"agent_ids":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Agent Ids"},"total_agents":{"type":"integer","title":"Total Agents"},"total_conversations":{"type":"integer","title":"Total Conversations"},"active_conversations":{"type":"integer","title":"Active Conversations"},"queued_conversations":{"type":"integer","title":"Queued Conversations"},"average_response_time_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Average Response Time Seconds"},"average_resolution_time_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Average Resolution Time Seconds"},"customer_satisfaction_score":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Customer Satisfaction Score"},"settings":{"additionalProperties":true,"type":"object","title":"Settings"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"}},"type":"object","required":["name","id","organization_id","slug","is_active","business_hours","offline_message","routing_mode","auto_assign_conversations","max_conversations_per_agent","agent_ids","total_agents","total_conversations","active_conversations","queued_conversations","average_response_time_seconds","average_resolution_time_seconds","customer_satisfaction_score","settings","created_at","updated_at","deleted_at"],"title":"Department","description":"Public department schema"},"DepartmentCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"color":{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$","title":"Color","default":"#3B82F6"},"icon":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Icon"},"slug":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Slug"},"is_active":{"type":"boolean","title":"Is Active","default":true},"business_hours":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Business Hours"},"offline_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Offline Message"},"routing_mode":{"type":"string","pattern":"^(round_robin|load_balance|manual)$","title":"Routing Mode","default":"round_robin"},"auto_assign_conversations":{"type":"boolean","title":"Auto Assign Conversations","default":true},"max_conversations_per_agent":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Max Conversations Per Agent","default":10}},"type":"object","required":["name"],"title":"DepartmentCreate","description":"Schema for creating a department"},"DepartmentUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"color":{"anyOf":[{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$"},{"type":"null"}],"title":"Color"},"icon":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Icon"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"business_hours":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Business Hours"},"offline_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Offline Message"},"routing_mode":{"anyOf":[{"type":"string","pattern":"^(round_robin|load_balance|manual)$"},{"type":"null"}],"title":"Routing Mode"},"auto_assign_conversations":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Auto Assign Conversations"},"max_conversations_per_agent":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":1.0},{"type":"null"}],"title":"Max Conversations Per Agent"}},"type":"object","title":"DepartmentUpdate","description":"Schema for updating a department"},"EncryptionProvider":{"type":"string","enum":["fernet","aws_kms","vault"],"title":"EncryptionProvider","description":"Encryption provider used to encrypt the secret"},"ExecuteQueryRequest":{"properties":{"config":{"$ref":"#/components/schemas/DatabaseConnectionConfig","description":"Connection configuration"},"query":{"type":"string","title":"Query","description":"SQL or NoSQL query to execute"},"query_type":{"type":"string","enum":["SELECT","INSERT","UPDATE","DELETE","CUSTOM"],"title":"Query Type","description":"Type of query","default":"SELECT"},"parameters":{"anyOf":[{"items":{"$ref":"#/components/schemas/QueryParameter"},"type":"array"},{"type":"null"}],"title":"Parameters","description":"Query parameters for prepared statements","default":[]},"timeout":{"type":"integer","maximum":300.0,"minimum":1.0,"title":"Timeout","description":"Query timeout in seconds","default":30},"cache":{"type":"boolean","title":"Cache","description":"Enable result caching","default":false},"cache_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cache Key","description":"Custom cache key"},"cache_ttl":{"type":"integer","maximum":86400.0,"minimum":10.0,"title":"Cache Ttl","description":"Cache TTL in seconds","default":300},"max_rows":{"type":"integer","maximum":10000.0,"minimum":1.0,"title":"Max Rows","description":"Maximum rows to return","default":1000}},"type":"object","required":["config","query"],"title":"ExecuteQueryRequest","description":"Execute database query request."},"ExecuteQueryResponse":{"properties":{"result":{"$ref":"#/components/schemas/QueryResult","description":"Query result"},"warnings":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Warnings","description":"Warnings about query execution"}},"type":"object","required":["result"],"title":"ExecuteQueryResponse","description":"Execute database query response."},"Flow":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Flow name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Flow description"},"is_main":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Main","description":"Is main entry flow","default":false},"is_fallback":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Fallback","description":"Is fallback flow for errors","default":false},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"chatbot_id":{"type":"string","format":"uuid","title":"Chatbot Id"},"is_active":{"type":"boolean","title":"Is Active","description":"Is flow active","default":true},"canvas_data":{"$ref":"#/components/schemas/CanvasData","description":"Canvas data"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["name","id","organization_id","chatbot_id","created_at","updated_at"],"title":"Flow","description":"Public Flow schema"},"FlowAutomationCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"chatbot_id":{"type":"string","format":"uuid","title":"Chatbot Id"},"flow_id":{"type":"string","format":"uuid","title":"Flow Id"},"whatsapp_number_id":{"type":"string","format":"uuid","title":"Whatsapp Number Id"},"trigger_type":{"type":"string","title":"Trigger Type","description":"manual, scheduled, cron, webhook, event","default":"manual"},"trigger_config":{"additionalProperties":true,"type":"object","title":"Trigger Config"},"audience_type":{"type":"string","title":"Audience Type","description":"all, segment, tags, custom, uploaded","default":"custom"},"audience_config":{"additionalProperties":true,"type":"object","title":"Audience Config"},"variable_mapping":{"additionalProperties":true,"type":"object","title":"Variable Mapping"},"max_concurrent_executions":{"type":"integer","maximum":500.0,"minimum":1.0,"title":"Max Concurrent Executions","default":50},"rate_limit_per_hour":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Rate Limit Per Hour","default":100},"retry_failed":{"type":"boolean","title":"Retry Failed","default":true},"max_retries":{"type":"integer","maximum":10.0,"minimum":1.0,"title":"Max Retries","default":3},"execution_window_start":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Execution Window Start"},"execution_window_end":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Execution Window End"},"execution_timezone":{"type":"string","title":"Execution Timezone","default":"America/Sao_Paulo"}},"type":"object","required":["name","chatbot_id","flow_id","whatsapp_number_id"],"title":"FlowAutomationCreate","description":"Schema for creating a flow automation"},"FlowAutomationExecutionResponse":{"properties":{"execution_type":{"type":"string","title":"Execution Type","description":"manual, scheduled, trigger"},"triggered_by_event":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Triggered By Event"},"id":{"type":"string","format":"uuid","title":"Id"},"automation_id":{"type":"string","format":"uuid","title":"Automation Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"triggered_by_user_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Triggered By User Id"},"status":{"type":"string","title":"Status","default":"queued"},"total_recipients":{"type":"integer","title":"Total Recipients","default":0},"messages_sent":{"type":"integer","title":"Messages Sent","default":0},"messages_delivered":{"type":"integer","title":"Messages Delivered","default":0},"messages_read":{"type":"integer","title":"Messages Read","default":0},"messages_replied":{"type":"integer","title":"Messages Replied","default":0},"messages_completed":{"type":"integer","title":"Messages Completed","default":0},"messages_failed":{"type":"integer","title":"Messages Failed","default":0},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"paused_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Paused At"},"cancelled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Cancelled At"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"errors":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Errors"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"automation_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Automation Name"},"triggered_by_user_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Triggered By User Name"},"progress_percentage":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Progress Percentage"},"estimated_completion_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Estimated Completion Time"}},"type":"object","required":["execution_type","id","automation_id","organization_id","created_at","updated_at"],"title":"FlowAutomationExecutionResponse","description":"Schema for flow automation execution response"},"FlowAutomationList":{"properties":{"items":{"items":{"$ref":"#/components/schemas/FlowAutomationResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["items","total","page","page_size","total_pages"],"title":"FlowAutomationList","description":"Schema for paginated list of flow automations"},"FlowAutomationResponse":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"chatbot_id":{"type":"string","format":"uuid","title":"Chatbot Id"},"flow_id":{"type":"string","format":"uuid","title":"Flow Id"},"whatsapp_number_id":{"type":"string","format":"uuid","title":"Whatsapp Number Id"},"trigger_type":{"type":"string","title":"Trigger Type","description":"manual, scheduled, cron, webhook, event","default":"manual"},"trigger_config":{"additionalProperties":true,"type":"object","title":"Trigger Config"},"audience_type":{"type":"string","title":"Audience Type","description":"all, segment, tags, custom, uploaded","default":"custom"},"audience_config":{"additionalProperties":true,"type":"object","title":"Audience Config"},"variable_mapping":{"additionalProperties":true,"type":"object","title":"Variable Mapping"},"max_concurrent_executions":{"type":"integer","maximum":500.0,"minimum":1.0,"title":"Max Concurrent Executions","default":50},"rate_limit_per_hour":{"type":"integer","maximum":1000.0,"minimum":1.0,"title":"Rate Limit Per Hour","default":100},"retry_failed":{"type":"boolean","title":"Retry Failed","default":true},"max_retries":{"type":"integer","maximum":10.0,"minimum":1.0,"title":"Max Retries","default":3},"execution_window_start":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Execution Window Start"},"execution_window_end":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Execution Window End"},"execution_timezone":{"type":"string","title":"Execution Timezone","default":"America/Sao_Paulo"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"status":{"type":"string","title":"Status","default":"draft"},"is_active":{"type":"boolean","title":"Is Active","default":false},"total_executions":{"type":"integer","title":"Total Executions","default":0},"total_sent":{"type":"integer","title":"Total Sent","default":0},"total_delivered":{"type":"integer","title":"Total Delivered","default":0},"total_read":{"type":"integer","title":"Total Read","default":0},"total_replied":{"type":"integer","title":"Total Replied","default":0},"total_completed":{"type":"integer","title":"Total Completed","default":0},"total_failed":{"type":"integer","title":"Total Failed","default":0},"last_executed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Executed At"},"next_scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Next Scheduled At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"chatbot_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Chatbot Name"},"flow_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Flow Name"},"whatsapp_number_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Whatsapp Number Name"}},"type":"object","required":["name","chatbot_id","flow_id","whatsapp_number_id","id","organization_id","created_at","updated_at"],"title":"FlowAutomationResponse","description":"Schema for flow automation response with relationships"},"FlowAutomationScheduleCreate":{"properties":{"recurrence_type":{"type":"string","title":"Recurrence Type","description":"once, daily, weekly, monthly, cron, custom","default":"once"},"start_date":{"type":"string","format":"date-time","title":"Start Date"},"start_time":{"type":"string","format":"time","title":"Start Time"},"end_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date"},"recurrence_config":{"additionalProperties":true,"type":"object","title":"Recurrence Config"},"execution_window_start":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Execution Window Start"},"execution_window_end":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Execution Window End"},"execution_timezone":{"type":"string","title":"Execution Timezone","default":"America/Sao_Paulo"},"blackout_dates":{"items":{"type":"string"},"type":"array","title":"Blackout Dates"},"skip_weekends":{"type":"boolean","title":"Skip Weekends","default":true},"skip_holidays":{"type":"boolean","title":"Skip Holidays","default":true},"is_active":{"type":"boolean","title":"Is Active","default":true},"automation_id":{"type":"string","format":"uuid","title":"Automation Id"}},"type":"object","required":["start_date","start_time","automation_id"],"title":"FlowAutomationScheduleCreate","description":"Schema for creating a schedule"},"FlowAutomationScheduleResponse":{"properties":{"recurrence_type":{"type":"string","title":"Recurrence Type","description":"once, daily, weekly, monthly, cron, custom","default":"once"},"start_date":{"type":"string","format":"date-time","title":"Start Date"},"start_time":{"type":"string","format":"time","title":"Start Time"},"end_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date"},"recurrence_config":{"additionalProperties":true,"type":"object","title":"Recurrence Config"},"execution_window_start":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Execution Window Start"},"execution_window_end":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Execution Window End"},"execution_timezone":{"type":"string","title":"Execution Timezone","default":"America/Sao_Paulo"},"blackout_dates":{"items":{"type":"string"},"type":"array","title":"Blackout Dates"},"skip_weekends":{"type":"boolean","title":"Skip Weekends","default":true},"skip_holidays":{"type":"boolean","title":"Skip Holidays","default":true},"is_active":{"type":"boolean","title":"Is Active","default":true},"id":{"type":"string","format":"uuid","title":"Id"},"automation_id":{"type":"string","format":"uuid","title":"Automation Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"is_paused":{"type":"boolean","title":"Is Paused","default":false},"paused_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Paused At"},"last_executed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Executed At"},"next_scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Next Scheduled At"},"execution_count":{"type":"integer","title":"Execution Count","default":0},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["start_date","start_time","id","automation_id","organization_id","created_at","updated_at"],"title":"FlowAutomationScheduleResponse","description":"Schema for schedule response"},"FlowAutomationScheduleUpdate":{"properties":{"recurrence_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recurrence Type"},"start_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Date"},"start_time":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Start Time"},"end_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date"},"recurrence_config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Recurrence Config"},"execution_window_start":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Execution Window Start"},"execution_window_end":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Execution Window End"},"execution_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Execution Timezone"},"blackout_dates":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Blackout Dates"},"skip_weekends":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Skip Weekends"},"skip_holidays":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Skip Holidays"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"is_paused":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Paused"}},"type":"object","title":"FlowAutomationScheduleUpdate","description":"Schema for updating a schedule"},"FlowAutomationStartRequest":{"properties":{"test_mode":{"type":"boolean","title":"Test Mode","default":false},"test_contact_ids":{"anyOf":[{"items":{"type":"string","format":"uuid"},"type":"array"},{"type":"null"}],"title":"Test Contact Ids"}},"type":"object","title":"FlowAutomationStartRequest","description":"Schema for starting a flow automation manually"},"FlowAutomationStats":{"properties":{"total_executions":{"type":"integer","title":"Total Executions"},"total_sent":{"type":"integer","title":"Total Sent"},"total_delivered":{"type":"integer","title":"Total Delivered"},"total_read":{"type":"integer","title":"Total Read"},"total_replied":{"type":"integer","title":"Total Replied"},"total_completed":{"type":"integer","title":"Total Completed"},"total_failed":{"type":"integer","title":"Total Failed"},"delivery_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Delivery Rate"},"read_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Read Rate"},"reply_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Reply Rate"},"completion_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Completion Rate"},"last_execution_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Last Execution Id"},"last_execution_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Execution Status"},"last_executed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Executed At"},"next_scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Next Scheduled At"}},"type":"object","required":["total_executions","total_sent","total_delivered","total_read","total_replied","total_completed","total_failed"],"title":"FlowAutomationStats","description":"Schema for flow automation statistics"},"FlowAutomationUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"chatbot_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Chatbot Id"},"flow_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Flow Id"},"whatsapp_number_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Whatsapp Number Id"},"trigger_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trigger Type"},"trigger_config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Trigger Config"},"audience_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Audience Type"},"audience_config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Audience Config"},"variable_mapping":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Variable Mapping"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"max_concurrent_executions":{"anyOf":[{"type":"integer","maximum":500.0,"minimum":1.0},{"type":"null"}],"title":"Max Concurrent Executions"},"rate_limit_per_hour":{"anyOf":[{"type":"integer","maximum":1000.0,"minimum":1.0},{"type":"null"}],"title":"Rate Limit Per Hour"},"retry_failed":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Retry Failed"},"max_retries":{"anyOf":[{"type":"integer","maximum":10.0,"minimum":1.0},{"type":"null"}],"title":"Max Retries"},"execution_window_start":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Execution Window Start"},"execution_window_end":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Execution Window End"},"execution_timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Execution Timezone"}},"type":"object","title":"FlowAutomationUpdate","description":"Schema for updating a flow automation"},"FlowCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"is_main":{"type":"boolean","title":"Is Main","description":"Is this the main entry flow?","default":false},"is_fallback":{"type":"boolean","title":"Is Fallback","description":"Is this a fallback flow?","default":false},"canvas_data":{"additionalProperties":true,"type":"object","title":"Canvas Data"},"variables":{"additionalProperties":true,"type":"object","title":"Variables"},"is_active":{"type":"boolean","title":"Is Active","default":true},"chatbot_id":{"type":"string","format":"uuid","title":"Chatbot Id"}},"type":"object","required":["name","chatbot_id"],"title":"FlowCreate","description":"Schema for creating a flow"},"FlowEdgeData":{"properties":{"id":{"type":"string","title":"Id","description":"Edge ID"},"source":{"type":"string","title":"Source","description":"Source node ID"},"target":{"type":"string","title":"Target","description":"Target node ID"},"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data","description":"Edge data"}},"type":"object","required":["id","source","target"],"title":"FlowEdgeData","description":"React Flow edge data"},"FlowImprovement":{"properties":{"title":{"type":"string","title":"Title","description":"Improvement title"},"description":{"type":"string","title":"Description","description":"Detailed description"},"category":{"type":"string","title":"Category","description":"Category: 'ux', 'conversion', 'clarity', 'error_handling', 'performance'"},"priority":{"type":"string","title":"Priority","description":"Priority: 'low', 'medium', 'high', 'critical'"},"affected_nodes":{"items":{"type":"string"},"type":"array","title":"Affected Nodes","description":"Node IDs affected by this improvement"},"auto_fixable":{"type":"boolean","title":"Auto Fixable","description":"Whether this improvement can be applied automatically","default":false},"patch":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Patch","description":"JSON patch to apply if auto_fixable is True"}},"type":"object","required":["title","description","category","priority"],"title":"FlowImprovement","description":"A suggested improvement for a flow"},"FlowInDB":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"is_main":{"type":"boolean","title":"Is Main","description":"Is this the main entry flow?","default":false},"is_fallback":{"type":"boolean","title":"Is Fallback","description":"Is this a fallback flow?","default":false},"canvas_data":{"additionalProperties":true,"type":"object","title":"Canvas Data"},"variables":{"additionalProperties":true,"type":"object","title":"Variables"},"is_active":{"type":"boolean","title":"Is Active","default":true},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"chatbot_id":{"type":"string","format":"uuid","title":"Chatbot Id"},"version":{"type":"integer","title":"Version"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"}},"type":"object","required":["name","id","organization_id","chatbot_id","version","created_at","updated_at"],"title":"FlowInDB","description":"Schema for flow in database"},"FlowList":{"properties":{"flows":{"items":{"$ref":"#/components/schemas/Flow"},"type":"array","title":"Flows"},"total":{"type":"integer","title":"Total","description":"Total count"},"page":{"type":"integer","title":"Page","description":"Current page"},"per_page":{"type":"integer","title":"Per Page","description":"Items per page"}},"type":"object","required":["flows","total","page","per_page"],"title":"FlowList","description":"Flow list response"},"FlowListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"items":{"items":{"$ref":"#/components/schemas/FlowInDB"},"type":"array","title":"Items"}},"type":"object","required":["total","items"],"title":"FlowListResponse","description":"Response for flow list"},"FlowNodeData":{"properties":{"id":{"type":"string","title":"Id","description":"Node ID"},"type":{"type":"string","title":"Type","description":"Node type (message, action, etc)"},"data":{"additionalProperties":true,"type":"object","title":"Data","description":"Node data"},"position":{"additionalProperties":true,"type":"object","title":"Position","description":"Node position {x, y}"}},"type":"object","required":["id","type"],"title":"FlowNodeData","description":"React Flow node data"},"FlowTemplate":{"properties":{"id":{"type":"string","title":"Id","description":"Template ID"},"name":{"type":"string","title":"Name","description":"Template name"},"description":{"type":"string","title":"Description","description":"Template description"},"category":{"type":"string","title":"Category","description":"Category ID"},"subcategory":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subcategory"},"thumbnail_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thumbnail Url"},"preview_image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Preview Image Url"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags"},"complexity":{"type":"string","title":"Complexity","description":"Complexity: 'simple', 'medium', 'complex'"},"estimated_setup_time":{"type":"string","title":"Estimated Setup Time","description":"e.g., '5 minutes'"},"node_count":{"type":"integer","title":"Node Count","description":"Number of nodes in flow"},"features":{"items":{"type":"string"},"type":"array","title":"Features","description":"Key features"},"variables_used":{"items":{"type":"string"},"type":"array","title":"Variables Used"},"requires_integrations":{"items":{"type":"string"},"type":"array","title":"Requires Integrations"},"use_count":{"type":"integer","title":"Use Count","description":"How many times used","default":0},"rating":{"type":"number","maximum":5.0,"minimum":0.0,"title":"Rating","default":0.0},"language":{"type":"string","title":"Language","default":"pt-BR"}},"type":"object","required":["id","name","description","category","complexity","estimated_setup_time","node_count"],"title":"FlowTemplate","description":"Flow template metadata"},"FlowTemplateDetail":{"properties":{"id":{"type":"string","title":"Id","description":"Template ID"},"name":{"type":"string","title":"Name","description":"Template name"},"description":{"type":"string","title":"Description","description":"Template description"},"category":{"type":"string","title":"Category","description":"Category ID"},"subcategory":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subcategory"},"thumbnail_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thumbnail Url"},"preview_image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Preview Image Url"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags"},"complexity":{"type":"string","title":"Complexity","description":"Complexity: 'simple', 'medium', 'complex'"},"estimated_setup_time":{"type":"string","title":"Estimated Setup Time","description":"e.g., '5 minutes'"},"node_count":{"type":"integer","title":"Node Count","description":"Number of nodes in flow"},"features":{"items":{"type":"string"},"type":"array","title":"Features","description":"Key features"},"variables_used":{"items":{"type":"string"},"type":"array","title":"Variables Used"},"requires_integrations":{"items":{"type":"string"},"type":"array","title":"Requires Integrations"},"use_count":{"type":"integer","title":"Use Count","description":"How many times used","default":0},"rating":{"type":"number","maximum":5.0,"minimum":0.0,"title":"Rating","default":0.0},"language":{"type":"string","title":"Language","default":"pt-BR"},"flow_data":{"additionalProperties":true,"type":"object","title":"Flow Data","description":"Complete flow data (nodes + edges)"}},"type":"object","required":["id","name","description","category","complexity","estimated_setup_time","node_count","flow_data"],"title":"FlowTemplateDetail","description":"Detailed template with flow data"},"FlowUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name","description":"Flow name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Flow description"},"is_main":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Main","description":"Is main entry flow"},"is_fallback":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Fallback","description":"Is fallback flow for errors"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","description":"Is flow active"},"canvas_data":{"anyOf":[{"$ref":"#/components/schemas/CanvasData"},{"type":"null"}],"description":"Canvas data (React Flow format)"}},"type":"object","title":"FlowUpdate","description":"Schema for updating a flow"},"FlowWithNodes":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"is_main":{"type":"boolean","title":"Is Main","description":"Is this the main entry flow?","default":false},"is_fallback":{"type":"boolean","title":"Is Fallback","description":"Is this a fallback flow?","default":false},"canvas_data":{"additionalProperties":true,"type":"object","title":"Canvas Data"},"variables":{"additionalProperties":true,"type":"object","title":"Variables"},"is_active":{"type":"boolean","title":"Is Active","default":true},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"chatbot_id":{"type":"string","format":"uuid","title":"Chatbot Id"},"version":{"type":"integer","title":"Version"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"nodes":{"items":{"$ref":"#/components/schemas/NodeInDB"},"type":"array","title":"Nodes","default":[]}},"type":"object","required":["name","id","organization_id","chatbot_id","version","created_at","updated_at"],"title":"FlowWithNodes","description":"Flow with nodes included"},"FullReport":{"properties":{"period":{"$ref":"#/components/schemas/ReportPeriod"},"overview":{"$ref":"#/components/schemas/OverviewMetrics"},"conversations":{"$ref":"#/components/schemas/ConversationMetrics"},"agents":{"$ref":"#/components/schemas/AgentMetrics"},"campaigns":{"$ref":"#/components/schemas/CampaignMetrics"},"contacts":{"$ref":"#/components/schemas/ContactMetrics"},"chatbots":{"$ref":"#/components/schemas/ChatbotMetrics"},"messages":{"$ref":"#/components/schemas/MessageMetrics"},"generated_at":{"type":"string","format":"date-time","title":"Generated At"}},"type":"object","required":["period","overview","conversations","agents","campaigns","contacts","chatbots","messages"],"title":"FullReport","description":"Complete analytics report"},"GenerateFlowRequest":{"properties":{"description":{"type":"string","maxLength":2000,"minLength":10,"title":"Description","description":"Natural language description of the desired flow"},"industry":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Industry","description":"Industry context (e.g., 'real estate', 'e-commerce')"},"language":{"type":"string","title":"Language","description":"Flow language","default":"pt-BR"},"chatbot_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Chatbot Id","description":"Chatbot ID to associate the flow with"}},"type":"object","required":["description"],"title":"GenerateFlowRequest","description":"Request to generate a flow from description"},"GenerateFlowResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Status: 'success', 'needs_clarification', 'error'"},"flow_data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Flow Data","description":"Generated flow data (if status is 'success')"},"clarification_questions":{"anyOf":[{"items":{"$ref":"#/components/schemas/ClarificationQuestion"},"type":"array"},{"type":"null"}],"title":"Clarification Questions","description":"Questions for clarification (if status is 'needs_clarification')"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message","description":"Error message (if status is 'error')"}},"type":"object","required":["status"],"title":"GenerateFlowResponse","description":"Response from flow generation"},"GenericResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"message":{"type":"string","title":"Message"},"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data"}},"type":"object","required":["message"],"title":"GenericResponse","description":"Generic response wrapper"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ImportTemplateRequest":{"properties":{"template_id":{"type":"string","title":"Template Id","description":"Template ID to import"},"chatbot_id":{"type":"string","title":"Chatbot Id","description":"Chatbot ID to import into"},"flow_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Flow Name","description":"Custom name for the flow (uses template name if not provided)"},"customize_variables":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Customize Variables","description":"Variable name mappings for customization"}},"type":"object","required":["template_id","chatbot_id"],"title":"ImportTemplateRequest","description":"Request to import a template"},"MessageCreate":{"properties":{"content":{"type":"string","minLength":1,"title":"Content","description":"Message content"},"media_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Media Url"},"media_type":{"anyOf":[{"type":"string","pattern":"^(image|video|audio|document)$"},{"type":"null"}],"title":"Media Type"},"media_caption":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Media Caption"}},"type":"object","required":["content"],"title":"MessageCreate","description":"Schema for sending a message"},"MessageMetrics":{"properties":{"total_messages_sent":{"type":"integer","title":"Total Messages Sent","default":0},"total_messages_received":{"type":"integer","title":"Total Messages Received","default":0},"messages_by_type":{"additionalProperties":{"type":"integer"},"type":"object","title":"Messages By Type"},"avg_messages_per_day":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Messages Per Day"},"peak_messaging_hours":{"items":{"type":"integer"},"type":"array","title":"Peak Messaging Hours"},"message_delivery_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Message Delivery Rate"},"message_read_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Message Read Rate"}},"type":"object","title":"MessageMetrics","description":"Message analytics"},"MessageResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"conversation_id":{"type":"string","format":"uuid","title":"Conversation Id"},"direction":{"type":"string","title":"Direction"},"sender_type":{"type":"string","title":"Sender Type"},"message_type":{"type":"string","title":"Message Type"},"content":{"additionalProperties":true,"type":"object","title":"Content"},"status":{"type":"string","title":"Status"},"whatsapp_message_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Whatsapp Message Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"sent_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Sent At"},"delivered_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Delivered At"},"read_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Read At"},"failed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Failed At"},"error_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Code"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","required":["id","conversation_id","direction","sender_type","message_type","content","status","created_at"],"title":"MessageResponse","description":"Schema for message response"},"MessageSendRequest":{"properties":{"message_type":{"type":"string","pattern":"^(text|image|document|template|audio|video)$","title":"Message Type"},"content":{"additionalProperties":true,"type":"object","title":"Content","description":"Message content based on type"}},"type":"object","required":["message_type","content"],"title":"MessageSendRequest","description":"Schema for sending a message"},"MessageValidationRequest":{"properties":{"conversation_id":{"type":"string","format":"uuid","title":"Conversation Id","description":"ID of the conversation"},"is_template_message":{"type":"boolean","title":"Is Template Message","description":"Whether this is a template message","default":false},"template_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Template Id","description":"ID of the template (if template message)"}},"type":"object","required":["conversation_id"],"title":"MessageValidationRequest","description":"Request to validate a message against 24h window."},"MessageValidationResponse":{"properties":{"is_valid":{"type":"boolean","title":"Is Valid","description":"Whether message can be sent"},"reason":{"type":"string","title":"Reason","description":"Reason for validity/invalidity"},"window_status":{"type":"string","title":"Window Status","description":"Current window status: active, expired, unknown"},"hours_remaining":{"type":"number","title":"Hours Remaining","description":"Hours remaining in window (0 if expired)"},"template_required":{"type":"boolean","title":"Template Required","description":"Whether template is required"}},"type":"object","required":["is_valid","reason","window_status","hours_remaining","template_required"],"title":"MessageValidationResponse","description":"Response from message validation."},"NextExecutionInfo":{"properties":{"scheduled_at":{"type":"string","format":"date-time","title":"Scheduled At"},"recurrence_type":{"type":"string","title":"Recurrence Type"},"execution_window":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Execution Window"},"timezone":{"type":"string","title":"Timezone","default":"America/Sao_Paulo"}},"type":"object","required":["scheduled_at","recurrence_type"],"title":"NextExecutionInfo","description":"Informa√ß√µes sobre pr√≥ximas execu√ß√µes agendadas"},"NodeCreate":{"properties":{"node_id":{"type":"string","title":"Node Id","description":"React Flow node ID"},"node_type":{"type":"string","title":"Node Type","description":"Node type: start, message, question, condition, action, etc."},"label":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Label"},"position_x":{"type":"integer","title":"Position X","default":0},"position_y":{"type":"integer","title":"Position Y","default":0},"data":{"additionalProperties":true,"type":"object","title":"Data","description":"Node configuration based on type"},"order":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Order"}},"type":"object","required":["node_id","node_type"],"title":"NodeCreate","description":"Schema for creating a node"},"NodeInDB":{"properties":{"node_id":{"type":"string","title":"Node Id","description":"React Flow node ID"},"node_type":{"type":"string","title":"Node Type","description":"Node type: start, message, question, condition, action, etc."},"label":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Label"},"position_x":{"type":"integer","title":"Position X","default":0},"position_y":{"type":"integer","title":"Position Y","default":0},"data":{"additionalProperties":true,"type":"object","title":"Data","description":"Node configuration based on type"},"order":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Order"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"flow_id":{"type":"string","format":"uuid","title":"Flow Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["node_id","node_type","id","organization_id","flow_id","created_at","updated_at"],"title":"NodeInDB","description":"Schema for node in database"},"NodeListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"items":{"items":{"$ref":"#/components/schemas/NodeInDB"},"type":"array","title":"Items"}},"type":"object","required":["total","items"],"title":"NodeListResponse","description":"Response for node list"},"NodeUpdate":{"properties":{"node_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Node Id"},"node_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Node Type"},"label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Label"},"position_x":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Position X"},"position_y":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Position Y"},"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data"},"order":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Order"}},"type":"object","title":"NodeUpdate","description":"Schema for updating a node"},"Organization":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Organization name"},"slug":{"anyOf":[{"type":"string","pattern":"^[a-z0-9-]+$"},{"type":"null"}],"title":"Slug","description":"URL-friendly slug"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"website":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Website"},"logo_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Logo Url"},"id":{"type":"string","format":"uuid","title":"Id"},"is_active":{"type":"boolean","title":"Is Active"},"plan_type":{"type":"string","title":"Plan Type"},"plan_limits":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Plan Limits"},"plan_usage":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Plan Usage"},"trial_ends_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Trial Ends At"},"subscription_starts_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Subscription Starts At"},"subscription_ends_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Subscription Ends At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["name","id","is_active","plan_type","created_at","updated_at"],"title":"Organization"},"OrganizationPlanUpdate":{"properties":{"plan_type":{"type":"string","pattern":"^(free|starter|professional|enterprise)$","title":"Plan Type"},"subscription_starts_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Subscription Starts At"},"subscription_ends_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Subscription Ends At"}},"type":"object","required":["plan_type"],"title":"OrganizationPlanUpdate"},"OrganizationSettingsUpdate":{"properties":{"business_hours":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Business Hours"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"},"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency"},"notification_settings":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Notification Settings"},"security_settings":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Security Settings"}},"type":"object","title":"OrganizationSettingsUpdate"},"OrganizationUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"website":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Website"},"logo_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Logo Url"}},"type":"object","title":"OrganizationUpdate"},"OverviewMetrics":{"properties":{"total_contacts":{"type":"integer","title":"Total Contacts","default":0},"new_contacts_today":{"type":"integer","title":"New Contacts Today","default":0},"new_contacts_this_week":{"type":"integer","title":"New Contacts This Week","default":0},"new_contacts_this_month":{"type":"integer","title":"New Contacts This Month","default":0},"total_conversations":{"type":"integer","title":"Total Conversations","default":0},"active_conversations":{"type":"integer","title":"Active Conversations","default":0},"new_conversations_today":{"type":"integer","title":"New Conversations Today","default":0},"avg_response_time_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Response Time Seconds"},"total_messages_sent":{"type":"integer","title":"Total Messages Sent","default":0},"total_messages_received":{"type":"integer","title":"Total Messages Received","default":0},"messages_sent_today":{"type":"integer","title":"Messages Sent Today","default":0},"messages_received_today":{"type":"integer","title":"Messages Received Today","default":0},"total_campaigns":{"type":"integer","title":"Total Campaigns","default":0},"active_campaigns":{"type":"integer","title":"Active Campaigns","default":0},"scheduled_campaigns":{"type":"integer","title":"Scheduled Campaigns","default":0},"total_chatbots":{"type":"integer","title":"Total Chatbots","default":0},"active_chatbots":{"type":"integer","title":"Active Chatbots","default":0},"total_agents":{"type":"integer","title":"Total Agents","default":0},"agents_online":{"type":"integer","title":"Agents Online","default":0}},"type":"object","title":"OverviewMetrics","description":"Overview dashboard metrics"},"PermissionCreate":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category":{"type":"string","maxLength":50,"minLength":1,"title":"Category","default":"general"}},"type":"object","required":["name"],"title":"PermissionCreate","description":"Schema for creating a permission"},"PermissionInDB":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category":{"type":"string","maxLength":50,"minLength":1,"title":"Category","default":"general"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Organization Id"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["name","id","organization_id","is_active","created_at","updated_at"],"title":"PermissionInDB","description":"Schema for permission in database"},"PermissionListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"items":{"items":{"$ref":"#/components/schemas/PermissionInDB"},"type":"array","title":"Items"}},"type":"object","required":["total","items"],"title":"PermissionListResponse","description":"Response for permission list"},"QRCodeResponse":{"properties":{"qr_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qr Code"},"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["status","message"],"title":"QRCodeResponse","description":"QR Code response for Evolution API"},"QueryParameter":{"properties":{"name":{"type":"string","title":"Name","description":"Parameter name"},"value":{"title":"Value","description":"Parameter value"},"type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Type","description":"Parameter type","default":"auto"}},"type":"object","required":["name","value"],"title":"QueryParameter","description":"Query parameter for prepared statements."},"QueryResult":{"properties":{"success":{"type":"boolean","title":"Success","description":"Query executed successfully"},"data":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Data","description":"Query result data"},"row_count":{"type":"integer","title":"Row Count","description":"Number of rows affected/returned","default":0},"execution_time":{"type":"number","title":"Execution Time","description":"Query execution time in seconds"},"from_cache":{"type":"boolean","title":"From Cache","description":"Result was served from cache","default":false},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if failed"}},"type":"object","required":["success","execution_time"],"title":"QueryResult","description":"Query execution result."},"Queue":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Queue name"},"slug":{"type":"string","maxLength":100,"minLength":1,"title":"Slug","description":"URL-friendly slug"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Queue description"},"color":{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$","title":"Color","description":"Hex color","default":"#10B981"},"icon":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Icon","description":"Icon identifier"},"is_active":{"type":"boolean","title":"Is Active","description":"Is queue active","default":true},"priority":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Priority","description":"Queue priority (0-100)","default":50},"sla_minutes":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Sla Minutes","description":"SLA in minutes (max wait time)"},"routing_mode":{"type":"string","title":"Routing Mode","description":"Routing mode (round_robin, load_balance, manual, skills_based)","default":"round_robin"},"auto_assign_conversations":{"type":"boolean","title":"Auto Assign Conversations","description":"Auto-assign conversations to agents","default":true},"max_conversations_per_agent":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Max Conversations Per Agent","description":"Max concurrent conversations per agent","default":10},"max_queue_size":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Max Queue Size","description":"Maximum queue size before overflow (optional)"},"overflow_queue_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Overflow Queue Id","description":"Queue to redirect to when max_queue_size is reached"},"settings":{"additionalProperties":true,"type":"object","title":"Settings","description":"Additional settings (JSONB)"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"department_id":{"type":"string","format":"uuid","title":"Department Id"},"total_conversations":{"type":"integer","title":"Total Conversations","default":0},"active_conversations":{"type":"integer","title":"Active Conversations","default":0},"queued_conversations":{"type":"integer","title":"Queued Conversations","default":0},"completed_conversations":{"type":"integer","title":"Completed Conversations","default":0},"average_wait_time_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Average Wait Time Seconds"},"average_response_time_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Average Response Time Seconds"},"average_resolution_time_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Average Resolution Time Seconds"},"customer_satisfaction_score":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Customer Satisfaction Score"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"}},"type":"object","required":["name","slug","id","organization_id","department_id","created_at","updated_at"],"title":"Queue","description":"Complete Queue schema for API responses"},"QueueBulkDelete":{"properties":{"queue_ids":{"items":{"type":"string","format":"uuid"},"type":"array","maxItems":100,"minItems":1,"title":"Queue Ids"}},"type":"object","required":["queue_ids"],"title":"QueueBulkDelete","description":"Schema for bulk deleting queues"},"QueueCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Queue name"},"slug":{"type":"string","maxLength":100,"minLength":1,"title":"Slug","description":"URL-friendly slug"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Queue description"},"color":{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$","title":"Color","description":"Hex color","default":"#10B981"},"icon":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Icon","description":"Icon identifier"},"is_active":{"type":"boolean","title":"Is Active","description":"Is queue active","default":true},"priority":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Priority","description":"Queue priority (0-100)","default":50},"sla_minutes":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Sla Minutes","description":"SLA in minutes (max wait time)"},"routing_mode":{"type":"string","title":"Routing Mode","description":"Routing mode (round_robin, load_balance, manual, skills_based)","default":"round_robin"},"auto_assign_conversations":{"type":"boolean","title":"Auto Assign Conversations","description":"Auto-assign conversations to agents","default":true},"max_conversations_per_agent":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Max Conversations Per Agent","description":"Max concurrent conversations per agent","default":10},"max_queue_size":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Max Queue Size","description":"Maximum queue size before overflow (optional)"},"overflow_queue_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Overflow Queue Id","description":"Queue to redirect to when max_queue_size is reached"},"settings":{"additionalProperties":true,"type":"object","title":"Settings","description":"Additional settings (JSONB)"},"department_id":{"type":"string","format":"uuid","title":"Department Id","description":"Parent department ID"}},"type":"object","required":["name","slug","department_id"],"title":"QueueCreate","description":"Schema for creating a new queue"},"QueueUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name"},"slug":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Slug"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"color":{"anyOf":[{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$"},{"type":"null"}],"title":"Color"},"icon":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Icon"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"priority":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Priority"},"sla_minutes":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Sla Minutes"},"routing_mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Routing Mode"},"auto_assign_conversations":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Auto Assign Conversations"},"max_conversations_per_agent":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":1.0},{"type":"null"}],"title":"Max Conversations Per Agent"},"settings":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Settings"}},"additionalProperties":false,"type":"object","title":"QueueUpdate","description":"Schema for updating a queue (all fields optional)"},"RefreshTokenRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshTokenRequest","description":"Request to refresh access token"},"ReportPeriod":{"properties":{"start_date":{"type":"string","format":"date-time","title":"Start Date"},"end_date":{"type":"string","format":"date-time","title":"End Date"},"period_type":{"type":"string","title":"Period Type","description":"daily, weekly, monthly, custom"}},"type":"object","required":["start_date","end_date","period_type"],"title":"ReportPeriod","description":"Report time period"},"RoleCreate":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","required":["name"],"title":"RoleCreate","description":"Schema for creating a role"},"RoleInDB":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Organization Id"},"is_system":{"type":"boolean","title":"Is System"},"is_custom":{"type":"boolean","title":"Is Custom"},"is_active":{"type":"boolean","title":"Is Active"},"permissions":{"items":{"$ref":"#/components/schemas/PermissionInDB"},"type":"array","title":"Permissions","default":[]},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["name","id","organization_id","is_system","is_custom","is_active","created_at","updated_at"],"title":"RoleInDB","description":"Schema for role in database"},"RoleListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"items":{"items":{"$ref":"#/components/schemas/RoleInDB"},"type":"array","title":"Items"}},"type":"object","required":["total","items"],"title":"RoleListResponse","description":"Response for role list"},"RolePermissionAssign":{"properties":{"permission_ids":{"items":{"type":"string","format":"uuid"},"type":"array","minItems":0,"title":"Permission Ids","description":"List of permission IDs to assign"}},"type":"object","required":["permission_ids"],"title":"RolePermissionAssign","description":"Schema for assigning permissions to role"},"RoleUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","title":"RoleUpdate","description":"Schema for updating a role"},"ScheduleCampaignRequest":{"properties":{"scheduled_at":{"type":"string","format":"date-time","title":"Scheduled At"}},"type":"object","required":["scheduled_at"],"title":"ScheduleCampaignRequest","description":"Request schema for scheduling campaign"},"ScheduleExceptionCreate":{"properties":{"exception_type":{"type":"string","title":"Exception Type","description":"skip, reschedule, modify"},"start_date":{"type":"string","format":"date-time","title":"Start Date"},"end_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"},"rescheduled_to":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Rescheduled To"},"modified_config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Modified Config"},"schedule_id":{"type":"string","format":"uuid","title":"Schedule Id"}},"type":"object","required":["exception_type","start_date","schedule_id"],"title":"ScheduleExceptionCreate","description":"Schema for creating exception"},"SchedulePreview":{"properties":{"automation_id":{"type":"string","format":"uuid","title":"Automation Id"},"schedule_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Schedule Id"},"next_executions":{"items":{"$ref":"#/components/schemas/NextExecutionInfo"},"type":"array","title":"Next Executions","description":"Pr√≥ximas 10 execu√ß√µes agendadas"}},"type":"object","required":["automation_id"],"title":"SchedulePreview","description":"Preview de execu√ß√µes pr√≥ximas (para calend√°rio UI)"},"SecretCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"pattern":"^[a-z0-9_]+$","title":"Name","description":"Internal name (snake_case, alphanumeric + underscore only)"},"display_name":{"type":"string","maxLength":255,"minLength":1,"title":"Display Name","description":"User-friendly display name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Optional description"},"scope":{"$ref":"#/components/schemas/SecretScope","description":"Secret scope (organization or chatbot)","default":"chatbot"},"secret_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Secret Metadata","description":"Optional metadata (tags, categories, etc.)"},"value":{"type":"string","minLength":1,"title":"Value","description":"Plaintext value to encrypt (never stored unencrypted)"},"chatbot_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Chatbot Id","description":"Chatbot UUID (required if scope is CHATBOT)"},"encryption_provider":{"$ref":"#/components/schemas/EncryptionProvider","description":"Encryption provider to use","default":"fernet"},"encryption_key_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Encryption Key Id","description":"External key ID (for AWS KMS, Vault, etc.)"}},"type":"object","required":["name","display_name","value"],"title":"SecretCreate","description":"Schema for creating a new secret"},"SecretInDB":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"pattern":"^[a-z0-9_]+$","title":"Name","description":"Internal name (snake_case, alphanumeric + underscore only)"},"display_name":{"type":"string","maxLength":255,"minLength":1,"title":"Display Name","description":"User-friendly display name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Optional description"},"scope":{"$ref":"#/components/schemas/SecretScope","description":"Secret scope (organization or chatbot)","default":"chatbot"},"secret_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Secret Metadata","description":"Optional metadata (tags, categories, etc.)"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"chatbot_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Chatbot Id"},"encryption_provider":{"$ref":"#/components/schemas/EncryptionProvider"},"encryption_key_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Encryption Key Id"},"encryption_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Encryption Metadata"},"is_active":{"type":"boolean","title":"Is Active"},"last_used_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Used At"},"usage_count":{"type":"integer","title":"Usage Count"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["name","display_name","id","organization_id","encryption_provider","is_active","usage_count","created_at","updated_at"],"title":"SecretInDB","description":"Schema for secret in database (includes system fields, no decrypted value)"},"SecretScope":{"type":"string","enum":["organization","chatbot"],"title":"SecretScope","description":"Scope of the secret - where it can be used"},"SecretUpdate":{"properties":{"display_name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Display Name","description":"New display name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"New description"},"value":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Value","description":"New plaintext value (will be re-encrypted)"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","description":"Active status"},"secret_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Secret Metadata","description":"New metadata"}},"type":"object","title":"SecretUpdate","description":"Schema for updating a secret"},"SecretWithValue":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"pattern":"^[a-z0-9_]+$","title":"Name","description":"Internal name (snake_case, alphanumeric + underscore only)"},"display_name":{"type":"string","maxLength":255,"minLength":1,"title":"Display Name","description":"User-friendly display name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Optional description"},"scope":{"$ref":"#/components/schemas/SecretScope","description":"Secret scope (organization or chatbot)","default":"chatbot"},"secret_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Secret Metadata","description":"Optional metadata (tags, categories, etc.)"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"chatbot_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Chatbot Id"},"encryption_provider":{"$ref":"#/components/schemas/EncryptionProvider"},"encryption_key_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Encryption Key Id"},"encryption_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Encryption Metadata"},"is_active":{"type":"boolean","title":"Is Active"},"last_used_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Used At"},"usage_count":{"type":"integer","title":"Usage Count"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"value":{"type":"string","title":"Value","description":"Decrypted plaintext value"}},"type":"object","required":["name","display_name","id","organization_id","encryption_provider","is_active","usage_count","created_at","updated_at","value"],"title":"SecretWithValue","description":"Schema with decrypted value for API responses.\n\n‚ö†Ô∏è WARNING: Contains plaintext secret value. Use with caution."},"SlaAlert":{"properties":{"conversation_id":{"type":"string","format":"uuid","title":"Conversation Id"},"contact_id":{"type":"string","format":"uuid","title":"Contact Id"},"contact_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Name"},"contact_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Phone"},"queue_id":{"type":"string","format":"uuid","title":"Queue Id"},"queue_name":{"type":"string","title":"Queue Name"},"sla_minutes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Sla Minutes"},"queued_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Queued At"},"waited_minutes":{"type":"number","title":"Waited Minutes","description":"Minutes already waited in queue","default":0},"progress":{"type":"number","title":"Progress","description":"waited_minutes / sla_minutes; >=1 is over SLA","default":0},"severity":{"type":"string","title":"Severity","description":"warning | critical","default":"warning"},"priority":{"type":"integer","title":"Priority","default":0}},"type":"object","required":["conversation_id","contact_id","queue_id","queue_name"],"title":"SlaAlert","description":"Represents a conversation nearing or exceeding SLA"},"SortField":{"type":"string","enum":["created_at","updated_at","severity","status","title"],"title":"SortField","description":"Available fields for sorting."},"SortOrder":{"type":"string","enum":["asc","desc"],"title":"SortOrder","description":"Sort order direction."},"SuccessResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"message":{"type":"string","title":"Message"}},"type":"object","required":["message"],"title":"SuccessResponse","description":"Generic success response","example":{"message":"Operation completed successfully","success":true}},"SuggestImprovementsRequest":{"properties":{"flow_id":{"type":"string","title":"Flow Id","description":"Flow ID to analyze"},"focus_areas":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Focus Areas","description":"Specific areas to focus on (e.g., 'user_experience', 'conversion', 'clarity')"}},"type":"object","required":["flow_id"],"title":"SuggestImprovementsRequest","description":"Request to suggest improvements for a flow"},"SuggestImprovementsResponse":{"properties":{"flow_id":{"type":"string","title":"Flow Id"},"improvements":{"items":{"$ref":"#/components/schemas/FlowImprovement"},"type":"array","title":"Improvements"},"analysis_summary":{"type":"string","title":"Analysis Summary","description":"Overall analysis summary"}},"type":"object","required":["flow_id","improvements","analysis_summary"],"title":"SuggestImprovementsResponse","description":"Response with flow improvement suggestions"},"Tag":{"properties":{"name":{"type":"string","maxLength":50,"minLength":1,"title":"Name"},"color":{"anyOf":[{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$"},{"type":"null"}],"title":"Color"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["name","id","organization_id","created_at"],"title":"Tag"},"TagCreate":{"properties":{"name":{"type":"string","maxLength":50,"minLength":1,"title":"Name"},"color":{"anyOf":[{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$"},{"type":"null"}],"title":"Color"}},"type":"object","required":["name"],"title":"TagCreate"},"TagUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":50,"minLength":1},{"type":"null"}],"title":"Name"},"color":{"anyOf":[{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$"},{"type":"null"}],"title":"Color"}},"type":"object","title":"TagUpdate"},"TemplateButtonSchema":{"properties":{"type":{"type":"string","title":"Type","description":"Button type: QUICK_REPLY, PHONE_NUMBER, URL"},"text":{"type":"string","maxLength":25,"title":"Text","description":"Button text"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number","description":"Phone number for PHONE_NUMBER type"},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url","description":"URL for URL type"}},"type":"object","required":["type","text"],"title":"TemplateButtonSchema","description":"Template button schema"},"TemplateCategory":{"properties":{"id":{"type":"string","title":"Id","description":"Category ID (e.g., 'lead_qualification')"},"name":{"type":"string","title":"Name","description":"Category display name"},"description":{"type":"string","title":"Description","description":"Category description"},"icon":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Icon","description":"Icon name or emoji"},"template_count":{"type":"integer","title":"Template Count","description":"Number of templates in category","default":0}},"type":"object","required":["id","name","description"],"title":"TemplateCategory","description":"Template category"},"TemplateComponentSchema":{"properties":{"type":{"type":"string","title":"Type","description":"Component type: HEADER, BODY, FOOTER, BUTTONS"},"format":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Format","description":"Format for HEADER: TEXT, IMAGE, VIDEO, DOCUMENT"},"text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text","description":"Text content"},"buttons":{"anyOf":[{"items":{"$ref":"#/components/schemas/TemplateButtonSchema"},"type":"array"},{"type":"null"}],"title":"Buttons","description":"Buttons for BUTTONS component"}},"type":"object","required":["type"],"title":"TemplateComponentSchema","description":"Template component schema (Header, Body, Footer, Buttons)"},"TemplateCreateRequest":{"properties":{"name":{"type":"string","maxLength":512,"minLength":1,"title":"Name","description":"Template name (lowercase, underscores, no spaces)"},"language":{"type":"string","title":"Language","description":"Language code (pt_BR, en_US, es, etc)","default":"pt_BR"},"category":{"type":"string","title":"Category","description":"Category: MARKETING, UTILITY, AUTHENTICATION"},"components":{"items":{"$ref":"#/components/schemas/TemplateComponentSchema"},"type":"array","title":"Components","description":"Template components"}},"type":"object","required":["name","category","components"],"title":"TemplateCreateRequest","description":"Request schema for creating a template"},"TemplateListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"items":{"items":{"$ref":"#/components/schemas/FlowTemplate"},"type":"array","title":"Items"},"categories":{"items":{"$ref":"#/components/schemas/TemplateCategory"},"type":"array","title":"Categories"}},"type":"object","required":["total","items","categories"],"title":"TemplateListResponse","description":"Response for template listing"},"TemplateMetricsResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"message":{"type":"string","title":"Message"},"data":{"anyOf":[{},{"type":"null"}],"title":"Data"},"template_id":{"type":"string","format":"uuid","title":"Template Id"},"template_name":{"type":"string","title":"Template Name"},"category":{"type":"string","title":"Category"},"status":{"type":"string","title":"Status"},"period_days":{"type":"integer","title":"Period Days"}},"type":"object","required":["message","template_id","template_name","category","status","period_days"],"title":"TemplateMetricsResponse","description":"Template metrics response"},"TemplateResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"whatsapp_number_id":{"type":"string","format":"uuid","title":"Whatsapp Number Id"},"meta_template_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meta Template Id"},"name":{"type":"string","title":"Name"},"language":{"type":"string","title":"Language"},"category":{"type":"string","title":"Category"},"suggested_category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Suggested Category"},"status":{"type":"string","title":"Status"},"rejected_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rejected Reason"},"header_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Header Type"},"header_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Header Text"},"header_variables_count":{"type":"integer","title":"Header Variables Count","default":0},"body_text":{"type":"string","title":"Body Text"},"body_variables_count":{"type":"integer","title":"Body Variables Count","default":0},"footer_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Footer Text"},"buttons":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Buttons","default":[]},"sent_count":{"type":"integer","title":"Sent Count","default":0},"delivered_count":{"type":"integer","title":"Delivered Count","default":0},"read_count":{"type":"integer","title":"Read Count","default":0},"failed_count":{"type":"integer","title":"Failed Count","default":0},"is_system_template":{"type":"boolean","title":"Is System Template","default":false},"is_enabled":{"type":"boolean","title":"Is Enabled","default":true},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"approved_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Approved At"},"rejected_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Rejected At"},"ai_analysis_score":{"anyOf":[{"type":"number","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Ai Analysis Score","description":"Score da an√°lise de IA (0-100). < 60 = cr√≠tico, 60-80 = aten√ß√£o, > 80 = bom"},"ai_suggested_category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ai Suggested Category","description":"Categoria sugerida pela IA (MARKETING, UTILITY, AUTHENTICATION)"},"ai_analyzed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ai Analyzed At","description":"Data/hora quando foi analisado pela IA"}},"type":"object","required":["id","organization_id","whatsapp_number_id","name","language","category","status","body_text","created_at","updated_at"],"title":"TemplateResponse","description":"Response schema for a template"},"TemplateSyncResponse":{"properties":{"synced":{"type":"integer","title":"Synced"},"created":{"type":"integer","title":"Created"},"updated":{"type":"integer","title":"Updated"},"deleted":{"type":"integer","title":"Deleted"},"errors":{"items":{"type":"string"},"type":"array","title":"Errors","default":[]}},"type":"object","required":["synced","created","updated","deleted"],"title":"TemplateSyncResponse","description":"Response from sync operation"},"TemplateUpdateRequest":{"properties":{"is_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Enabled","description":"Enable/disable template"}},"type":"object","title":"TemplateUpdateRequest","description":"Request schema for updating a template (only local fields)"},"TestConnectionRequest":{"properties":{"config":{"$ref":"#/components/schemas/DatabaseConnectionConfig","description":"Connection configuration"}},"type":"object","required":["config"],"title":"TestConnectionRequest","description":"Test database connection request."},"TestConnectionResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Connection successful"},"message":{"type":"string","title":"Message","description":"Result message"},"connection_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Connection Time","description":"Connection time in seconds"},"server_version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Server Version","description":"Database server version"}},"type":"object","required":["success","message"],"title":"TestConnectionResponse","description":"Test database connection response."},"TimeSeriesData":{"properties":{"metric_name":{"type":"string","title":"Metric Name"},"data_points":{"items":{"$ref":"#/components/schemas/TimeSeriesDataPoint"},"type":"array","title":"Data Points"},"total":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Total"},"average":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Average"}},"type":"object","required":["metric_name"],"title":"TimeSeriesData","description":"Time series data"},"TimeSeriesDataPoint":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"value":{"type":"number","title":"Value"},"label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Label"}},"type":"object","required":["timestamp","value"],"title":"TimeSeriesDataPoint","description":"Single data point in time series"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"refresh_token":{"type":"string","title":"Refresh Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"expires_in":{"type":"integer","title":"Expires In"}},"type":"object","required":["access_token","refresh_token","expires_in"],"title":"Token","description":"JWT token response","example":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","expires_in":900,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","token_type":"bearer"}},"User":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"full_name":{"type":"string","maxLength":255,"minLength":2,"title":"Full Name"},"phone_number":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone Number"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"bio":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bio"},"role":{"type":"string","title":"Role","default":"agent"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"email_verified":{"type":"boolean","title":"Email Verified"},"is_active":{"type":"boolean","title":"Is Active"},"is_online":{"type":"boolean","title":"Is Online"},"last_seen_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Seen At"},"last_login_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login At"},"agent_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Status"},"agent_greeting_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Greeting Message"},"department_ids":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Department Ids","default":[]},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions","default":[]}},"type":"object","required":["email","full_name","created_at","updated_at","id","organization_id","email_verified","is_active","is_online"],"title":"User","description":"User response schema","example":{"created_at":"2025-10-03T12:00:00Z","email":"agent@example.com","email_verified":true,"full_name":"Jane Agent","id":"123e4567-e89b-12d3-a456-426614174000","is_active":true,"is_online":false,"organization_id":"123e4567-e89b-12d3-a456-426614174001","role":"agent","updated_at":"2025-10-03T12:00:00Z"}},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"full_name":{"type":"string","maxLength":255,"minLength":2,"title":"Full Name"},"phone_number":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone Number"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"bio":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bio"},"role":{"type":"string","title":"Role","default":"agent"},"password":{"type":"string","maxLength":100,"minLength":8,"title":"Password"},"department_ids":{"anyOf":[{"items":{"type":"string","format":"uuid"},"type":"array"},{"type":"null"}],"title":"Department Ids"}},"type":"object","required":["email","full_name","password"],"title":"UserCreate","description":"Schema for creating a user","example":{"email":"agent@example.com","full_name":"Jane Agent","password":"SecurePassword123!","role":"agent"}},"UserLogin":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","maxLength":100,"minLength":8,"title":"Password"}},"type":"object","required":["email","password"],"title":"UserLogin","description":"Schema for user login","example":{"email":"user@example.com","password":"SecurePassword123!"}},"UserProfile":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"full_name":{"type":"string","maxLength":255,"minLength":2,"title":"Full Name"},"phone_number":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone Number"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"bio":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bio"},"role":{"type":"string","title":"Role","default":"agent"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"email_verified":{"type":"boolean","title":"Email Verified"},"is_active":{"type":"boolean","title":"Is Active"},"is_online":{"type":"boolean","title":"Is Online"},"last_seen_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Seen At"},"last_login_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login At"},"agent_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Status"},"agent_greeting_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Greeting Message"},"department_ids":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Department Ids","default":[]},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions","default":[]}},"type":"object","required":["email","full_name","created_at","updated_at","id","organization_id","email_verified","is_active","is_online"],"title":"UserProfile","description":"User profile schema (current user)","example":{"created_at":"2025-10-03T12:00:00Z","email":"agent@example.com","email_verified":true,"full_name":"Jane Agent","id":"123e4567-e89b-12d3-a456-426614174000","is_active":true,"is_online":false,"organization_id":"123e4567-e89b-12d3-a456-426614174001","role":"agent","updated_at":"2025-10-03T12:00:00Z"}},"UserRegister":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","maxLength":100,"minLength":8,"title":"Password"},"full_name":{"type":"string","maxLength":255,"minLength":2,"title":"Full Name"},"organization_name":{"type":"string","maxLength":255,"minLength":2,"title":"Organization Name"}},"type":"object","required":["email","password","full_name","organization_name"],"title":"UserRegister","description":"Schema for user registration","example":{"email":"user@example.com","full_name":"John Doe","organization_name":"My Company","password":"SecurePassword123!"}},"UserRoleAssign":{"properties":{"user_id":{"type":"string","format":"uuid","title":"User Id","description":"User ID to assign role to"},"role_id":{"type":"string","format":"uuid","title":"Role Id","description":"Role ID to assign to user"}},"type":"object","required":["user_id","role_id"],"title":"UserRoleAssign","description":"Schema for assigning role to user"},"UserUpdate":{"properties":{"full_name":{"anyOf":[{"type":"string","maxLength":255,"minLength":2},{"type":"null"}],"title":"Full Name"},"phone_number":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone Number"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"bio":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bio"},"role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"agent_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Status"},"agent_greeting_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Greeting Message"},"department_ids":{"anyOf":[{"items":{"type":"string","format":"uuid"},"type":"array"},{"type":"null"}],"title":"Department Ids"}},"type":"object","title":"UserUpdate","description":"Schema for updating a user","example":{"agent_status":"available","department_ids":["123e4567-e89b-12d3-a456-426614174000"],"full_name":"Jane Agent Updated","phone_number":"+5511999999999"}},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WhatsAppNumber":{"properties":{"phone_number":{"type":"string","maxLength":20,"minLength":10,"title":"Phone Number","description":"N√∫mero de telefone com c√≥digo pa√≠s (ex: 5585987654321 para Brasil)","example":"5585987654321"},"display_name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Display Name","description":"Nome exibido para este n√∫mero WhatsApp","example":"Atendimento ao Cliente"},"id":{"type":"string","format":"uuid","title":"Id"},"organization_id":{"type":"string","format":"uuid","title":"Organization Id"},"connection_type":{"$ref":"#/components/schemas/ConnectionType","default":"official"},"whatsapp_business_account_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Whatsapp Business Account Id"},"phone_number_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number Id"},"access_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token"},"webhook_verify_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Webhook Verify Token"},"verified":{"type":"boolean","title":"Verified","default":false},"quality_rating":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Quality Rating"},"messaging_limit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Messaging Limit"},"evolution_instance_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evolution Instance Name"},"evolution_api_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evolution Api Url"},"evolution_api_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evolution Api Key"},"status":{"type":"string","title":"Status","default":"disconnected"},"connected_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Connected At"},"last_seen_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Seen At"},"is_active":{"type":"boolean","title":"Is Active","default":true},"auto_reply_enabled":{"type":"boolean","title":"Auto Reply Enabled","default":false},"away_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Away Message"},"business_hours":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Business Hours"},"default_department_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Default Department Id"},"default_chatbot_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Default Chatbot Id"},"webhook_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Webhook Url"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"available_node_types":{"items":{"type":"string"},"type":"array","title":"Available Node Types"},"node_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Node Metadata"}},"type":"object","required":["phone_number","id","organization_id","created_at","updated_at"],"title":"WhatsAppNumber","description":"Public WhatsApp number schema"},"WhatsAppNumberCreate":{"properties":{"phone_number":{"type":"string","maxLength":20,"minLength":10,"title":"Phone Number","description":"N√∫mero de telefone com c√≥digo pa√≠s (ex: 5585987654321 para Brasil)","example":"5585987654321"},"display_name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Display Name","description":"Nome exibido para este n√∫mero WhatsApp","example":"Atendimento ao Cliente"},"connection_type":{"$ref":"#/components/schemas/ConnectionType","description":"Tipo de conex√£o: 'official' (Meta Cloud API) ou 'qrcode' (Evolution API)","default":"official","example":"official"},"phone_number_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number Id","description":"[OFFICIAL API] ID da conta de celular registrada no Meta Business","example":"123456789"},"whatsapp_business_account_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Whatsapp Business Account Id","description":"[OFFICIAL API] ID da conta comercial WhatsApp no Meta","example":"111222333"},"access_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Access Token","description":"[OFFICIAL API] Token de acesso do Meta (obter em Meta App Dashboard). Requer: whatsapp_business_messaging","example":"EAABs..."},"app_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"App Secret","description":"[OFFICIAL API] Secret da aplica√ß√£o Meta para validar assinatura de webhooks","example":"your-app-secret"},"webhook_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Webhook Url","description":"URL para receber webhooks de mensagens (GET para verifica√ß√£o, POST para mensagens)","example":"https://seu-dominio.com/webhook"},"webhook_verify_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Webhook Verify Token","description":"Token de verifica√ß√£o customizado para webhooks (gerado automaticamente se n√£o fornecido)","example":"your-verify-token"},"evolution_instance_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evolution Instance Name","description":"[EVOLUTION API] Nome √∫nico e imut√°vel da inst√¢ncia Evolution","example":"instance-1"},"evolution_api_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evolution Api Url","description":"[EVOLUTION API] URL base da API Evolution (ex: https://api.evolution.com)","example":"https://api.evolution.com"},"evolution_api_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evolution Api Key","description":"[EVOLUTION API] Chave de API global da Evolution (obt√©m via API Evolution)","example":"your-evolution-api-key"}},"type":"object","required":["phone_number"],"title":"WhatsAppNumberCreate","description":"Schema for registering a WhatsApp number with full documentation","examples":[{"title":"Meta Cloud API Example","value":{"access_token":"EAABs...","connection_type":"official","display_name":"Suporte Ao Cliente","phone_number":"5585987654321","phone_number_id":"123456789","webhook_url":"https://seu-dominio.com/webhook","whatsapp_business_account_id":"111222333"}},{"title":"Evolution API Example","value":{"connection_type":"qrcode","display_name":"Atendimento","evolution_api_key":"your-api-key","evolution_api_url":"https://api.evolution.com","evolution_instance_name":"instance-1","phone_number":"5585987654321"}}]},"WhatsAppNumberUpdate":{"properties":{"display_name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Display Name"},"webhook_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Webhook Url"},"app_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"App Secret"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"away_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Away Message"},"default_chatbot_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Default Chatbot Id"}},"type":"object","title":"WhatsAppNumberUpdate","description":"Schema for updating a WhatsApp number"},"app__schemas__flow__FlowCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Flow name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Flow description"},"is_main":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Main","description":"Is main entry flow","default":false},"is_fallback":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Fallback","description":"Is fallback flow for errors","default":false},"chatbot_id":{"type":"string","format":"uuid","title":"Chatbot Id","description":"Chatbot ID this flow belongs to"},"canvas_data":{"anyOf":[{"$ref":"#/components/schemas/CanvasData"},{"type":"null"}],"description":"Canvas data (React Flow format)"}},"type":"object","required":["name","chatbot_id"],"title":"FlowCreate","description":"Schema for creating a flow"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}},"tags":[{"name":"Auth","description":"Autentica√ß√£o e autoriza√ß√£o JWT"},{"name":"Organizations","description":"Gerenciamento de organiza√ß√µes"},{"name":"Users","description":"Gerenciamento de usu√°rios e equipes"},{"name":"Departments","description":"Departamentos organizacionais"},{"name":"Queues","description":"Filas de atendimento"},{"name":"Contacts","description":"Gerenciamento de contatos"},{"name":"Conversations","description":"Conversas e mensagens"},{"name":"WhatsApp","description":"Integra√ß√£o WhatsApp Business"},{"name":"Chatbots","description":"Chatbots e flows de automa√ß√£o"},{"name":"Campaigns","description":"Campanhas de mensagens em massa"},{"name":"Analytics","description":"M√©tricas e relat√≥rios"},{"name":"Flow Automations","description":"Automa√ß√µes proativas de flows"},{"name":"Secrets","description":"Armazenamento seguro de credenciais"},{"name":"AI Assistant","description":"Assistente de AI para gera√ß√£o de flows"},{"name":"Notifications","description":"Notifica√ß√µes e prefer√™ncias"}]}